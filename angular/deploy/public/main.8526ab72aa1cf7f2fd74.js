(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?s:e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return sn}),n.d(e,"b",function(){return Ja}),n.d(e,"c",function(){return $a}),n.d(e,"d",function(){return Ga}),n.d(e,"e",function(){return Ka}),n.d(e,"f",function(){return Gu}),n.d(e,"g",function(){return Pu}),n.d(e,"h",function(){return Zs}),n.d(e,"i",function(){return cu}),n.d(e,"j",function(){return Os}),n.d(e,"k",function(){return eu}),n.d(e,"l",function(){return Is}),n.d(e,"m",function(){return vr}),n.d(e,"n",function(){return xa}),n.d(e,"o",function(){return Zi}),n.d(e,"p",function(){return Sn}),n.d(e,"q",function(){return N}),n.d(e,"r",function(){return on}),n.d(e,"s",function(){return yo}),n.d(e,"t",function(){return Ks}),n.d(e,"u",function(){return Ws}),n.d(e,"v",function(){return tu}),n.d(e,"w",function(){return la}),n.d(e,"x",function(){return Lu}),n.d(e,"y",function(){return ca}),n.d(e,"z",function(){return ju}),n.d(e,"A",function(){return fu}),n.d(e,"B",function(){return Cn}),n.d(e,"C",function(){return Xa}),n.d(e,"D",function(){return Ya}),n.d(e,"E",function(){return js}),n.d(e,"F",function(){return As}),n.d(e,"G",function(){return Er}),n.d(e,"H",function(){return Ns}),n.d(e,"I",function(){return dr}),n.d(e,"J",function(){return In}),n.d(e,"K",function(){return Uu}),n.d(e,"L",function(){return oa}),n.d(e,"M",function(){return bu}),n.d(e,"N",function(){return an}),n.d(e,"O",function(){return Ds}),n.d(e,"P",function(){return Rs}),n.d(e,"Q",function(){return fa}),n.d(e,"R",function(){return V}),n.d(e,"S",function(){return ku}),n.d(e,"T",function(){return xu}),n.d(e,"U",function(){return w}),n.d(e,"V",function(){return Iu}),n.d(e,"W",function(){return Hu}),n.d(e,"X",function(){return Eu}),n.d(e,"Y",function(){return Za}),n.d(e,"Z",function(){return eo}),n.d(e,"ab",function(){return cs}),n.d(e,"bb",function(){return hr}),n.d(e,"cb",function(){return Wn}),n.d(e,"db",function(){return Ln}),n.d(e,"eb",function(){return Fn}),n.d(e,"fb",function(){return Hn}),n.d(e,"gb",function(){return qn}),n.d(e,"hb",function(){return Un}),n.d(e,"ib",function(){return Bn}),n.d(e,"jb",function(){return os}),n.d(e,"kb",function(){return Bu}),n.d(e,"lb",function(){return ss}),n.d(e,"mb",function(){return as}),n.d(e,"nb",function(){return Vn}),n.d(e,"ob",function(){return H}),n.d(e,"pb",function(){return So}),n.d(e,"qb",function(){return Fo}),n.d(e,"rb",function(){return Lo}),n.d(e,"sb",function(){return Vo}),n.d(e,"tb",function(){return is}),n.d(e,"ub",function(){return kt}),n.d(e,"vb",function(){return m}),n.d(e,"wb",function(){return Mn}),n.d(e,"xb",function(){return vo}),n.d(e,"yb",function(){return St}),n.d(e,"zb",function(){return ws}),n.d(e,"Ab",function(){return oi}),n.d(e,"Bb",function(){return xo}),n.d(e,"Cb",function(){return $o}),n.d(e,"Db",function(){return qa}),n.d(e,"Eb",function(){return tt}),n.d(e,"Fb",function(){return at}),n.d(e,"Gb",function(){return O}),n.d(e,"Hb",function(){return T}),n.d(e,"Ib",function(){return it}),n.d(e,"Jb",function(){return ut}),n.d(e,"Kb",function(){return jo}),n.d(e,"Lb",function(){return Po}),n.d(e,"Mb",function(){return Do}),n.d(e,"Nb",function(){return Ro}),n.d(e,"Ob",function(){return Mo}),n.d(e,"Pb",function(){return tn}),n.d(e,"Qb",function(){return ts}),n.d(e,"Rb",function(){return En}),n.d(e,"Sb",function(){return en}),n.d(e,"Tb",function(){return za}),n.d(e,"Ub",function(){return Uo}),n.d(e,"Vb",function(){return Ba}),n.d(e,"Wb",function(){return Ho}),n.d(e,"Xb",function(){return ko}),n.d(e,"Yb",function(){return Ia}),n.d(e,"Zb",function(){return Ua}),n.d(e,"ac",function(){return Qt}),n.d(e,"bc",function(){return pr}),n.d(e,"cc",function(){return ot}),n.d(e,"dc",function(){return Ao}),n.d(e,"ec",function(){return Jo}),n.d(e,"fc",function(){return Zo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("7o/Q");function u(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class l extends a.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class h extends o.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.a.EMPTY)),t}refCount(){return u()(this)}}const f=(()=>{const t=h.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.a}function g(t){for(let e in t)if(t[e]===g)return e;throw Error("Could not find renamed property on target object.")}function y(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function m(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(m).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function v(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const b=g({__forward_ref__:g});function w(t){return t.__forward_ref__=w,t.toString=function(){return m(this())},t}function _(t){return E(t)?t():t}function E(t){return"function"==typeof t&&t.hasOwnProperty(b)&&t.__forward_ref__===w}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function T(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function S(t){return C(t,x)||C(t,j)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function I(t){return t&&(t.hasOwnProperty(A)||t.hasOwnProperty(k))?t[A]:null}const x=g({"\u0275prov":g}),A=g({"\u0275inj":g}),j=g({ngInjectableDef:g}),k=g({ngInjectorDef:g});var N=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let R;function D(t){const e=R;return R=t,e}function P(t,e,n){const r=S(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&N.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${m(t)}]`)}function M(t){return{toString:t}.toString()}var L=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),V=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,q="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,B="undefined"!=typeof global&&global,H=F||B||U||q,z={},G=[],K=g({"\u0275cmp":g}),$=g({"\u0275dir":g}),W=g({"\u0275pipe":g}),Q=g({"\u0275mod":g}),Y=g({"\u0275loc":g}),X=g({"\u0275fac":g}),J=g({__NG_ELEMENT_ID__:g});let Z=0;function tt(t){return M(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||V.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Z++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(nt):null,n})}function et(t){return ct(t)||function(t){return t[$]||null}(t)}function nt(t){return function(t){return t[W]||null}(t)}const rt={};function it(t){const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&M(()=>{rt[t.id]=t.type}),e}function ot(t,e){return M(()=>{const n=lt(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function st(t,e){if(null==t)return z;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const at=tt;function ut(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[K]||null}function lt(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${m(t)} does not have '\u0275mod' property.`);return n}const ht=20,ft=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function yt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function vt(t){return null!==t.template}function bt(t,e){return t.hasOwnProperty(X)?t[X]:null}class wt extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function _t(t){return"string"==typeof t?t:null==t?"":String(t)}function Et(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():_t(t)}function Ot(t,e){const n=e?` in ${e}`:"";throw new wt("201",`No provider for ${Et(t)} found${n}`)}class Tt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function St(){return Ct}function Ct(t){return t.type.prototype.ngOnChanges&&(t.setInput=xt),It}function It(){const t=At(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===z)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function xt(t,e,n,r){const i=At(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:z,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Tt(u&&u.currentValue,e,s===z),t[r]=e}function At(t){return t.__ngSimpleChanges__||null}let jt;function kt(t){jt=t}function Nt(t){return!!t.listen}St.ngInherit=!0;const Rt={createRenderer:(t,e)=>void 0!==jt?jt:"undefined"!=typeof document?document:void 0};function Dt(t){for(;Array.isArray(t);)t=t[0];return t}function Pt(t,e){return Dt(e[t])}function Mt(t,e){return Dt(e[t.index])}function Lt(t,e){return t.data[e]}function Vt(t,e){const n=e[t];return dt(n)?n:n[0]}function Ft(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ut(t){return 4==(4&t[2])}function qt(t){return 128==(128&t[2])}function Bt(t,e){return null==e?null:t[e]}function Ht(t){t[18]=0}function zt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Gt={lFrame:he(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Kt(){return Gt.bindingsEnabled}function $t(){return Gt.lFrame.lView}function Wt(){return Gt.lFrame.tView}function Qt(t){Gt.lFrame.contextLView=t}function Yt(){let t=Xt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Xt(){return Gt.lFrame.currentTNode}function Jt(t,e){const n=Gt.lFrame;n.currentTNode=t,n.isParent=e}function Zt(){return Gt.lFrame.isParent}function te(){return Gt.isInCheckNoChangesMode}function ee(t){Gt.isInCheckNoChangesMode=t}function ne(){return Gt.lFrame.bindingIndex++}function re(t,e){const n=Gt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ie(e)}function ie(t){Gt.lFrame.currentDirectiveIndex=t}function oe(){return Gt.lFrame.currentQueryIndex}function se(t){Gt.lFrame.currentQueryIndex=t}function ae(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ue(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=ae(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Gt.lFrame=le();return r.currentTNode=e,r.lView=t,!0}function ce(t){const e=le(),n=t[1];Gt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function le(){const t=Gt.lFrame,e=null===t?null:t.child;return null===e?he(t):e}function he(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function fe(){const t=Gt.lFrame;return Gt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const de=fe;function pe(){const t=fe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ge(){return Gt.lFrame.selectedIndex}function ye(t){Gt.lFrame.selectedIndex=t}function me(){const t=Gt.lFrame;return Lt(t.tView,t.selectedIndex)}function ve(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function be(t,e,n){Ee(t,e,3,n)}function we(t,e,n,r){(3&t[2])===n&&Ee(t,e,n,r)}function _e(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ee(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Oe(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Oe(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Te=-1;class Se{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ce(t,e,n){const r=Nt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];xe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ie(t){return 3===t||4===t||6===t}function xe(t){return 64===t.charCodeAt(0)}function Ae(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||je(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function je(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function ke(t){return t!==Te}function Ne(t){return 32767&t}function Re(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let De=!0;function Pe(t){const e=De;return De=t,e}let Me=0;function Le(t,e){const n=Fe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ve(r.data,t),Ve(e,null),Ve(r.blueprint,null));const i=Ue(t,e),o=t.injectorIndex;if(ke(i)){const t=Ne(i),n=Re(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ve(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Fe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ue(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Te;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Te}function qe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Me++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Be(t,e,n){if(n&N.Optional)return t;Ot(e,"NodeInjector")}function He(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],o=D(void 0);try{return i?i.get(e,r,n&N.Optional):P(e,r,n&N.Optional)}finally{D(o)}}return Be(r,e,n)}function ze(t,e,n,r=N.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(J)?t[J]:void 0;return"number"==typeof e?e>=0?255&e:Ke:e}(n);if("function"==typeof o){if(!ue(e,t,r))return r&N.Host?Be(i,n,r):He(e,n,r,i);try{const t=o();if(null!=t||r&N.Optional)return t;Ot(n)}finally{de()}}else if("number"==typeof o){let i=null,s=Fe(t,e),a=Te,u=r&N.Host?e[16][6]:null;for((-1===s||r&N.SkipSelf)&&(a=-1===s?Ue(t,e):e[s+8],a!==Te&&Xe(r,!1)?(i=e[1],s=Ne(a),e=Re(a,e)):s=-1);-1!==s;){const t=e[1];if(Ye(o,s,t.data)){const t=$e(s,e,n,i,r,u);if(t!==Ge)return t}a=e[s+8],a!==Te&&Xe(r,e[1].data[s+8]===u)&&Ye(o,s,e)?(i=t,s=Ne(a),e=Re(a,e)):s=-1}}}return He(e,n,r,i)}const Ge={};function Ke(){return new Je(Yt(),$t())}function $e(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=We(a,s,n,null==r?yt(a)&&De:r!=s&&0!=(3&a.type),i&N.Host&&o===a);return null!==u?Qe(e,s,u,a):Ge}function We(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&vt(t)&&t.type===n)return u}return null}function Qe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Se){const s=i;s.resolving&&function(t,e){throw new wt("200",`Circular dependency in DI detected for ${t}`)}(Et(o[n]));const a=Pe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?D(s.injectImpl):null;ue(t,r,N.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ct(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&D(u),Pe(a),s.resolving=!1,de()}}return i}function Ye(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Xe(t,e){return!(t&N.Self||t&N.Host&&e)}class Je{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return ze(this._tNode,this._lView,t,void 0,e)}}function Ze(t){const e=t;if(E(t))return()=>{const t=Ze(_(e));return t?t():null};let n=bt(e);if(null===n){const t=I(e);n=t&&t.factory}return n||null}function tn(t){return M(()=>{const e=t.prototype.constructor,n=e[X]||Ze(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[X]||Ze(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function en(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ie(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Yt(),t)}const nn="__parameters__";function rn(t,e,n){return M(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(nn)?t[nn]:Object.defineProperty(t,nn,{value:[]})[nn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class on{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=O({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const sn=new on("AnalyzeForEntryComponents"),an=Function;function un(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),un(r,e)):e!==t&&e.push(r)}return e}function cn(t,e){t.forEach(t=>Array.isArray(t)?cn(t,e):e(t))}function ln(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function hn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function fn(t,e,n){let r=pn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function dn(t,e){const n=pn(t,e);if(n>=0)return t[1|n]}function pn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const gn={},yn=/\n/gm,mn="__source",vn=g({provide:String,useValue:g});let bn;function wn(t){const e=bn;return bn=t,e}function _n(t,e=N.Default){if(void 0===bn)throw new Error("inject() must be called from an injection context");return null===bn?P(t,void 0,e):bn.get(t,e&N.Optional?null:void 0,e)}function En(t,e=N.Default){return(R||_n)(_(t),e)}function On(t){const e=[];for(let n=0;n<t.length;n++){const r=_(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(En(t,n))}else e.push(En(r))}return e}function Tn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Sn=Tn(rn("Inject",t=>({token:t})),-1),Cn=Tn(rn("Optional"),8),In=Tn(rn("SkipSelf"),4);let xn;function An(t){var e;return(null===(e=function(){if(void 0===xn&&(xn=null,H.trustedTypes))try{xn=H.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return xn}())||void 0===e?void 0:e.createHTML(t))||t}class jn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class kn extends jn{getTypeName(){return"HTML"}}class Nn extends jn{getTypeName(){return"Style"}}class Rn extends jn{getTypeName(){return"Script"}}class Dn extends jn{getTypeName(){return"URL"}}class Pn extends jn{getTypeName(){return"ResourceURL"}}function Mn(t){return t instanceof jn?t.changingThisBreaksApplicationSecurity:t}function Ln(t,e){const n=Vn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Vn(t){return t instanceof jn&&t.getTypeName()||null}function Fn(t){return new kn(t)}function Un(t){return new Nn(t)}function qn(t){return new Rn(t)}function Bn(t){return new Dn(t)}function Hn(t){return new Pn(t)}class zn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(An(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Gn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=An(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=An(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Kn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$n=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wn(t){return(t=String(t)).match(Kn)||t.match($n)?t:"unsafe:"+t}function Qn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Yn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Xn=Qn("area,br,col,hr,img,wbr"),Jn=Qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zn=Qn("rp,rt"),tr=Yn(Zn,Jn),er=Yn(Xn,Yn(Jn,Qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yn(Zn,Qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tr),nr=Qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rr=Qn("srcset"),ir=Yn(nr,rr,Qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),or=Qn("script,style,template");class sr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!er.hasOwnProperty(e))return this.sanitizedSomething=!0,!or.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!ir.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;nr[o]&&(s=Wn(s)),rr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Wn(t.trim())).join(", ")),this.buf.push(" ",e,'="',cr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();er.hasOwnProperty(e)&&!Xn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(cr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ar=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ur=/([^\#-~ |!])/g;function cr(t){return t.replace(/&/g,"&amp;").replace(ar,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ur,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let lr;function hr(t,e){let n=null;try{lr=lr||function(t){const e=new Gn(t);return function(){try{return!!(new window.DOMParser).parseFromString(An(""),"text/html")}catch(t){return!1}}()?new zn(e):e}(t);let r=e?String(e):"";n=lr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=lr.getInertBodyElement(r)}while(r!==o);return An((new sr).sanitizeChildren(fr(n)||n))}finally{if(n){const t=fr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function fr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var dr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function pr(t){const e=function(){const t=$t();return t&&t[12]}();return e?e.sanitize(dr.URL,t)||"":Ln(t,"URL")?Mn(t):Wn(_t(t))}function gr(t){return t.ngDebugContext}function yr(t){return t.ngOriginalError}function mr(t,...e){t.error(...e)}class vr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||mr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?gr(t)?gr(t):this._findContext(yr(t)):null}_findOriginalError(t){let e=yr(t);for(;e&&yr(e);)e=yr(e);return e}}function br(t,e){t.__ngContext__=e}const wr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(H))();function _r(t){return t instanceof Function?t():t}var Er=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Or(t,e){return(void 0)(t,e)}function Tr(t){const e=t[3];return pt(e)?e[3]:e}function Sr(t){return Ir(t[13])}function Cr(t){return Ir(t[4])}function Ir(t){for(;null!==t&&!pt(t);)t=t[4];return t}function xr(t,e,n,r,i){if(null!=r){let o,s=!1;pt(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=Dt(r);0===t&&null!==n?null==i?Pr(e,n,a):Dr(e,n,a,i||null,!0):1===t&&null!==n?Dr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Lr(t,e);r&&function(t,e,n,r){Nt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Dt(n)&&xr(e,t,r,o,i);for(let s=ft;s<n.length;s++){const i=n[s];Hr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Ar(t,e,n){return Nt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function jr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,zt(i,-1)),n.splice(r,1)}function kr(t,e){if(t.length<=ft)return;const n=ft+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&jr(o,r),e>0&&(t[n-1][4]=r[4]);const s=hn(t,ft+e);Hr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Nr(t,e){if(!(256&e[2])){const n=e[11];Nt(n)&&n.destroyNode&&Hr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Rr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&Rr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&Rr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Rr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Se)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Dt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Nt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&jr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Dr(t,e,n,r,i){Nt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Pr(t,e,n){Nt(t)?t.appendChild(e,n):e.appendChild(n)}function Mr(t,e,n,r,i){null!==r?Dr(t,e,n,r,i):Pr(t,e,n)}function Lr(t,e){return Nt(t)?t.parentNode(e):e.parentNode}function Vr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===V.None||e===V.Emulated)return null}return Mt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Mt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Mr(o,i,n[a],s,!1);else Mr(o,i,n,s,!1)}function Fr(t,e){if(null!==e){const n=e.type;if(3&n)return Mt(e,t);if(4&n)return qr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Fr(t,n);{const n=t[e.index];return pt(n)?qr(-1,n):Dt(n)}}if(32&n)return Or(e,t)()||Dt(t[e.index]);{const n=Ur(t,e);return null!==n?Array.isArray(n)?n[0]:Fr(Tr(t[16]),n):Fr(t,e.next)}}return null}function Ur(t,e){return null!==e?t[16][6].projection[e.projection]:null}function qr(t,e){const n=ft+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Fr(t,r)}return e[7]}function Br(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&br(Dt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Br(t,e,n.child,r,i,o,!1),xr(e,t,i,a,o);else if(32&u){const s=Or(n,r);let u;for(;u=s();)xr(e,t,i,u,o);xr(e,t,i,a,o)}else 16&u?zr(t,e,r,n,i,o):xr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Hr(t,e,n,r,i,o){Br(n,r,t.firstChild,e,i,o,!1)}function zr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)xr(e,t,i,a[u],o);else Br(t,e,a,s[3],i,o,!0)}function Gr(t,e,n){Nt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Kr(t,e,n){Nt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function $r(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Wr="ng-template";function Qr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==$r(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Yr(t){return 4===t.type&&t.value!==Wr}function Xr(t,e,n){return e===(4!==t.type||n?t.value:Wr)}function Jr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ie(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Xr(t,u,n)||""===u&&1===e.length){if(Zr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Qr(t.attrs,c,n)){if(Zr(r))return!1;s=!0}continue}const l=ti(8&r?"class":u,i,Yr(t),n);if(-1===l){if(Zr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==$r(e,c,0)||2&r&&c!==t){if(Zr(r))return!1;s=!0}}}}else{if(!s&&!Zr(r)&&!Zr(u))return!1;if(s&&Zr(u))continue;s=!1,r=u|1&r}}return Zr(r)||s}function Zr(t){return 0==(1&t)}function ti(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ei(t,e,n=!1){for(let r=0;r<e.length;r++)if(Jr(t,e[r],n))return!0;return!1}function ni(t,e){return t?":not("+e.trim()+")":e}function ri(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Zr(s)||(e+=ni(o,i),i=""),r=s,o=o||!Zr(r);n++}return""!==i&&(e+=ni(o,i)),e}const ii={};function oi(t){si(Wt(),$t(),ge()+t,te())}function si(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&be(e,r,n)}else{const r=t.preOrderHooks;null!==r&&we(e,r,0,n)}ye(n)}function ai(t,e){return t<<17|e<<2}function ui(t){return t>>17&32767}function ci(t){return 2|t}function li(t){return(131068&t)>>2}function hi(t,e){return-131069&t|e<<2}function fi(t){return 1|t}function di(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];se(i),n.contentQueries(2,e[o],o)}}}function pi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ht(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function gi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Xt(),s=Zt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Gt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Gt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Jt(o,!0),o}function yi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function mi(t,e,n){ce(e);try{const r=t.viewQuery;null!==r&&Ki(1,r,n);const i=t.template;null!==i&&wi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&di(t,e),t.staticViewQueries&&Ki(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)qi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,pe()}}function vi(t,e,n,r){const i=e[2];if(256==(256&i))return;ce(e);const o=te();try{Ht(e),Gt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&wi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&be(e,n,null)}else{const n=t.preOrderHooks;null!==n&&we(e,n,0,null),_e(e,0)}if(function(t){for(let e=Sr(t);null!==e;e=Cr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&zt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Sr(t);null!==e;e=Cr(e))for(let t=ft;t<e.length;t++){const n=e[t],r=n[1];qt(n)&&vi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&di(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&be(e,n)}else{const n=t.contentHooks;null!==n&&we(e,n,1),_e(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ye(~r);else{const i=r,o=n[++t],s=n[++t];re(o,i),s(2,e[i])}}}finally{ye(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Fi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ki(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&be(e,n)}else{const n=t.viewHooks;null!==n&&we(e,n,2),_e(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,zt(e[3],-1))}finally{pe()}}function bi(t,e,n,r){const i=e[10],o=!te(),s=Ut(e);try{o&&!s&&i.begin&&i.begin(),s&&mi(t,e,r),vi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function wi(t,e,n,r,i){const o=ge();try{ye(-1),2&r&&e.length>ht&&si(t,e,ht,te()),n(r,i)}finally{ye(o)}}function _i(t,e,n){Kt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Le(n,e),br(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=vt(r);o&&Pi(e,n,r);const u=Qe(e,t,a,n);br(u,e),null!==s&&Mi(0,a-i,u,r,0,s),o&&(Vt(n.index,e)[8]=u)}}(t,e,n,Mt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Gt.lFrame.currentDirectiveIndex;try{ye(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ie(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||ji(r,i)}}finally{ye(-1),ie(s)}}(t,e,n))}function Ei(t,e,n=Mt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Oi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ti(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ti(t,e,n,r,i,o,s,a,u,c){const l=ht+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ii);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Si(t,e,n,r){const i=Wi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Qi(t).push(r,i.length-1))}function Ci(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ii(t,e,n,r,i,o,s,a){const u=Mt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Xi(t,n,c,r,i),yt(e)&&function(t,e){const n=Vt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Nt(o)?o.setProperty(u,r,i):xe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function xi(t,e,n,r){let i=!1;if(Kt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ei(n,s.selectors,!1)&&(i||(i=[]),qe(Le(n,e),t,s.type),vt(s)?(ki(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ri(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=yi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ae(n.mergedAttrs,c.hostAttrs),Di(t,n,e,u,c),Ni(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Yr(e)?null:Li(n,i);o.push(c),s=Ci(n,u,s),a=Ci(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new wt("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ae(n.mergedAttrs,n.attrs),i}function Ai(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function ji(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ki(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ni(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vt(e)&&(n[""]=t)}}function Ri(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Di(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bt(i.type)),s=new Se(o,vt(i),null);t.blueprint[r]=s,n[r]=s,Ai(t,e,0,r,yi(t,n,i.hostVars,ii),i)}function Pi(t,e,n){const r=Mt(e,t),i=Oi(n),o=t[10],s=Bi(t,pi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Mi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Li(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Vi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Fi(t,e){const n=Vt(e,t);if(qt(n)){const t=n[1];80&n[2]?vi(t,n,t.template,n[8]):n[5]>0&&Ui(n)}}function Ui(t){for(let n=Sr(t);null!==n;n=Cr(n))for(let t=ft;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];vi(t,e,t.template,e[8])}else e[5]>0&&Ui(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Vt(e[n],t);qt(r)&&r[5]>0&&Ui(r)}}function qi(t,e){const n=Vt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),mi(r,n,n[8])}function Bi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Hi(t){for(;t;){t[2]|=64;const e=Tr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function zi(t,e,n){const r=e[10];r.begin&&r.begin();try{vi(t,e,t.template,n)}catch(i){throw Yi(e,i),i}finally{r.end&&r.end()}}function Gi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Ft(n),i=r[1];bi(i,r,i.template,n)}}(t[8])}function Ki(t,e,n){se(0),e(t,n)}const $i=(()=>Promise.resolve(null))();function Wi(t){return t[7]||(t[7]=[])}function Qi(t){return t.cleanup||(t.cleanup=[])}function Yi(t,e){const n=t[9],r=n?n.get(vr,null):null;r&&r.handleError(e)}function Xi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ji(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=v(i,t):2==o&&(r=v(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Zi=new on("INJECTOR",-1);class to{get(t,e=gn){if(e===gn){const e=new Error(`NullInjectorError: No provider for ${m(t)}!`);throw e.name="NullInjectorError",e}return e}}const eo=new on("Set Injector scope."),no={},ro={},io=[];let oo;function so(){return void 0===oo&&(oo=new to),oo}function ao(t,e=null,n=null,r){return new uo(t,n,e||so(),r)}class uo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&cn(e,n=>this.processProvider(n,t,e)),cn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Zi,ho(void 0,this));const o=this.records.get(eo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:m(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=gn,n=N.Default){this.assertNotDestroyed();const r=wn(this);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof on)&&S(t);e=n&&this.injectableDefInScope(n)?ho(co(t),no):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?so():this.parent).get(t,e=n&N.Optional&&e===gn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(m(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[mn]&&i.unshift(e[mn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=m(e);if(Array.isArray(e))i=e.map(m).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):m(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(yn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{wn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(m(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=_(t)))return!1;let r=I(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=I(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{cn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];cn(r,t=>this.processProvider(t,n,r||io))}}this.injectorDefTypes.add(o),this.records.set(o,ho(r.factory,no));const a=r.providers;if(null!=a&&!s){const e=t;cn(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=po(t=_(t))?t:_(t&&t.provide);const i=function(t,e,n){return fo(t)?ho(void 0,t.useValue):ho(lo(t),no)}(t);if(po(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ho(void 0,no,!0),e.factory=()=>On(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===no&&(e.value=ro,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function co(t){const e=S(t),n=null!==e?e.factory:bt(t);if(null!==n)return n;const r=I(t);if(null!==r)return r.factory;if(t instanceof on)throw new Error(`Token ${m(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${m(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[x]||t[j]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function lo(t,e,n){let r;if(po(t)){const e=_(t);return bt(e)||co(e)}if(fo(t))r=()=>_(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...On(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>En(_(t.useExisting));else{const e=_(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return bt(e)||co(e);r=()=>new e(...On(t.deps))}var i;return r}function ho(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function fo(t){return null!==t&&"object"==typeof t&&vn in t}function po(t){return"function"==typeof t}const go=function(t,e,n){return function(t,e=null,n=null,r){const i=ao(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let yo=(()=>{class t{static create(t,e){return Array.isArray(t)?go(t,e,""):go(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=gn,t.NULL=new to,t.\u0275prov=O({token:t,providedIn:"any",factory:()=>En(Zi)}),t.__NG_ELEMENT_ID__=-1,t})();function mo(t,e){ve(Ft(t)[1],Yt())}function vo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=bo(t.inputs),e.declaredInputs=bo(t.declaredInputs),e.outputs=bo(t.outputs);const n=i.hostBindings;n&&Eo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&wo(t,o),s&&_o(t,s),y(t.inputs,i.inputs),y(t.declaredInputs,i.declaredInputs),y(t.outputs,i.outputs),vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===vo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ae(i.hostAttrs,n=Ae(n,i.hostAttrs))}}(r)}function bo(t){return t===z?{}:t===G?[]:t}function wo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function _o(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Eo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Oo=null;function To(){if(!Oo){const t=H.Symbol;if(t&&t.iterator)Oo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Oo=n)}}}return Oo}function So(t){return!!Co(t)&&(Array.isArray(t)||!(t instanceof Map)&&To()in t)}function Co(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Io(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function xo(t,e,n,r){const i=$t();return Io(i,ne(),e)&&(Wt(),function(t,e,n,r,i,o){const s=Mt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Nt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?_t(o):s(o,r||"",i);Nt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(me(),i,t,e,n,r)),xo}function Ao(t,e,n,r,i,o,s,a){const u=$t(),c=Wt(),l=t+ht,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=gi(e,t,4,s||null,Bt(c,a));xi(e,n,l,Bt(c,u)),ve(e,l);const h=l.tViews=Ti(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Jt(h,!1);const f=u[11].createComment("");Vr(c,u,f,h),br(f,u),Bi(u,u[l]=Vi(f,u,f,h)),mt(h)&&_i(c,u,h),null!=s&&Ei(u,h,a)}function jo(t,e=N.Default){const n=$t();return null===n?En(t,e):ze(Yt(),n,_(t),e)}function ko(t,e,n){const r=$t();return Io(r,ne(),e)&&Ii(Wt(),me(),r,t,e,r[11],n,!1),ko}function No(t,e,n,r,i){const o=i?"class":"style";Xi(t,n,e.inputs[o],o,r)}function Ro(t,e,n,r){const i=$t(),o=Wt(),s=ht+t,a=i[11],u=i[s]=Ar(a,e,Gt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=gi(e,t,2,i,Bt(a,o));return xi(e,n,u,Bt(a,s)),null!==u.attrs&&Ji(u,u.attrs,!1),null!==u.mergedAttrs&&Ji(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Jt(c,!0);const l=c.mergedAttrs;null!==l&&Ce(a,u,l);const h=c.classes;null!==h&&Kr(a,u,h);const f=c.styles;null!==f&&Gr(a,u,f),64!=(64&c.flags)&&Vr(o,i,u,c),0===Gt.lFrame.elementDepthCount&&br(u,i),Gt.lFrame.elementDepthCount++,mt(c)&&(_i(o,i,c),function(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&Ei(i,c)}function Do(){let t=Yt();Zt()?Gt.lFrame.isParent=!1:(t=t.parent,Jt(t,!1));const e=t;Gt.lFrame.elementDepthCount--;const n=Wt();n.firstCreatePass&&(ve(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&No(n,e,$t(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&No(n,e,$t(),e.stylesWithoutHost,!1)}function Po(t,e,n,r){Ro(t,e,n,r),Do()}function Mo(){return $t()}function Lo(t){return!!t&&"function"==typeof t.then}function Vo(t){return!!t&&"function"==typeof t.subscribe}const Fo=Vo;function Uo(t,e,n=!1,r){const i=$t(),o=Wt(),s=Yt();return function(t,e,n,r,i,o,s=!1,a){const u=mt(r),c=t.firstCreatePass&&Qi(t),l=Wi(e);let h=!0;if(3&r.type){const f=Mt(r,e),d=a?a(f):z,p=d.target||f,g=l.length,y=a?t=>a(Dt(t[r.index])).target:r.index;if(Nt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Bo(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Bo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=Bo(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Uo}function qo(t,e,n){try{return!1!==e(n)}catch(r){return Yi(t,r),!1}}function Bo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Vt(t.index,e):e;0==(32&e[2])&&Hi(s);let a=qo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=qo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Ho(t=1){return function(t){return(Gt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Gt.lFrame.contextLView))[8]}(t)}const zo=[];function Go(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ui(o):li(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Ko(t[a],e)&&(u=!0,t[a+1]=r?fi(n):ci(n)),a=r?ui(n):li(n)}u&&(t[n+1]=r?ci(o):fi(o))}function Ko(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pn(t,e)>=0}function $o(t,e){return function(t,e,n,r){const i=$t(),o=Wt(),s=function(t){const e=Gt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ge()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Gt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Qo(n=Wo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Wo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==li(r))return t[ui(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Wo(null,t,e,n[1],r),n=Qo(n,e.attrs,r),function(t,e,n,r){t[ui(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Qo(r,t[o].hostAttrs,true);return Qo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ui(s),u=li(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||pn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ui(t[a+1]);t[r+1]=ai(e,a),0!==e&&(t[e+1]=hi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ai(a,0),0!==a&&(t[a+1]=hi(t[a+1],r)),a=r;else t[r+1]=ai(u,0),0===a?a=r:t[u+1]=hi(t[u+1],r),u=r;l&&(t[r+1]=ci(t[r+1])),Go(t,c,r,!0),Go(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&pn(o,e)>=0&&(n[r+1]=fi(n[r+1]))}(e,c,t,r),s=ai(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==ii&&Io(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Xo(1==(1&c)?Yo(u,e,n,i,li(c),s):void 0)||(Xo(o)||function(t){return 2==(2&t)}(c)&&(o=Yo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Nt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Pt(ge(),n),i,o))}(o,o.data[ge()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=m(Mn(t))),t}(e),true,s)}(t,e),$o}function Wo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Qo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Qo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),fn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Yo(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ii&&(l=c?zo:void 0);let h=c?dn(l,r):u===r?l:void 0;if(o&&!Xo(h)&&(h=dn(e,r)),Xo(h)&&(a=h,s))return a;const f=t[i+1];i=s?ui(f):li(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=dn(t,r))}return a}function Xo(t){return void 0!==t}function Jo(t,e=""){const n=$t(),r=Wt(),i=t+ht,o=r.firstCreatePass?gi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Nt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Vr(r,n,s,o),Jt(o,!1)}function Zo(t,e,n){const r=$t(),i=function(t,e,n,r){return Io(t,ne(),n)?e+_t(n)+r:ii}(r,t,e,n);return i!==ii&&function(t,e,n){const r=Pt(e,t);!function(t,e,n){Nt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ge(),i),Zo}function ts(t,e,n){const r=$t();return Io(r,ne(),e)&&Ii(Wt(),me(),r,t,e,r[11],n,!0),ts}const es=void 0;var ns=["en",[["a","p"],["AM","PM"],es],[["AM","PM"],es,es],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],es,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],es,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",es,"{1} 'at' {0}",es],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let rs={};function is(t,e,n){"string"!=typeof e&&(n=e,e=t[cs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),rs[e]=t,n&&(rs[e][cs.ExtraData]=n)}function os(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=us(e);if(n)return n;const r=e.split("-")[0];if(n=us(r),n)return n;if("en"===r)return ns;throw new Error(`Missing locale data for the locale "${t}".`)}function ss(t){return os(t)[cs.CurrencyCode]||null}function as(t){return os(t)[cs.PluralCase]}function us(t){return t in rs||(rs[t]=H.ng&&H.ng.common&&H.ng.common.locales&&H.ng.common.locales[t]),rs[t]}var cs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ls="en-US";let hs=ls;function fs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(hs=t.toLowerCase().replace(/_/g,"-"))}function ds(t,e,n,r,i){if(t=_(t),Array.isArray(t))for(let o=0;o<t.length;o++)ds(t[o],e,n,r,i);else{const o=Wt(),s=$t();let a=po(t)?t:_(t.provide),u=lo(t);const c=Yt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(po(t)||!t.multi){const r=new Se(u,i,jo),d=ys(a,e,i?l:l+f,h);-1===d?(qe(Le(c,s),o,a),ps(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=ys(a,e,l+f,h),p=ys(a,e,l,l+f),g=d>=0&&n[d],y=p>=0&&n[p];if(i&&!y||!i&&!g){qe(Le(c,s),o,a);const l=function(t,e,n,r,i){const o=new Se(t,n,jo);return o.multi=[],o.index=e,o.componentProviders=0,gs(o,i,r&&!n),o}(i?vs:ms,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),ps(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else ps(o,t,d>-1?d:p,gs(n[i?p:d],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function ps(t,e,n,r){const i=po(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function gs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ys(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ms(t,e,n,r){return bs(this.multi,[])}function vs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Qe(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),bs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],bs(i,o);return o}function bs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ws(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Wt();if(r.firstCreatePass){const i=vt(t);ds(n,r.data,r.blueprint,i,!0),ds(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class _s{}class Es{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${m(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Os=(()=>{class t{}return t.NULL=new Es,t})();function Ts(...t){}function Ss(t,e){return new Is(Mt(t,e))}const Cs=function(){return Ss(Yt(),$t())};let Is=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Cs,t})();function xs(t){return t instanceof Is?t.nativeElement:t}class As{}let js=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ks(),t})();const ks=function(){const t=$t(),e=Vt(Yt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let Ns=(()=>{class t{}return t.\u0275prov=O({token:t,providedIn:"root",factory:()=>null}),t})();class Rs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ds=new Rs("11.2.0");class Ps{constructor(){}supports(t){return So(t)}create(t){return new Ls(t)}}const Ms=(t,e)=>e;class Ls{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ms}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<qs(n,r,i)?e:n,s=qs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!So(t))throw new Error(`Error trying to diff '${m(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[To()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Vs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Us),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Us),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Vs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Fs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Us{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Fs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Bs{constructor(){}supports(t){return t instanceof Map||Co(t)}create(){return new Hs}}class Hs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Co(t)))throw new Error(`Error trying to diff '${m(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new zs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class zs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Gs(){return new Ks([new Ps])}let Ks=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Gs()),deps:[[t,new In,new Cn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=O({token:t,providedIn:"root",factory:Gs}),t})();function $s(){return new Ws([new Bs])}let Ws=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||$s()),deps:[[t,new In,new Cn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=O({token:t,providedIn:"root",factory:$s}),t})();function Qs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Dt(o)),pt(o))for(let t=ft;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Qs(e[1],e,n,r)}const s=n.type;if(8&s)Qs(t,e,n.child,r);else if(32&s){const t=Or(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Ur(e,n);if(Array.isArray(t))r.push(...t);else{const n=Tr(e[16]);Qs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ys{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Qs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(kr(t,n),hn(e,n))}this._attachedToViewContainer=!1}Nr(this._lView[1],this._lView)}onDestroy(t){Si(this._lView[1],this._lView,null,t)}markForCheck(){Hi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){zi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){ee(!0);try{zi(t,e,n)}finally{ee(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Hr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Xs extends Ys{constructor(t){super(t),this._view=t}detectChanges(){Gi(this._view)}checkNoChanges(){!function(t){ee(!0);try{Gi(t)}finally{ee(!1)}}(this._view)}get context(){return null}}const Js=ta;let Zs=(()=>{class t{}return t.__NG_ELEMENT_ID__=Js,t.__ChangeDetectorRef__=!0,t})();function ta(t=!1){return function(t,e,n){if(!n&&yt(t)){const n=Vt(t.index,e);return new Ys(n,n)}return 47&t.type?new Ys(e[16],e):null}(Yt(),$t(),t)}const ea=[new Bs],na=new Ks([new Ps]),ra=new Ws(ea),ia=function(){return ua(Yt(),$t())};let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ia,t})();const sa=oa,aa=class extends sa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=pi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),mi(e,n,t),new Ys(n)}};function ua(t,e){return 4&t.type?new aa(e,t,Ss(t,e)):null}class ca{}class la{}const ha=function(){return ma(Yt(),$t())};let fa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ha,t})();const da=fa,pa=class extends da{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ss(this._hostTNode,this._hostLView)}get injector(){return new Je(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ue(this._hostTNode,this._hostLView);if(ke(t)){const e=Re(t,this._hostLView),n=Ne(t);return new Je(e[1].data[n+8],e)}return new Je(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ga(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ca,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new pa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ft+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ft?(e[4]=n[i],ln(n,ft+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=qr(i,o),a=n[11],u=Lr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Hr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),ln(ya(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ga(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=kr(this._lContainer,e);n&&(hn(ya(this._lContainer),e),Nr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=kr(this._lContainer,e);return n&&null!=hn(ya(this._lContainer),e)?new Ys(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ga(t){return t[8]}function ya(t){return t[8]||(t[8]=[])}function ma(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=Dt(r);else{const n=e[11];i=n.createComment("");const r=Mt(t,e);Dr(n,Lr(n,r),i,function(t,e){return Nt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Vi(r,e,i,t),Bi(e,n)}return new pa(n,t,e)}const va={};class ba extends Os{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new Ea(e,this.ngModule)}}function wa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const _a=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>wr});class Ea extends _s{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ri).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return wa(this.componentDef.inputs)}get outputs(){return wa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,va,i);return o!==va||r===va?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(As,Rt),s=i.get(Ns,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Nt(t))return t.selectRootElement(e,n===V.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ar(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:wr,clean:$i,playerHandler:null,flags:0},f=Ti(0,null,null,1,0,null,null,null,null,null),d=pi(null,f,h,l,null,null,o,a,s,i);let p,g;ce(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=gi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Ji(a,u,!0),null!==t&&(Ce(i,t,u),null!==a.classes&&Kr(i,t,a.classes),null!==a.styles&&Gr(i,t,a.styles)));const c=r.createRenderer(t,e),l=pi(n,Oi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(qe(Le(a,n),s,e.type),ki(s,a),Ri(a,n.length,1)),Bi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Ce(a,c,["ng-version",Ds.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Zr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ce(a,c,t),e&&e.length>0&&Kr(a,c,e.join(" "))}if(g=Lt(f,ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Yt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Di(t,r,e,yi(t,e,1,null),n));const i=Qe(e,t,r.directiveStart,r);br(i,e);const o=Mt(r,e);return o&&br(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Yt();e.contentQueries(1,s,t.directiveStart)}const a=Yt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ye(a.index),Ai(n[1],a,0,a.directiveStart,a.directiveEnd,e),ji(e,s)),s}(t,this.componentDef,d,h,[mo]),mi(f,d,null)}finally{pe()}return new Oa(this.componentType,p,Ss(g,d),d,g)}}class Oa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Xs(r),this.componentType=t}get injector(){return new Je(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ta=new Map;class Sa extends ca{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ba(this);const n=lt(t),r=t[Y]||null;r&&fs(r),this._bootstrapComponents=_r(n.bootstrap),this._r3Injector=ao(t,e,[{provide:ca,useValue:this},{provide:Os,useValue:this.componentFactoryResolver}],m(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=yo.THROW_IF_NOT_FOUND,n=N.Default){return t===yo||t===ca||t===Zi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ca extends la{constructor(t){super(),this.moduleType=t,null!==lt(t)&&function(t){const e=new Set;!function t(n){const r=lt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${m(e)} vs ${m(e.name)}`)}(i,Ta.get(i),n),Ta.set(i,n));const o=_r(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Sa(this.moduleType,t)}}function Ia(t,e,n){const r=function(){const t=Gt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=$t();return i[r]===ii?function(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}const xa=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Aa(){return this._results[To()]()}class ja{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=To(),n=ja.prototype;n[e]||(n[e]=Aa)}get changes(){return this._changes||(this._changes=new xa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=un(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ka{constructor(t){this.queryList=t,this.matches=null}clone(){return new ka(this.queryList)}setDirty(){this.queryList.setDirty()}}class Na{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Na(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ha(t,e).matches&&this.queries[e].setDirty()}}class Ra{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Da{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Da(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Pa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Pa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ma(e,i)),this.matchTNodeWithReadOption(t,e,We(e,t,i,!1,!1))}else n===oa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,We(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Is||r===fa||r===oa&&4&e.type)this.addMatch(e.index,-2);else{const n=We(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ma(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function La(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ss(t,e):4&t.type?ua(t,e):null}(e,t):-2===n?function(t,e,n){return n===Is?Ss(e,t):n===oa?ua(e,t):n===fa?ma(e,t):void 0}(t,e,r):Qe(t,t[1],n,e)}function Va(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:La(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Fa(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Va(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ft;t<s.length;t++){const e=s[t];e[17]===e[3]&&Fa(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Fa(n[1],n,i,r)}}}}}return r}function Ua(t){const e=$t(),n=Wt(),r=oe();se(r+1);const i=Ha(n,r);if(t.dirty&&Ut(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Fa(n,e,r,[]):Va(n,e,i,r);t.reset(o,xs),t.notifyOnChanges()}return!0}return!1}function qa(t,e,n,r){const i=Wt();if(i.firstCreatePass){const o=Yt();(function(t,e,n){null===t.queries&&(t.queries=new Da),t.queries.track(new Pa(e,n))})(i,new Ra(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new ja(4==(4&n));Si(t,e,r,r.destroy),null===e[19]&&(e[19]=new Na),e[19].queries.push(new ka(r))}(i,$t(),n)}function Ba(){return t=$t(),e=oe(),t[19].queries[e].queryList;var t,e}function Ha(t,e){return t.queries.getByIndex(e)}function za(t=N.Default){const e=ta(!0);if(null!=e||t&N.Optional)return e;Ot("ChangeDetectorRef")}const Ga=new on("Application Initializer");let Ka=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ts,this.reject=Ts,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Lo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(En(Ga,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const $a=new on("AppId"),Wa={provide:$a,useFactory:function(){return`${Qa()}${Qa()}${Qa()}`},deps:[]};function Qa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ya=new on("Platform Initializer"),Xa=new on("Platform ID"),Ja=new on("appBootstrapListener");let Za=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const tu=new on("LocaleId"),eu=new on("DefaultCurrencyCode");class nu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const ru=function(t){return new Ca(t)},iu=ru,ou=function(t){return Promise.resolve(ru(t))},su=function(t){const e=ru(t),n=_r(lt(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new Ea(n)),t},[]);return new nu(e,n)},au=su,uu=function(t){return Promise.resolve(su(t))};let cu=(()=>{class t{constructor(){this.compileModuleSync=iu,this.compileModuleAsync=ou,this.compileModuleAndAllComponentsSync=au,this.compileModuleAndAllComponentsAsync=uu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const lu=(()=>Promise.resolve(0))();function hu(t){"undefined"==typeof Zone?lu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class fu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xa(!1),this.onMicrotaskEmpty=new xa(!1),this.onStable=new xa(!1),this.onError=new xa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=H.requestAnimationFrame,e=H.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(H,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gu(t),pu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return yu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),mu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return yu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),mu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,gu(t),pu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(fu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,du,Ts,Ts);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const du={};function pu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function yu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mu(t){t._nesting--,pu(t)}class vu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xa,this.onMicrotaskEmpty=new xa,this.onStable=new xa,this.onError=new xa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let bu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fu.assertNotInAngularZone(),hu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(En(fu))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})(),wu=(()=>{class t{constructor(){this._applications=new Map,Tu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Tu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();class _u{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Eu(t){Tu=t}let Ou,Tu=new _u,Su=!0,Cu=!1;function Iu(){return Cu=!0,Su}function xu(){if(Cu)throw new Error("Cannot enable prod mode after platform setup.");Su=!1}const Au=new on("AllowMultipleToken");class ju{constructor(t,e){this.name=t,this.token=e}}function ku(t,e,n=[]){const r=`Platform: ${e}`,i=new on(r);return(e=[])=>{let o=Nu();if(!o||o.injector.get(Au,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:eo,useValue:"platform"});!function(t){if(Ou&&!Ou.destroyed&&!Ou.injector.get(Au,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ou=t.get(Ru);const e=t.get(Ya,null);e&&e.forEach(t=>t())}(yo.create({providers:t,name:r}))}return function(t){const e=Nu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Nu(){return Ou&&!Ou.destroyed?Ou:null}let Ru=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new vu:("zone.js"===t?void 0:t)||new fu({enableLongStackTrace:Iu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:fu,useValue:n}];return n.run(()=>{const e=yo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(vr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Mu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Lo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Ka);return t.runInitializers(),t.donePromise.then(()=>(fs(i.injector.get(tu,ls)||ls),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Du({},e);return function(t,e,n){const r=new Ca(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Pu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${m(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(En(yo))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Du(t,e){return Array.isArray(e)?e.reduce(Du,t):Object.assign(Object.assign({},t),e)}let Pu=(()=>{class t{constructor(t,e,n,r,i,a){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{fu.assertNotInAngularZone(),hu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{fu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(t=>{return u()((e=p,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,f);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof _s?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ca),i=n.create(yo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(bu,null),a=s&&i.injector.get(wu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Mu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),Iu()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Mu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ja,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(En(fu),En(Za),En(yo),En(vr),En(Os),En(Ka))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Mu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Lu{}class Vu{}const Fu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Uu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Fu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>qu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>qu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(En(cu),En(Vu,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function qu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Bu=function(t){return null},Hu=ku(null,"core",[{provide:Xa,useValue:"unknown"},{provide:Ru,deps:[yo]},{provide:wu,deps:[]},{provide:Za,deps:[]}]),zu=[{provide:Pu,useClass:Pu,deps:[fu,Za,yo,vr,Os,Ka]},{provide:_a,deps:[fu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ka,useClass:Ka,deps:[[new Cn,Ga]]},{provide:cu,useClass:cu,deps:[]},Wa,{provide:Ks,useFactory:function(){return na},deps:[]},{provide:Ws,useFactory:function(){return ra},deps:[]},{provide:tu,useFactory:function(t){return fs(t=t||"undefined"!=typeof $localize&&$localize.locale||ls),t},deps:[[new Sn(tu),new Cn,new In]]},{provide:eu,useValue:"USD"}];let Gu=(()=>{class t{constructor(t){}}return t.\u0275mod=it({type:t}),t.\u0275inj=T({factory:function(e){return new(e||t)(En(Pu))},providers:zu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return m}),n.d(e,"c",function(){return w}),n.d(e,"d",function(){return _}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return l}),n.d(e,"i",function(){return h}),n.d(e,"j",function(){return d}),n.d(e,"k",function(){return p}),n.d(e,"l",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return g});var r=n("mrSG");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function c(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g(){return a().indexOf("MSAppHost/")>=0}var y=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,m.prototype.create),o}return Object(r.c)(e,t),e}(Error),m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new y(i,a,r);return u},t}();function v(t,e){return t.replace(b,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _(t,e){var n=new E(t,e);return n.subscribe.bind(n)}var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=O),void 0===r.error&&(r.error=O),void 0===r.complete&&(r.complete=O);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function O(){}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return C}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return T}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),w=new u.P("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:_,deps:[v,u.A,[new u.B,b]]};let C=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({factory:function(e){return new(e||t)(u.Rb(u.C))},providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.e)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.f)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.f)(e,t)},createSubscribe:s.d,ErrorFactory:s.b,deepExtend:s.f}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.h)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.m)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Rb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=Object(r.Gb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Rb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Rb)(s).location;return new b(Object(r.Rb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(y),r.Rb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Gb)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new _(Object(r.Rb)(y),Object(r.Rb)(a))}function O(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.mb;class C{}let I=(()=>{class t extends C{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.v))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function x(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let j=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new k(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new k(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L),r.Kb(r.t))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class k{constructor(t,e){this.record=t,this.view=e}}let N=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new R,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){D("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){D("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class R{constructor(){this.$implicit=null,this.ngIf=null}}function D(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let P=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[{provide:C,useClass:I}]}),t})();function M(t){return"server"===t}let L=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new V(Object(r.Rb)(s),window)}),t})();class V{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=F(this.window.history)||F(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function F(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class U extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new U,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=B||(B=document.querySelector("base"),B)?B.getAttribute("href"):null;return null==e?null:(n=e,q||(q=document.createElement("a")),q.setAttribute("href",n),"/"===q.pathname.charAt(0)?q.pathname:"/"+q.pathname);var n}resetBaseElement(){B=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return x(document.cookie,t)}}let q,B=null;const H=new r.r("TRANSITION_ID"),z=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[H,s,r.s],multi:!0}];class G{static init(){Object(r.X)(new G)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const K=new r.r("EventManagerPlugins");let $=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(K),r.Rb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class W{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Q=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Y=(()=>{class t extends Q{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const X={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},J=/%COMP%/g;function Z(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Z(t,i,n):(i=i.replace(J,t),n.push(i))}return n}function tt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let et=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new nt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new rt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new it(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Z(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Rb($),r.Rb(Y),r.Rb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class nt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(X[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=X[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=X[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,tt(n)):this.eventManager.addEventListener(t,e,tt(n))}}class rt extends nt{constructor(t,e,n,r){super(t),this.component=n;const i=Z(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(J,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(J,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class it extends nt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Z(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ot=(()=>{class t extends W{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const st=["alt","control","meta","shift"],at={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ut={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ct={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let lt=(()=>{class t extends W{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(st.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ut.hasOwnProperty(e)&&(e=ut[e]))}return at[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),st.forEach(r=>{r!=n&&(0,ct[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const ht=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){U.makeCurrent(),G.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],ft=Object(r.S)(r.W,"browser",ht),dt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:K,useClass:ot,multi:!0,deps:[s,r.A,r.C]},{provide:K,useClass:lt,multi:!0,deps:[s]},[],{provide:et,useClass:et,deps:[$,Y,r.c]},{provide:r.F,useExisting:et},{provide:Q,useExisting:Y},{provide:Y,useClass:Y,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:$,useClass:$,deps:[K,r.A]},[]];let pt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:H,useExisting:r.c},z]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(t,12))},providers:dt,imports:[P,r.f]}),t})();"undefined"!=typeof window&&window;var gt=n("HDdC"),yt=n("DH7j"),mt=n("lJxs"),vt=n("XoHu"),bt=n("Cfvw");function wt(t,e){return new gt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(bt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const _t=new r.r("NgValueAccessor"),Et={provide:_t,useExisting:Object(r.U)(()=>Ot),multi:!0};let Ot=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.zb([Et])]}),t})();const Tt={provide:_t,useExisting:Object(r.U)(()=>Ct),multi:!0},St=new r.r("CompositionEventMode");let Ct=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(St,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([Tt])]}),t})();function It(t){return null==t||0===t.length}function xt(t){return null!=t&&"number"==typeof t.length}const At=new r.r("NgValidators"),jt=new r.r("NgAsyncValidators"),kt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Nt{static min(t){return e=>{if(It(e.value)||It(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(It(e.value)||It(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return It(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return It(t.value)||kt.test(t.value)?null:{email:!0}}static minLength(t){return e=>It(e.value)||!xt(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>xt(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Nt.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(It(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Rt);return 0==e.length?null:function(t){return Pt(Mt(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Rt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(yt.a)(e))return wt(e,null);if(Object(vt.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return wt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return wt(t=1===t.length&&Object(yt.a)(t[0])?t[0]:t,null).pipe(Object(mt.a)(t=>e(...t)))}return wt(t,null)}(Mt(t,e).map(Dt)).pipe(Object(mt.a)(Pt))}}}function Rt(t){return null!=t}function Dt(t){const e=Object(r.rb)(t)?Object(bt.a)(t):t;return Object(r.qb)(e),e}function Pt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Mt(t,e){return e.map(e=>e(t))}function Lt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Vt(t){return null!=t?Nt.compose(Lt(t)):null}function Ft(t){return null!=t?Nt.composeAsync(Lt(t)):null}function Ut(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let qt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Vt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ft(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),Bt=(()=>{class t extends qt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Ht(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const Ht=r.Pb(Bt);class zt extends qt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Gt=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(zt,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();const Kt={provide:_t,useExisting:Object(r.U)(()=>$t),multi:!0};let $t=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([Kt])]}),t})();const Wt={provide:_t,useExisting:Object(r.U)(()=>Yt),multi:!0};let Qt=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Yt=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(zt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(Qt),r.Kb(r.s))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.zb([Wt])]}),t})();const Xt={provide:_t,useExisting:Object(r.U)(()=>Jt),multi:!0};let Jt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([Xt])]}),t})();const Zt={provide:_t,useExisting:Object(r.U)(()=>te),multi:!0};let te=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([Zt])]}),t})();const ee={provide:_t,useExisting:Object(r.U)(()=>ne),multi:!0};let ne=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([ee])]}),t})();function re(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ie(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const oe=[Ot,Jt,$t,te,ne,Yt];function se(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ae="VALID",ue="INVALID",ce="PENDING",le="DISABLED";function he(t){return(ge(t)?t.validators:t)||null}function fe(t){return Array.isArray(t)?Vt(t):t||null}function de(t,e){return(ge(e)?e.asyncValidators:t)||null}function pe(t){return Array.isArray(t)?Ft(t):t||null}function ge(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class ye{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=fe(this._rawValidators),this._composedAsyncValidatorFn=pe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ae}get invalid(){return this.status===ue}get pending(){return this.status==ce}get disabled(){return this.status===le}get enabled(){return this.status!==le}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=fe(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=pe(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ce,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=le,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ae,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ae&&this.status!==ce||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?le:ae}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ce,this._hasOwnPendingAsyncValidator=!0;const e=Dt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof ve?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof be&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?le:this.errors?ue:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ce)?ce:this._anyControlsHaveStatus(ue)?ue:ae}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ge(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class me extends ye{constructor(t=null,e,n){super(he(e),de(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){se(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){se(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class ve extends ye{constructor(t,e,n){super(he(e),de(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof me?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class be extends ye{constructor(t,e,n){super(he(e),de(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof me?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const we={provide:zt,useExisting:Object(r.U)(()=>Ee)},_e=(()=>Promise.resolve(null))();let Ee=(()=>{class t extends zt{constructor(t,e,n,i){super(),this.control=new me,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{var e;t.constructor===Ct?n=t:(e=t,oe.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var t,e;(function(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Ut(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Ut(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);{const n=()=>t.updateValueAndValidity();re(e._rawValidators,n),re(e._rawAsyncValidators,n)}})(t=this.control,e=this),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ie(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ie(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){_e.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;_e.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Bt,9),r.Kb(At,10),r.Kb(jt,10),r.Kb(_t,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([we]),r.xb,r.yb]}),t})(),Oe=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})(),Te=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[Qt],imports:[Oe]}),t})();var Se=n("LRne"),Ce=n("5+tZ");function Ie(t,e){return Object(Ce.a)(t,e,1)}var xe=n("7o/Q");function Ae(t,e){return function(n){return n.lift(new je(t,e))}}class je{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ke(t,this.predicate,this.thisArg))}}class ke extends xe.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class Ne{}class Re{}class De{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof De?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new De;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof De?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Pe{encodeKey(t){return Me(t)}encodeValue(t){return Me(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Me(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Le{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Pe,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Le({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Ve(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Fe(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Ue(t){return"undefined"!=typeof FormData&&t instanceof FormData}class qe{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new De),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Le,this.urlWithParams=e}serializeBody(){return null===this.body?null:Ve(this.body)||Fe(this.body)||Ue(this.body)||"string"==typeof this.body?this.body:this.body instanceof Le?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ue(this.body)?null:Fe(this.body)?this.body.type||null:Ve(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Le?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new qe(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Be=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class He{constructor(t,e=200,n="OK"){this.headers=t.headers||new De,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class ze extends He{constructor(t={}){super(t),this.type=Be.ResponseHeader}clone(t={}){return new ze({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ge extends He{constructor(t={}){super(t),this.type=Be.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Ge({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ke extends He{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function $e(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let We=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof qe)r=t;else{let i,o;i=n.headers instanceof De?n.headers:new De(n.headers),n.params&&(o=n.params instanceof Le?n.params:new Le({fromObject:n.params})),r=new qe(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Se.a)(r).pipe(Ie(t=>this.handler.handle(t)));if(t instanceof qe||"events"===n.observe)return i;const o=i.pipe(Ae(t=>t instanceof Ge));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(mt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(mt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(mt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(mt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Le).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,$e(n,e))}post(t,e,n={}){return this.request("POST",t,$e(n,e))}put(t,e,n={}){return this.request("PUT",t,$e(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ne))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class Qe{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Ye=new r.r("HTTP_INTERCEPTORS");let Xe=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Je=/^\)\]\}',?\n/;class Ze{}let tn=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),en=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new gt.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new De(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new ze({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Je,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Ge({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Ke({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Ke({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:Be.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:Be.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:Be.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ze))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const nn=new r.r("XSRF_COOKIE_NAME"),rn=new r.r("XSRF_HEADER_NAME");class on{}let sn=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=x(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s),r.Rb(r.C),r.Rb(nn))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),an=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(on),r.Rb(rn))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),un=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Ye,[]);this.chain=t.reduceRight((t,e)=>new Qe(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Re),r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),cn=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:an,useClass:Xe}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:nn,useValue:e.cookieName}:[],e.headerName?{provide:rn,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[an,{provide:Ye,useExisting:an,multi:!0},{provide:on,useClass:sn},{provide:nn,useValue:"XSRF-TOKEN"},{provide:rn,useValue:"X-XSRF-TOKEN"}]}),t})(),ln=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[We,{provide:Ne,useClass:un},en,{provide:Re,useExisting:en},tn,{provide:Ze,useExisting:tn}],imports:[[cn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var hn=n("XNiG"),fn=n("9ppp");class dn extends hn.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new fn.a;return this._value}next(t){super.next(this._value=t)}}var pn=n("z+Ro");class gn extends xe.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class yn extends xe.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var mn=n("SeVD");function vn(t,e,n,r,i=new yn(t,n,r)){if(!i.closed)return e instanceof gt.a?e.subscribe(i):Object(mn.a)(e)(i)}var bn=n("yCtX");const wn={};class _n{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new En(t,this.resultSelector))}}class En extends gn{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(wn),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(vn(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===wn?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const On=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Tn=n("bHdf");function Sn(...t){return Object(Tn.a)(1)(Object(Se.a)(...t))}var Cn=n("EY2u");function In(t){return new gt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(bt.a)(n):Object(Cn.b)()).subscribe(e)})}var xn=n("zx2A");function An(t,e){return"function"==typeof e?n=>n.pipe(An((n,r)=>Object(bt.a)(t(n,r)).pipe(Object(mt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new jn(t))}class jn{constructor(t){this.project=t}call(t,e){return e.subscribe(new kn(t,this.project))}}class kn extends xn.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new xn.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(xn.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Nn=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Rn(t){return e=>0===t?Object(Cn.b)():e.lift(new Dn(t))}class Dn{constructor(t){if(this.total=t,this.total<0)throw new Nn}call(t,e){return e.subscribe(new Pn(t,this.total))}}class Pn extends xe.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Mn(...t){const e=t[t.length-1];return Object(pn.a)(e)?(t.pop(),n=>Sn(t,n,e)):e=>Sn(t,e)}function Ln(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Vn(t,e,n))}}class Vn{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Fn(t,this.accumulator,this.seed,this.hasSeed))}}class Fn extends xe.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Un(t){return function(e){const n=new qn(t),r=e.lift(n);return n.caught=r}}class qn{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Bn(t,this.selector,this.caught))}}class Bn extends xn.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new xn.a(this);this.add(r);const i=Object(xn.c)(n,r);i!==r&&this.add(i)}}}function Hn(t){return function(e){return 0===t?Object(Cn.b)():e.lift(new zn(t))}}class zn{constructor(t){if(this.total=t,this.total<0)throw new Nn}call(t,e){return e.subscribe(new Gn(t,this.total))}}class Gn extends xe.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Kn(t=Qn){return e=>e.lift(new $n(t))}class $n{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Wn(t,this.errorFactory))}}class Wn extends xe.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(xw){t=xw}this.destination.error(t)}}}function Qn(){return new On}function Yn(t=null){return e=>e.lift(new Xn(t))}class Xn{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Jn(t,this.defaultValue))}}class Jn extends xe.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Zn=n("SpAZ");function tr(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ae((e,n)=>t(e,n,r)):Zn.a,Rn(1),n?Yn(e):Kn(()=>new On))}var er=n("vkgz"),nr=n("quSY");class rr{constructor(t){this.callback=t}call(t,e){return e.subscribe(new ir(t,this.callback))}}class ir extends xe.a{constructor(t,e){super(t),this.add(new nr.a(e))}}class or{constructor(t,e){this.id=t,this.url=e}}class sr extends or{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ar extends or{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ur extends or{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class cr extends or{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lr extends or{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hr extends or{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fr extends or{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class dr extends or{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pr extends or{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class yr{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mr{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vr{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class br{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wr{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _r{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Er="primary";class Or{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Tr(t){return new Or(t)}function Sr(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Cr(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ir(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!xr(t[i],e[i]))return!1;return!0}function xr(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Ar(t){return Array.prototype.concat.apply([],t)}function jr(t){return t.length>0?t[t.length-1]:null}function kr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Nr(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(bt.a)(Promise.resolve(t)):Object(Se.a)(t)}function Rr(t,e,n){return n?function(t,e){return Ir(t,e)}(t.queryParams,e.queryParams)&&Dr(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>xr(t[n],e[n]))}(t.queryParams,e.queryParams)&&Pr(t.root,e.root)}function Dr(t,e){if(!Ur(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Dr(t.children[n],e.children[n]))return!1}return!0}function Pr(t,e){return Mr(t,e,e.segments)}function Mr(t,e,n){if(t.segments.length>n.length)return!!Ur(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Ur(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Pr(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Ur(t.segments,r)&&!!t.children.primary&&Mr(t.children.primary,e,i)}}class Lr{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tr(this.queryParams)),this._queryParamMap}toString(){return Hr.serialize(this)}}class Vr{constructor(t,e){this.segments=t,this.children=e,this.parent=null,kr(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zr(this)}}class Fr{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Tr(this.parameters)),this._parameterMap}toString(){return Xr(this)}}function Ur(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class qr{}class Br{parse(t){const e=new ni(t);return new Lr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Gr(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${$r(e)}=${$r(t)}`).join("&"):`${$r(e)}=${$r(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Hr=new Br;function zr(t){return t.segments.map(t=>Xr(t)).join("/")}function Gr(t,e){if(!t.hasChildren())return zr(t);if(e){const e=t.children.primary?Gr(t.children.primary,!1):"",n=[];return kr(t.children,(t,e)=>{e!==Er&&n.push(`${e}:${Gr(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return kr(t.children,(t,r)=>{r===Er&&(n=n.concat(e(t,r)))}),kr(t.children,(t,r)=>{r!==Er&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Er?[Gr(t.children.primary,!1)]:[`${n}:${Gr(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${zr(t)}/${e[0]}`:`${zr(t)}/(${e.join("//")})`}}function Kr(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $r(t){return Kr(t).replace(/%3B/gi,";")}function Wr(t){return Kr(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qr(t){return decodeURIComponent(t)}function Yr(t){return Qr(t.replace(/\+/g,"%20"))}function Xr(t){return`${Wr(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Wr(t)}=${Wr(e[t])}`).join("")}`;var e}const Jr=/^[^\/()?;=#]+/;function Zr(t){const e=t.match(Jr);return e?e[0]:""}const ti=/^[^=?&#]+/,ei=/^[^?&#]+/;class ni{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vr([],{}):new Vr([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Vr(t,e)),n}parseSegment(){const t=Zr(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Fr(Qr(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Zr(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Zr(this.remaining);t&&(n=t,this.capture(n))}t[Qr(e)]=Qr(n)}parseQueryParam(t){const e=function(t){const e=t.match(ti);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(ei);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Yr(e),i=Yr(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Zr(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Er);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Vr([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class ri{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ii(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=ii(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=oi(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return oi(t,this._root).map(t=>t.value)}}function ii(t,e){if(t===e.value)return e;for(const n of e.children){const e=ii(t,n);if(e)return e}return null}function oi(t,e){if(t===e.value)return[e];for(const n of e.children){const r=oi(t,n);if(r.length)return r.unshift(e),r}return[]}class si{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ai(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class ui extends ri{constructor(t,e){super(t),this.snapshot=e,pi(this,t)}toString(){return this.snapshot.toString()}}function ci(t,e){const n=function(t,e){const n=new fi([],{},{},"",{},Er,e,null,t.root,-1,{});return new di("",new si(n,[]))}(t,e),r=new dn([new Fr("",{})]),i=new dn({}),o=new dn({}),s=new dn({}),a=new dn(""),u=new li(r,i,s,a,o,Er,e,n.root);return u.snapshot=n.root,new ui(new si(u,[]),n)}class li{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(mt.a)(t=>Tr(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(mt.a)(t=>Tr(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hi(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class fi{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Tr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class di extends ri{constructor(t,e){super(e),this.url=t,pi(this,e)}toString(){return gi(this._root)}}function pi(t,e){e.value._routerState=t,e.children.forEach(e=>pi(t,e))}function gi(t){const e=t.children.length>0?` { ${t.children.map(gi).join(", ")} } `:"";return`${t.value}${e}`}function yi(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ir(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ir(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ir(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ir(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function mi(t,e){return Ir(t.params,e.params)&&function(t,e){return Ur(t,e)&&t.every((t,n)=>Ir(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||mi(t.parent,e.parent))}function vi(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return vi(t,e,r);return vi(t,e)})}(t,e,n);return new si(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return bi(e,t),t}{const n=new li(new dn((r=e.value).url),new dn(r.params),new dn(r.queryParams),new dn(r.fragment),new dn(r.data),r.outlet,r.component,r),i=e.children.map(e=>vi(t,e));return new si(n,i)}}var r}function bi(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)bi(t.children[n],e.children[n])}function wi(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function _i(t){return"object"==typeof t&&null!=t&&t.outlets}function Ei(t,e,n,r,i){let o={};return r&&kr(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Lr(n.root===t?e:Oi(n.root,t,e),o,i)}function Oi(t,e,n){const r={};return kr(t.children,(t,i)=>{r[i]=t===e?n:Oi(t,e,n)}),new Vr(t.segments,r)}class Ti{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&wi(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(_i);if(r&&r!==jr(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Si{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Ci(t,e,n){if(t||(t=new Vr([],{})),0===t.segments.length&&t.hasChildren())return Ii(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(_i(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!ki(a,u,e))return o;r+=2}else{if(!ki(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Vr(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Vr(t.segments.slice(r.pathIndex),t.children),Ii(e,0,i)}return r.match&&0===i.length?new Vr(t.segments,{}):r.match&&!t.hasChildren()?xi(t,e,n):r.match?Ii(t,0,i):xi(t,e,n)}function Ii(t,e,n){if(0===n.length)return new Vr(t.segments,{});{const r=function(t){return _i(t[0])?t[0].outlets:{[Er]:t}}(n),i={};return kr(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Ci(t.children[r],e,n))}),kr(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Vr(t.segments,i)}}function xi(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(_i(o)){const t=Ai(o.outlets);return new Vr(r,t)}if(0===i&&wi(n[0])){r.push(new Fr(t.segments[e].path,ji(n[0]))),i++;continue}const s=_i(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&wi(a)?(r.push(new Fr(s,ji(a))),i+=2):(r.push(new Fr(s,{})),i++)}return new Vr(r,{})}function Ai(t){const e={};return kr(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=xi(new Vr([],{}),0,t))}),e}function ji(t){const e={};return kr(t,(t,n)=>e[n]=`${t}`),e}function ki(t,e,n){return t==n.path&&Ir(e,n.parameters)}class Ni{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),yi(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=ai(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),kr(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=ai(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=ai(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new wr(t.value.snapshot))}),t.children.length&&this.forwardEvent(new vr(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(yi(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Ri(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Ri(t){yi(t.value),t.children.forEach(Ri)}class Di{constructor(t,e){this.routes=t,this.module=e}}function Pi(t){return"function"==typeof t}function Mi(t){return t instanceof Lr}const Li=Symbol("INITIAL_VALUE");function Vi(){return An(t=>function(...t){let e,n;return Object(pn.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(yt.a)(t[0])&&(t=t[0]),Object(bn.a)(t,n).lift(new _n(e))}(t.map(t=>t.pipe(Rn(1),Mn(Li)))).pipe(Ln((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Li)return t;if(r===Li&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Mi(r))return r}return t},t)},Li),Ae(t=>t!==Li),Object(mt.a)(t=>Mi(t)?t:!0===t),Rn(1)))}let Fi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[Ro]},encapsulation:2}),t})();function Ui(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];qi(r,Bi(e,r))}}function qi(t,e){t.children&&Ui(t.children,e)}function Bi(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Hi(t){const e=t.children&&t.children.map(Hi),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Er&&(n.component=Fi),n}function zi(t){return t.outlet||Er}function Gi(t,e){const n=t.filter(t=>zi(t)===e);return n.push(...t.filter(t=>zi(t)!==e)),n}const Ki={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function $i(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Ki):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Cr)(n,t,e);if(!i)return Object.assign({},Ki);const o={};kr(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Wi(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Qi(t,e,n)&&zi(n)!==Er)}(t,n,r)){const i=new Vr(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&zi(o)!==Er){const n=new Vr([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[zi(o)]=n}return i}(t,e,r,new Vr(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Qi(t,e,n))}(t,n,r)){const o=new Vr(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Qi(t,n,a)&&!i[zi(a)]){const n=new Vr([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[zi(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Vr(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Qi(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Yi(t,e,n,r){return!!(zi(t)===r||r!==Er&&Qi(e,n,t))&&("**"===t.path||$i(e,t,n).matched)}function Xi(t,e,n){return 0===e.length&&!t.children[n]}class Ji{constructor(t){this.segmentGroup=t||null}}class Zi{constructor(t){this.urlTree=t}}function to(t){return new gt.a(e=>e.error(new Ji(t)))}function eo(t){return new gt.a(e=>e.error(new Zi(t)))}function no(t){return new gt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class ro{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Wi(this.urlTree.root,[],[],this.config).segmentGroup,e=new Vr(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Er).pipe(Object(mt.a)(t=>this.createUrlTree(io(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Un(t=>{if(t instanceof Zi)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Ji)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Er).pipe(Object(mt.a)(e=>this.createUrlTree(io(e),t.queryParams,t.fragment))).pipe(Un(t=>{if(t instanceof Ji)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Vr([],{[Er]:t}):t;return new Lr(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(mt.a)(t=>new Vr([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(bt.a)(r).pipe(Ie(r=>{const i=n.children[r],o=Gi(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(mt.a)(t=>({segment:t,outlet:r})))}),Ln((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ae((e,n)=>t(e,n,r)):Zn.a,Hn(1),n?Yn(e):Kn(()=>new On))}())}expandSegment(t,e,n,r,i,o){return Object(bt.a)(n).pipe(Ie(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Un(t=>{if(t instanceof Ji)return Object(Se.a)(null);throw t}))),tr(t=>!!t),Un((t,n)=>{if(t instanceof On||"EmptyError"===t.name){if(Xi(e,r,i))return Object(Se.a)(new Vr([],{}));throw new Ji(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Yi(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):to(e):to(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?eo(i):this.lineralizeSegments(n,i).pipe(Object(Ce.a)(n=>{const i=new Vr(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=$i(e,r,i);if(!s)return to(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?eo(l):this.lineralizeSegments(r,l).pipe(Object(Ce.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(mt.a)(t=>(n._loadedConfig=t,new Vr(r,{})))):Object(Se.a)(new Vr(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=$i(e,n,r);if(!o)return to(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Ce.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Wi(e,s,u,o),l=new Vr(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(mt.a)(t=>new Vr(s,t)));if(0===o.length&&0===c.length)return Object(Se.a)(new Vr(s,{}));const h=zi(n)===i;return this.expandSegment(r,l,o,c,h?Er:i,!0).pipe(Object(mt.a)(t=>new Vr(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Se.a)(new Di(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Se.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Ce.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(mt.a)(t=>(e._loadedConfig=t,t))):function(t){return new gt.a(e=>e.error(Sr(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Se.a)(new Di([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Se.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Pi(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Pi(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Nr(o)});return Object(Se.a)(i).pipe(Vi(),Object(er.a)(t=>{if(!Mi(t))return;const e=Sr(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(mt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Se.a)(n);if(r.numberOfChildren>1||!r.children.primary)return no(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Lr(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return kr(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return kr(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Vr(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function io(t){const e={};for(const n of Object.keys(t.children)){const r=io(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Vr(t.segments.concat(e.segments),e.children)}return t}(new Vr(t.segments,e))}class oo{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class so{constructor(t,e){this.component=t,this.route=e}}function ao(t,e,n){const r=t._root;return co(r,e?e._root:null,n,[r.value])}function uo(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function co(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ai(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ur(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ur(t.url,e.url)||!Ir(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mi(t,e)||!Ir(t.queryParams,e.queryParams);case"paramsChange":default:return!mi(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new oo(r)):(o.data=s.data,o._resolvedData=s._resolvedData),co(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new so(a.outlet.component,s))}else s&&lo(e,a,i),i.canActivateChecks.push(new oo(r)),co(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),kr(o,(t,e)=>lo(t,n.getContext(e),i)),i}function lo(t,e,n){const r=ai(t),i=t.value;kr(r,(t,r)=>{lo(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new so(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class ho{}function fo(t){return new gt.a(e=>e.error(t))}class po{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Wi(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Er);if(null===e)return null;const n=new fi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Er,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new si(n,e),i=new di(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=hi(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Gi(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!go(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Er?-1:e.value.outlet===Er?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Xi(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Yi(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?jr(n).parameters:{};i=new fi(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,vo(t),zi(t),t.component,t,yo(e),mo(e)+n.length,bo(t))}else{const r=$i(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new fi(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,vo(t),zi(t),t.component,t,yo(e),mo(e)+o.length,bo(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Wi(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new si(i,t)]}if(0===a.length&&0===c.length)return[new si(i,[])];const l=zi(t)===r,h=this.processSegment(a,u,c,l?Er:r);return null===h?null:[new si(i,h)]}}function go(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function yo(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function mo(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function vo(t){return t.data||{}}function bo(t){return t.resolve||{}}function wo(t){return An(e=>{const n=t(e);return n?Object(bt.a)(n).pipe(Object(mt.a)(()=>e)):Object(Se.a)(e)})}class _o extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Eo=new r.r("ROUTES");class Oo{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(mt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Di(Ar(i.injector.get(Eo,void 0,r.q.Self|r.q.Optional)).map(Hi),i)}))}loadModuleFactory(t){return"string"==typeof t?Object(bt.a)(this.loader.load(t)):Nr(t()).pipe(Object(Ce.a)(t=>t instanceof r.w?Object(Se.a)(t):Object(bt.a)(this.compiler.compileModuleAsync(t))))}}class To{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new So,this.attachRef=null}}class So{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new To,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Co{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Io(t){throw t}function xo(t,e,n){return e.parse("/")}function Ao(t,e){return Object(Se.a)(null)}let jo=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new hn.a,this.errorHandler=Io,this.malformedUriErrorHandler=xo,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ao,afterPreactivation:Ao},this.urlHandlingStrategy=new Co,this.routeReuseStrategy=new _o,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Lr(new Vr([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Oo(s,a,t=>this.triggerEvent(new gr(t)),t=>this.triggerEvent(new yr(t))),this.routerState=ci(this.currentUrlTree,this.rootComponentType),this.transitions=new dn({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Ae(t=>0!==t.id),Object(mt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),An(t=>{let n=!1,r=!1;return Object(Se.a)(t).pipe(Object(er.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),An(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Se.a)(t).pipe(An(t=>{const n=this.transitions.getValue();return e.next(new sr(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Cn.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,An(t=>function(t,e,n,r,i){return new ro(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(mt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(er.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Ce.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new po(t,e,n,r,i,o).recognize();return null===s?fo(new ho):Object(Se.a)(s)}catch(xw){return fo(xw)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(mt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(er.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new lr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new sr(n,this.serializeUrl(r),i,o);e.next(a);const u=ci(r,this.rootComponentType).snapshot;return Object(Se.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Cn.a}),wo(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(er.a)(t=>{const e=new hr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(mt.a)(t=>Object.assign(Object.assign({},t),{guards:ao(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Ce.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Se.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(bt.a)(t).pipe(Object(Ce.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Se.a)(!0);const s=o.map(o=>{const s=uo(o,e,i);let a;if(function(t){return t&&Pi(t.canDeactivate)}(s))a=Nr(s.canDeactivate(t,e,n,r));else{if(!Pi(s))throw new Error("Invalid CanDeactivate guard");a=Nr(s(t,e,n,r))}return a.pipe(tr())});return Object(Se.a)(s).pipe(Vi())}(t.component,t.route,n,e,r)),tr(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Ce.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(bt.a)(e).pipe(Ie(e=>Sn(function(t,e){return null!==t&&e&&e(new mr(t)),Object(Se.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new br(t)),Object(Se.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>In(()=>{const i=e.guards.map(i=>{const o=uo(i,e.node,n);let s;if(function(t){return t&&Pi(t.canActivateChild)}(o))s=Nr(o.canActivateChild(r,t));else{if(!Pi(o))throw new Error("Invalid CanActivateChild guard");s=Nr(o(r,t))}return s.pipe(tr())});return Object(Se.a)(i).pipe(Vi())}));return Object(Se.a)(i).pipe(Vi())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Se.a)(!0);const i=r.map(r=>In(()=>{const i=uo(r,e,n);let o;if(function(t){return t&&Pi(t.canActivate)}(i))o=Nr(i.canActivate(e,t));else{if(!Pi(i))throw new Error("Invalid CanActivate guard");o=Nr(i(e,t))}return o.pipe(tr())}));return Object(Se.a)(i).pipe(Vi())}(t,e.route,n))),tr(t=>!0!==t,!0))}(r,o,t,e):Object(Se.a)(n)),Object(mt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(er.a)(t=>{if(Mi(t.guardsResult)){const e=Sr(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new fr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Ae(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new ur(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),wo(t=>{if(t.guards.canActivateChecks.length)return Object(Se.a)(t).pipe(Object(er.a)(t=>{const e=new dr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),An(t=>{let n=!1;return Object(Se.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Ce.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Se.a)(t);let o=0;return Object(bt.a)(n).pipe(Ie(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Se.a)({});const o={};return Object(bt.a)(i).pipe(Object(Ce.a)(i=>function(t,e,n,r){const i=uo(t,e,r);return Nr(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(er.a)(t=>{o[i]=t}))),Hn(1),Object(Ce.a)(()=>Object.keys(o).length===i.length?Object(Se.a)(o):Cn.a))}(t._resolve,t,e,r).pipe(Object(mt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),hi(t,n).resolve),null)))}(t.route,e,r,i)),Object(er.a)(()=>o++),Hn(1),Object(Ce.a)(e=>o===n.length?Object(Se.a)(t):Cn.a))})),Object(er.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new ur(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(er.a)(t=>{const e=new pr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),wo(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(mt.a)(t=>{const e=function(t,e,n){const r=vi(t,e._root,n?n._root:void 0);return new ui(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(er.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(mt.a)(t=>(new Ni(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(er.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new ur(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new rr(i))),Un(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Mi(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new ur(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new cr(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Yh){t.reject(Yh)}}var i;return Cn.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ui(t),this.config=t.map(Hi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Ei(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Ti(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return kr(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Ti(n,e,r)}(n);if(o.toRoot())return Ei(e.root,new Vr([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Si(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Si(t,t===e.root,0)}const r=wi(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Si(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Ii(s.segmentGroup,s.index,o.commands):Ci(s.segmentGroup,s.index,o.commands);return Ei(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Mi(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(xw){e=this.malformedUriErrorHandler(xw,this.urlSerializer,t)}return e}isActive(t,e){if(Mi(t))return Rr(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Rr(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new ar(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.N),r.Rb(qr),r.Rb(So),r.Rb(_),r.Rb(r.s),r.Rb(r.x),r.Rb(r.i),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),ko=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new hn.a,this.subscription=t.events.subscribe(t=>{t instanceof ar&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:No(this.skipLocationChange),replaceUrl:No(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:No(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(jo),r.Kb(li),r.Kb(y))},t.\u0275dir=r.Fb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Ub("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Qb("href",e.href,r.bc),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function No(t){return""===t||!!t}let Ro=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Er,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Do(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(So),r.Kb(r.Q),r.Kb(r.j),r.Sb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Do{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===li?this.route:t===So?this.childContexts:this.parent.get(t,e)}}class Po{}class Mo{preload(t,e){return Object(Se.a)(null)}}let Lo=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Oo(e,n,e=>t.triggerEvent(new gr(e)),e=>t.triggerEvent(new yr(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ae(t=>t instanceof ar),Ie(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(bt.a)(n).pipe(Object(Tn.a)(),Object(mt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(Ce.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(jo),r.Rb(r.x),r.Rb(r.i),r.Rb(r.s),r.Rb(Po))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Vo=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof sr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ar&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _r&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new _r(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(jo),r.Rb(L),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Fo=new r.r("ROUTER_CONFIGURATION"),Uo=new r.r("ROUTER_FORROOT_GUARD"),qo=[_,{provide:qr,useClass:Br},{provide:jo,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new jo(null,t,e,n,r,i,s,Ar(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[qr,So,_,r.s,r.x,r.i,Eo,Fo,[class{},new r.B],[class{},new r.B]]},So,{provide:li,useFactory:function(t){return t.routerState.root},deps:[jo]},{provide:r.x,useClass:r.K},Lo,Mo,class{preload(t,e){return e().pipe(Un(()=>Object(Se.a)(null)))}},{provide:Fo,useValue:{enableTracing:!1}}];function Bo(){return new r.z("Router",jo)}let Ho=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[qo,$o(e),{provide:Uo,useFactory:Ko,deps:[[jo,new r.B,new r.J]]},{provide:Fo,useValue:n||{}},{provide:y,useFactory:Go,deps:[a,[new r.p(v),new r.B],Fo]},{provide:Vo,useFactory:zo,deps:[jo,L,Fo]},{provide:Po,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Mo},{provide:r.z,multi:!0,useFactory:Bo},[Wo,{provide:r.d,multi:!0,useFactory:Qo,deps:[Wo]},{provide:Xo,useFactory:Yo,deps:[Wo]},{provide:r.b,multi:!0,useExisting:Xo}]]}}static forChild(e){return{ngModule:t,providers:[$o(e)]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(Uo,8),r.Rb(jo,8))}}),t})();function zo(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Vo(t,e,n)}function Go(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function Ko(t){return"guarded"}function $o(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Eo,multi:!0,useValue:t}]}let Wo=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new hn.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(jo),r=this.injector.get(Fo);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Se.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Fo),n=this.injector.get(Lo),i=this.injector.get(Vo),o=this.injector.get(jo),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function Qo(t){return t.appInitializer.bind(t)}function Yo(t){return t.bootstrapListener.bind(t)}const Xo=new r.r("Router Initializer"),Jo=function(){return["/first"]};let Zo=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-error"]],decls:6,vars:2,consts:[["role","main",1,"content"],[1,"card","highlight-card","card-small",2,"background-color","red"],[3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"span"),r.ec(3,"404"),r.Mb(),r.Mb(),r.Nb(4,"a",2),r.ec(5,"First"),r.Mb(),r.Mb()),2&t&&(r.Ab(4),r.Xb("routerLink",r.Yb(1,Jo)))},directives:[ko],styles:[""]}),t})();const ts={production:!0,custom:"This is real",serverUrl:"https://prf-node-hellow123.herokuapp.com/",firebase:{apiKey:"AIzaSyBBHxfLeKvlM6DwyMnNysn7g_0r7YwnZvo",authDomain:"prf-homework.firebaseapp.com",projectId:"prf-homework",storageBucket:"prf-homework.appspot.com",messagingSenderId:"905482988214",appId:"1:905482988214:web:743657c5442fb4086fd417"}};let es=(()=>{class t{constructor(t){this.http=t}greet(){return this.http.get(ts.serverUrl,{responseType:"text",withCredentials:!0})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(We))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ns=n("D0XW");function rs(){return t=>t.lift(new is)}class is{call(t,e){return e.subscribe(new os(t))}}class os extends xe.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class ss{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new as(t,this.compare,this.keySelector))}}class as extends xe.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var us=n("pxpQ"),cs=n("spgP"),ls=n("Jgta"),hs=n("zIRd"),fs=n("q/0M"),ds=n("qOnz"),ps=function(t,e){return(ps=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function gs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ys,ms="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},vs=vs||{},bs=ms||self;function ws(){}function _s(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Es(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Os="closure_uid_"+(1e9*Math.random()>>>0),Ts=0;function Ss(t,e,n){return t.call.apply(t.bind,arguments)}function Cs(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Is(t,e,n){return(Is=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ss:Cs).apply(null,arguments)}function xs(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function As(){return Date.now()}function js(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ks(){this.j=this.j,this.i=this.i}ks.prototype.j=!1,ks.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Os)&&t[Os]||(t[Os]=++Ts)}(this)},ks.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ns=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Rs=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ds(t){return Array.prototype.concat.apply([],arguments)}function Ps(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ms(t){return/^[\s\xa0]*$/.test(t)}var Ls,Vs=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Fs(t,e){return-1!=t.indexOf(e)}function Us(t,e){return t<e?-1:t>e?1:0}t:{var qs=bs.navigator;if(qs){var Bs=qs.userAgent;if(Bs){Ls=Bs;break t}}Ls=""}function Hs(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function zs(t){var e={};for(var n in t)e[n]=t[n];return e}var Gs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ks(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Gs.length;o++)n=Gs[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function $s(t){return $s[" "](t),t}$s[" "]=ws;var Ws,Qs,Ys=Fs(Ls,"Opera"),Xs=Fs(Ls,"Trident")||Fs(Ls,"MSIE"),Js=Fs(Ls,"Edge"),Zs=Js||Xs,ta=Fs(Ls,"Gecko")&&!(Fs(Ls.toLowerCase(),"webkit")&&!Fs(Ls,"Edge"))&&!(Fs(Ls,"Trident")||Fs(Ls,"MSIE"))&&!Fs(Ls,"Edge"),ea=Fs(Ls.toLowerCase(),"webkit")&&!Fs(Ls,"Edge");function na(){var t=bs.document;return t?t.documentMode:void 0}t:{var ra="",ia=(Qs=Ls,ta?/rv:([^\);]+)(\)|;)/.exec(Qs):Js?/Edge\/([\d\.]+)/.exec(Qs):Xs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Qs):ea?/WebKit\/(\S+)/.exec(Qs):Ys?/(?:Version)[ \/]?(\S+)/.exec(Qs):void 0);if(ia&&(ra=ia?ia[1]:""),Xs){var oa=na();if(null!=oa&&oa>parseFloat(ra)){Ws=String(oa);break t}}Ws=ra}var sa={};function aa(t){return function(t,e){var n=sa;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Vs(String(Ws)).split("."),r=Vs(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Us(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Us(0==s[2].length,0==a[2].length)||Us(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var ua=bs.document&&Xs&&(na()||parseInt(Ws,10))||void 0,ca=!Xs||9<=Number(ua),la=Xs&&!aa("9"),ha=function(){if(!bs.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{bs.addEventListener("test",ws,e),bs.removeEventListener("test",ws,e)}catch(n){}return t}();function fa(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function da(t,e){if(fa.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ta){t:{try{$s(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:pa[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}fa.prototype.b=function(){this.defaultPrevented=!0},js(da,fa);var pa={2:"touch",3:"pen",4:"mouse"};da.prototype.b=function(){da.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,la)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ga="closure_listenable_"+(1e6*Math.random()|0),ya=0;function ma(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ya,this.Y=this.Z=!1}function va(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ba(t){this.src=t,this.a={},this.b=0}function wa(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Ns(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(va(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function _a(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ba.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=_a(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ma(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ea="closure_lm_"+(1e6*Math.random()|0),Oa={};function Ta(t,e,n,r,i){if(r&&r.once)return Ca(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ta(t,e[o],n,r,i);return null}return n=Da(n),t&&t[ga]?t.va(e,n,Es(r)?!!r.capture:!!r,i):Sa(t,e,n,!1,r,i)}function Sa(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Es(i)?!!i.capture:!!i;if(s&&!ca)return null;var a=Na(t);if(a||(t[Ea]=a=new ba(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=ka,e=ca?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ha||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Aa(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ca(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ca(t,e[o],n,r,i);return null}return n=Da(n),t&&t[ga]?t.wa(e,n,Es(r)?!!r.capture:!!r,i):Sa(t,e,n,!0,r,i)}function Ia(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ia(t,e[o],n,r,i);else r=Es(r)?!!r.capture:!!r,n=Da(n),t&&t[ga]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=_a(o=t.a[e],n,r,i))&&(va(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Na(t))&&(e=t.a[e.toString()],t=-1,e&&(t=_a(e,n,r,i)),(n=-1<t?e[t]:null)&&xa(n))}function xa(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ga])wa(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Aa(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Na(e))?(wa(n,t),0==n.b&&(n.src=null,e[Ea]=null)):va(t)}}}function Aa(t){return t in Oa?Oa[t]:Oa[t]="on"+t}function ja(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&xa(t),n.call(r,e)}function ka(t,e){if(t.Y)return!0;if(!ca){if(!e)t:{e=["window","event"];for(var n=bs,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ja(t,e=new da(e,this))}return ja(t,new da(e,this))}function Na(t){return(t=t[Ea])instanceof ba?t:null}var Ra="__closure_events_fn_"+(1e9*Math.random()>>>0);function Da(t){return"function"==typeof t?t:(t[Ra]||(t[Ra]=function(e){return t.handleEvent(e)}),t[Ra])}function Pa(){ks.call(this),this.c=new ba(this),this.J=this,this.C=null}function Ma(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new fa(e,t);else if(e instanceof fa)e.target=e.target||t;else{var i=e;Ks(e=new fa(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=La(s,r,!0,e)&&i}if(i=La(s=e.a=t,r,!0,e)&&i,i=La(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=La(s=e.a=n[o],r,!1,e)&&i}function La(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&wa(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}js(Pa,ks),Pa.prototype[ga]=!0,(ys=Pa.prototype).addEventListener=function(t,e,n,r){Ta(this,t,e,n,r)},ys.removeEventListener=function(t,e,n,r){Ia(this,t,e,n,r)},ys.G=function(){if(Pa.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)va(n[r]);delete e.a[t],e.b--}}this.C=null},ys.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ys.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Va=bs.JSON.stringify;function Fa(){this.b=this.a=null}var Ua,qa=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Ha},function(t){t.reset()});function Ba(){var t=$a,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ha(){this.next=this.b=this.a=null}function za(t){bs.setTimeout(function(){throw t},0)}function Ga(t,e){Ua||function(){var t=bs.Promise.resolve(void 0);Ua=function(){t.then(Wa)}}(),Ka||(Ua(),Ka=!0),$a.add(t,e)}Fa.prototype.add=function(t,e){var n=qa.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ha.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ha.prototype.reset=function(){this.next=this.b=this.a=null};var Ka=!1,$a=new Fa;function Wa(){for(var t;t=Ba();){try{t.a.call(t.b)}catch(n){za(n)}var e=qa;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ka=!1}function Qa(t,e){Pa.call(this),this.b=t||1,this.a=e||bs,this.f=Is(this.Za,this),this.g=As()}function Ya(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Xa(t,e,n){if("function"==typeof t)n&&(t=Is(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Is(t.handleEvent,t)}return 2147483647<Number(e)?-1:bs.setTimeout(t,e||0)}function Ja(t){t.a=Xa(function(){t.a=null,t.c&&(t.c=!1,Ja(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}js(Qa,Pa),(ys=Qa.prototype).aa=!1,ys.M=null,ys.Za=function(){if(this.aa){var t=As()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ma(this,"tick"),this.aa&&(Ya(this),this.start()))}},ys.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=As())},ys.G=function(){Qa.X.G.call(this),Ya(this),delete this.a};var Za=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}ps(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ja(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(bs.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ks);function tu(t){ks.call(this),this.b=t,this.a={}}js(tu,ks);var eu=[];function nu(t,e,n,r){Array.isArray(n)||(n&&(eu[0]=n.toString()),n=eu);for(var i=0;i<n.length;i++){var o=Ta(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ru(t){Hs(t.a,function(t,e){this.a.hasOwnProperty(e)&&xa(t)},t),t.a={}}function iu(){this.a=!0}function ou(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Va(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}tu.prototype.G=function(){tu.X.G.call(this),ru(this)},tu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},iu.prototype.info=function(){};var su={},au=null;function uu(){return au=au||new Pa}function cu(t){fa.call(this,su.Fa,t)}function lu(t){var e=uu();Ma(e,new cu(e,t))}function hu(t,e){fa.call(this,su.STAT_EVENT,t),this.stat=e}function fu(t){var e=uu();Ma(e,new hu(e,t))}function du(t){fa.call(this,su.Ga,t)}function pu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return bs.setTimeout(function(){t()},e)}su.Fa="serverreachability",js(cu,fa),su.STAT_EVENT="statevent",js(hu,fa),su.Ga="timingevent",js(du,fa);var gu={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},yu={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function mu(){}function vu(){}mu.prototype.a=null;var bu,wu={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function _u(){fa.call(this,"d")}function Eu(){fa.call(this,"c")}function Ou(){}function Tu(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new tu(this),this.P=Su,this.R=new Qa(t=Zs?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}js(_u,fa),js(Eu,fa),js(Ou,mu),bu=new Ou;var Su=45e3,Cu={},Iu={};function xu(t,e,n){t.H=1,t.i=Yu(zu(e)),t.j=n,t.I=!0,Au(t,null)}function Au(t,e){t.u=As(),Nu(t),t.l=zu(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),cc(n.b,"t",r),t.D=0,t.a=rl(t.g,t.g.C?e:null),0<t.O&&(t.F=new Za(Is(t.Ca,t,t.a),t.O)),nu(t.J,t.a,"readystatechange",t.Xa),e=t.B?zs(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),lu(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function ju(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ku(t,n);if(i==Iu){4==e&&(t.h=4,fu(14),r=!1),ou(t.c,t.f,null,"[Incomplete Response]");break}if(i==Cu){t.h=4,fu(15),ou(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ou(t.c,t.f,i,null),Lu(t,i)}4==e&&0==n.length&&(t.h=1,fu(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qc(e),e.F=!0,fu(11))):(ou(t.c,t.f,n,"[Invalid Chunked Response]"),Mu(t),Pu(t))}function ku(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Iu:(n=Number(e.substring(n,r)),isNaN(n)?Cu:(r+=1)+n>e.length?Iu:(e=e.substr(r,n),t.D=r+n,e))}function Nu(t){t.T=As()+t.P,Ru(t,t.P)}function Ru(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=pu(Is(t.Va,t),e)}function Du(t){t.o&&(bs.clearTimeout(t.o),t.o=null)}function Pu(t){0==t.g.v||t.A||Jc(t.g,t)}function Mu(t){Du(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ya(t.R),ru(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Lu(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||yc(n.b,t)))if(n.I=t.N,!t.C&&yc(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(qb){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Xc(n),Uc(n)}Wc(n),fu(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=pu(Is(n.Sa,n),6e3));if(1>=gc(n.b)&&n.ea){try{n.ea()}catch(qb){}n.ea=void 0}}else tl(n,11)}else if((t.C||n.a==t)&&Xc(n),!Ms(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Fs(l,"spdy")||Fs(l,"quic")||Fs(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(mc(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Qu(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=As()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=nl(u,u.C?u.ga:null,u.fa),d.C){vc(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Du(p),Nu(p)),u.a=d}else $c(u);0<n.g.length&&Hc(n)}else"stop"!=i[0]&&"close"!=i[0]||tl(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?tl(n,7):Fc(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);lu(4)}catch(qb){}}function Vu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(_s(t)||"string"==typeof t)Rs(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(_s(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(_s(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Fu(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Fu)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Uu(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];qu(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)qu(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function qu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ys=Tu.prototype).setTimeout=function(t){this.P=t},ys.Xa=function(t){t=t.target;var e=this.F;e&&3==Pc(t)?e.f():this.Ca(t)},ys.Ca=function(t){try{if(t==this.a)t:{var e=Pc(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Zs&&!this.a.$())){this.A||4!=e||7==n||lu(8==n||0>=r?3:2),Du(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ms(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,fu(12),Mu(this),Pu(this);break t}ou(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Lu(this,u)}this.I?(ju(this,e,o),Zs&&this.b&&3==e&&(nu(this.J,this.R,"tick",this.Wa),this.R.start())):(ou(this.c,this.f,o,null),Lu(this,o)),4==e&&Mu(this),this.b&&!this.A&&(4==e?Jc(this.g,this):(this.b=!1,Nu(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,fu(12)):(this.h=0,fu(13)),Mu(this),Pu(this)}}}catch(c){}},ys.Wa=function(){if(this.a){var t=Pc(this.a),e=this.a.$();this.D<e.length&&(Du(this),ju(this,t,e),this.b&&4!=t&&Nu(this))}},ys.cancel=function(){this.A=!0,Mu(this)},ys.Va=function(){this.o=null;var t=As();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(lu(3),fu(17)),Mu(this),this.h=2,Pu(this)):Ru(this,this.T-t)},(ys=Fu.prototype).K=function(){Uu(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ys.L=function(){return Uu(this),this.a.concat()},ys.get=function(t,e){return qu(this.b,t)?this.b[t]:e},ys.set=function(t,e){qu(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ys.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Bu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Hu(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Hu){this.a=void 0!==e?e:t.a,Gu(this,t.f),this.j=t.j,Ku(this,t.c),$u(this,t.h),this.g=t.g,e=t.b;var n=new oc;n.c=e.c,e.a&&(n.a=new Fu(e.a),n.b=e.b),Wu(this,n),this.i=t.i}else t&&(n=String(t).match(Bu))?(this.a=!!e,Gu(this,n[1]||"",!0),this.j=Xu(n[2]||""),Ku(this,n[3]||"",!0),$u(this,n[4]),this.g=Xu(n[5]||"",!0),Wu(this,n[6]||"",!0),this.i=Xu(n[7]||"")):(this.a=!!e,this.b=new oc(null,this.a))}function zu(t){return new Hu(t)}function Gu(t,e,n){t.f=n?Xu(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ku(t,e,n){t.c=n?Xu(e,!0):e}function $u(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Wu(t,e,n){e instanceof oc?(t.b=e,function(t,e){e&&!t.f&&(sc(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ac(this,e),cc(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Ju(e,rc)),t.b=new oc(e,t.a))}function Qu(t,e,n){t.b.set(e,n)}function Yu(t){return Qu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^As()).toString(36)),t}function Xu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ju(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Zu),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Zu(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Hu.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ju(e,tc,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ju(e,tc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ju(n,"/"==n.charAt(0)?nc:ec,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ju(n,ic)),t.join("")};var tc=/[#\/\?@]/g,ec=/[#\?:]/g,nc=/[#\?]/g,rc=/[#\?@]/g,ic=/#/g;function oc(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function sc(t){t.a||(t.a=new Fu,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ac(t,e){sc(t),e=lc(t,e),qu(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,qu((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Uu(t)))}function uc(t,e){return sc(t),e=lc(t,e),qu(t.a.b,e)}function cc(t,e,n){ac(t,e),0<n.length&&(t.c=null,t.a.set(lc(t,e),Ps(n)),t.b+=n.length)}function lc(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ys=oc.prototype).add=function(t,e){sc(this),this.c=null,t=lc(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ys.forEach=function(t,e){sc(this),this.a.forEach(function(n,r){Rs(n,function(n){t.call(e,n,r,this)},this)},this)},ys.L=function(){sc(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ys.K=function(t){sc(this);var e=[];if("string"==typeof t)uc(this,t)&&(e=Ds(e,this.a.get(lc(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ds(e,t[n])}return e},ys.set=function(t,e){return sc(this),this.c=null,uc(this,t=lc(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ys.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ys.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var hc=function(){return function(t,e){this.b=t,this.a=e}}();function fc(t){this.g=t||dc,t=bs.PerformanceNavigationTiming?0<(t=bs.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(bs.ia&&bs.ia.ya&&bs.ia.ya()&&bs.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var dc=10;function pc(t){return!!t.b||!!t.a&&t.a.size>=t.f}function gc(t){return t.b?1:t.a?t.a.size:0}function yc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function mc(t,e){t.a?t.a.add(e):t.b=e}function vc(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function bc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=gs(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ps(t.c)}function wc(){}function _c(){this.a=new wc}function Ec(t,e,n){var r=n||"";try{Vu(t,function(t,n){var i=t;Es(t)&&(i=Va(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(xw){throw e.push(r+"type="+encodeURIComponent("_badmap")),xw}}function Oc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}fc.prototype.cancel=function(){var t,e;if(this.c=bc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=gs(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},wc.prototype.stringify=function(t){return bs.JSON.stringify(t,void 0)},wc.prototype.parse=function(t){return bs.JSON.parse(t,void 0)};var Tc=bs.JSON.parse;function Sc(t){Pa.call(this),this.headers=new Fu,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Cc,this.D=this.F=!1}js(Sc,Pa);var Cc="",Ic=/^https?$/i,xc=["POST","PUT"];function Ac(t){return"content-type"==t.toLowerCase()}function jc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,kc(t),Rc(t)}function kc(t){t.u||(t.u=!0,Ma(t,"complete"),Ma(t,"error"))}function Nc(t){if(t.b&&void 0!==vs&&(!t.s[1]||4!=Pc(t)||2!=t.W()))if(t.l&&4==Pc(t))Xa(t.za,0,t);else if(Ma(t,"readystatechange"),4==Pc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Bu)[1]||null;if(!o&&bs.self&&bs.self.location){var s=bs.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ic.test(o?o.toLowerCase():"")}e=i}if(e)Ma(t,"complete"),Ma(t,"success");else{t.h=6;try{var a=2<Pc(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",kc(t)}}finally{Rc(t)}}}function Rc(t,e){if(t.a){Dc(t);var n=t.a,r=t.s[0]?ws:null;t.a=null,t.s=null,e||Ma(t,"ready");try{n.onreadystatechange=r}catch(xw){}}}function Dc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(bs.clearTimeout(t.m),t.m=null)}function Pc(t){return t.a?t.a.readyState:0}function Mc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Hs(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Qu(t,e,n))}function Lc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Vc(t){this.pa=0,this.g=[],this.c=new iu,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Lc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Lc("baseRetryDelayMs",5e3,t),this.Ra=Lc("retryDelaySeedMs",1e4,t),this.Ma=Lc("forwardChannelMaxRetries",2,t),this.ma=Lc("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new fc(t&&t.concurrentRequestLimit),this.ka=new _c,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Fc(t){if(qc(t),3==t.v){var e=t.R++,n=zu(t.B);Qu(n,"SID",t.J),Qu(n,"RID",e),Qu(n,"TYPE","terminate"),Gc(t,n),(e=new Tu(t,t.c,e,void 0)).H=2,e.i=Yu(zu(n)),n=!1,bs.navigator&&bs.navigator.sendBeacon&&(n=bs.navigator.sendBeacon(e.i.toString(),"")),!n&&bs.Image&&((new Image).src=e.i,n=!0),n||(e.a=rl(e.g,null),e.a.ba(e.i)),e.u=As(),Nu(e)}el(t)}function Uc(t){t.a&&(Qc(t),t.a.cancel(),t.a=null)}function qc(t){Uc(t),t.j&&(bs.clearTimeout(t.j),t.j=null),Xc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&bs.clearTimeout(t.h),t.h=null)}function Bc(t,e){t.g.push(new hc(t.Oa++,e)),3==t.v&&Hc(t)}function Hc(t){pc(t.b)||t.h||(t.h=!0,Ga(t.Ba,t),t.u=0)}function zc(t,e){var n;n=e?e.f:t.R++;var r=zu(t.B);Qu(r,"SID",t.J),Qu(r,"RID",n),Qu(r,"AID",t.P),Gc(t,r),t.i&&t.l&&Mc(r,t.i,t.l),n=new Tu(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Kc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),mc(t.b,n),xu(n,r,e)}function Gc(t,e){t.f&&Vu({},function(t,n){Qu(e,n,t)})}function Kc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Is(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Ec(l,s,"req"+c+"_")}catch(Ml){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function $c(t){t.a||t.j||(t.T=1,Ga(t.Aa,t),t.o=0)}function Wc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=pu(Is(t.Aa,t),Zc(t,t.o)),t.o++,0))}function Qc(t){null!=t.s&&(bs.clearTimeout(t.s),t.s=null)}function Yc(t){t.a=new Tu(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=zu(t.la);Qu(e,"RID","rpc"),Qu(e,"SID",t.J),Qu(e,"CI",t.H?"0":"1"),Qu(e,"AID",t.P),Gc(t,e),Qu(e,"TYPE","xmlhttp"),t.i&&t.l&&Mc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Yu(zu(e)),n.j=null,n.I=!0,Au(n,t)}function Xc(t){null!=t.m&&(bs.clearTimeout(t.m),t.m=null)}function Jc(t,e){var n=null;if(t.a==e){Xc(t),Qc(t),t.a=null;var r=2}else{if(!yc(t.b,e))return;n=e.s,vc(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=As()-e.u;var i=t.u;Ma(r=uu(),new du(r,n,e,i)),Hc(t)}else $c(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(gc(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=pu(Is(t.Ba,t,e),Zc(t,t.u)),t.u++,0)))}(t,e)||2==r&&Wc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:tl(t,5);break;case 4:tl(t,10);break;case 3:tl(t,6);break;default:tl(t,2)}}function Zc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function tl(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Is(t.Ya,t);n||(n=new Hu("//www.google.com/images/cleardot.gif"),bs.location&&"http"==bs.location.protocol||Gu(n,"https"),Yu(n)),function(t,e){var n=new iu;if(bs.Image){var r=new Image;r.onload=xs(Oc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=xs(Oc,n,r,"TestLoadImage: error",!1,e),r.onabort=xs(Oc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=xs(Oc,n,r,"TestLoadImage: timeout",!1,e),bs.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else fu(2);t.v=0,t.f&&t.f.ra(e),el(t),qc(t)}function el(t){t.v=0,t.I=-1,t.f&&(0==bc(t.b).length&&0==t.g.length||(t.b.c.length=0,Ps(t.g),t.g.length=0),t.f.qa())}function nl(t,e,n){var r=function(t){return t instanceof Hu?zu(t):new Hu(t,void 0)}(n);if(""!=r.c)e&&Ku(r,e+"."+r.c),$u(r,r.h);else{var i=bs.location;r=function(t,e,n,r){var i=new Hu(null,void 0);return t&&Gu(i,t),e&&Ku(i,e),n&&$u(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Hs(t.V,function(t,e){Qu(r,e,t)}),n=t.na,(e=t.A)&&n&&Qu(r,e,n),Qu(r,"VER",t.ha),Gc(t,r),r}function rl(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sc(t.Na)).F=t.C,e}function il(){}function ol(){if(Xs&&!(10<=Number(ua)))throw Error("Environmental error: no available transport.")}function sl(t,e){Pa.call(this),this.a=new Vc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ms(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ms(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new cl(this)}function al(t){_u.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ul(){Eu.call(this),this.status=1}function cl(t){this.a=t}(ys=Sc.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:bu),this.a.onreadystatechange=Is(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void jc(this,o)}t=n||"";var i=new Fu(this.headers);r&&Vu(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Ac,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=bs.FormData&&t instanceof bs.FormData,!(0<=Ns(xc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Dc(this),0<this.o&&((this.D=function(t){return Xs&&aa(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Is(this.xa,this)):this.m=Xa(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){jc(this,o)}},ys.xa=function(){void 0!==vs&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ma(this,"timeout"),this.abort(8))},ys.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ma(this,"complete"),Ma(this,"abort"),Rc(this))},ys.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Rc(this,!0)),Sc.X.G.call(this)},ys.za=function(){this.j||(this.A||this.l||this.g?Nc(this):this.Ua())},ys.Ua=function(){Nc(this)},ys.W=function(){try{return 2<Pc(this)?this.a.status:-1}catch(Qs){return-1}},ys.$=function(){try{return this.a?this.a.responseText:""}catch(Qs){return""}},ys.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Tc(e)}},ys.ua=function(){return this.h},ys.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ys=Vc.prototype).ha=8,ys.v=1,ys.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Tu(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ks(r=zs(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Kc(this,n,e),Qu(i=zu(this.B),"RID",t),Qu(i,"CVER",22),this.A&&Qu(i,"X-HTTP-Session-Id",this.A),Gc(this,i),this.i&&r&&Mc(i,this.i,r),mc(this.b,n),this.Ia&&Qu(i,"TYPE","init"),this.da?(Qu(i,"$req",e),Qu(i,"SID","null"),n.U=!0,xu(n,i,null)):xu(n,i,e),this.v=2}}else 3==this.v&&(t?zc(this,t):0==this.g.length||pc(this.b)||zc(this))},ys.Aa=function(){if(this.j=null,Yc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=pu(Is(this.Ta,this),t)}},ys.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,fu(10),Uc(this),Yc(this))},ys.Sa=function(){null!=this.m&&(this.m=null,Uc(this),Wc(this),fu(19))},ys.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),fu(2)):(this.c.info("Failed to ping google.com"),fu(1))},(ys=il.prototype).ta=function(){},ys.sa=function(){},ys.ra=function(){},ys.qa=function(){},ys.Ja=function(){},ol.prototype.a=function(t,e){return new sl(t,e)},js(sl,Pa),sl.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;fu(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=nl(t,null,t.fa),Hc(t)},sl.prototype.close=function(){Fc(this.a)},sl.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Bc(this.a,e)}else this.l?((e={}).__data__=Va(t),Bc(this.a,e)):Bc(this.a,t)},sl.prototype.G=function(){this.a.f=null,delete this.f,Fc(this.a),delete this.a,sl.X.G.call(this)},js(al,_u),js(ul,Eu),js(cl,il),cl.prototype.ta=function(){Ma(this.a,"a")},cl.prototype.sa=function(t){Ma(this.a,new al(t))},cl.prototype.ra=function(t){Ma(this.a,new ul(t))},cl.prototype.qa=function(){Ma(this.a,"b")},ol.prototype.createWebChannel=ol.prototype.a,sl.prototype.send=sl.prototype.h,sl.prototype.open=sl.prototype.g,sl.prototype.close=sl.prototype.close,gu.NO_ERROR=0,gu.TIMEOUT=8,gu.HTTP_ERROR=6,yu.COMPLETE="complete",vu.EventType=wu,wu.OPEN="a",wu.CLOSE="b",wu.ERROR="c",wu.MESSAGE="d",Pa.prototype.listen=Pa.prototype.va,Sc.prototype.listenOnce=Sc.prototype.wa,Sc.prototype.getLastError=Sc.prototype.Qa,Sc.prototype.getLastErrorCode=Sc.prototype.ua,Sc.prototype.getStatus=Sc.prototype.W,Sc.prototype.getResponseJson=Sc.prototype.Pa,Sc.prototype.getResponseText=Sc.prototype.$,Sc.prototype.send=Sc.prototype.ba;var ll=gu,hl=yu,fl=su,dl=vu,pl=Sc,gl=n("mrSG"),yl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();yl.o=-1;var ml=new fs.b("@firebase/firestore");function vl(){return ml.logLevel}function bl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ml.logLevel<=fs.a.DEBUG){var r=e.map(El);ml.debug.apply(ml,Object(gl.f)(["Firestore (8.3.1): "+t],r))}}function wl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ml.logLevel<=fs.a.ERROR){var r=e.map(El);ml.error.apply(ml,Object(gl.f)(["Firestore (8.3.1): "+t],r))}}function _l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ml.logLevel<=fs.a.WARN){var r=e.map(El);ml.warn.apply(ml,Object(gl.f)(["Firestore (8.3.1): "+t],r))}}function El(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(xw){return t}}function Ol(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw wl(e),new Error(e)}function Tl(t,e){t||Ol()}function Sl(t,e){return t}function Cl(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Il=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Cl(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function xl(t,e){return t<e?-1:t>e?1:0}function Al(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function jl(t){return t+"\0"}function kl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Rl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Dl(t){return null==t}function Pl(t){return 0===t&&1/t==-1/0}function Ml(t){return"number"==typeof t&&Number.isInteger(t)&&!Pl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ll={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vl=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(gl.c)(e,t),e}(Error),Fl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ol(),void 0===n?n=t.length-e:n>t.length-e&&Ol(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ul=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Fl),ql=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ql.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Vl(Ll.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Vl(Ll.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Vl(Ll.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Fl),Hl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Ul.fromString(e))},t.fromName=function(e){return new t(Ul.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ul.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ul.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ul(e.slice()))},t}(),zl=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return xl(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();zl.EMPTY_BYTE_STRING=new zl("");var Gl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kl(t){if(Tl(!!t),"string"==typeof t){var e=0,n=Gl.exec(t);if(Tl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$l(t.seconds),nanos:$l(t.nanos)}}function $l(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Wl(t){return"string"==typeof t?zl.fromBase64String(t):zl.fromUint8Array(t)}var Ql=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Vl(Ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Vl(Ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Vl(Ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Vl(Ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?xl(this.nanoseconds,t.nanoseconds):xl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function Yl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xl(t){var e=t.mapValue.fields.__previous_value__;return Yl(e)?Xl(e):e}function Jl(t){var e=Kl(t.mapValue.fields.__local_write_time__.timestampValue);return new Ql(e.seconds,e.nanos)}function Zl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yl(t)?4:10:Ol()}function th(t,e){var n=Zl(t);if(n!==Zl(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jl(t).isEqual(Jl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Kl(t.timestampValue),r=Kl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Wl(t.bytesValue).isEqual(Wl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return $l(t.geoPointValue.latitude)===$l(e.geoPointValue.latitude)&&$l(t.geoPointValue.longitude)===$l(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return $l(t.integerValue)===$l(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=$l(t.doubleValue),r=$l(e.doubleValue);return n===r?Pl(n)===Pl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Al(t.arrayValue.values||[],e.arrayValue.values||[],th);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(kl(n)!==kl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!th(n[i],r[i])))return!1;return!0}(t,e);default:return Ol()}}function eh(t,e){return void 0!==(t.values||[]).find(function(t){return th(t,e)})}function nh(t,e){var n=Zl(t),r=Zl(e);if(n!==r)return xl(n,r);switch(n){case 0:return 0;case 1:return xl(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=$l(t.integerValue||t.doubleValue),r=$l(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return rh(t.timestampValue,e.timestampValue);case 4:return rh(Jl(t),Jl(e));case 5:return xl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Wl(t),r=Wl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=xl(n[i],r[i]);if(0!==o)return o}return xl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=xl($l(t.latitude),$l(e.latitude));return 0!==n?n:xl($l(t.longitude),$l(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=nh(n[i],r[i]);if(o)return o}return xl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=xl(r[s],o[s]);if(0!==a)return a;var u=nh(n[r[s]],i[o[s]]);if(0!==u)return u}return xl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ol()}}function rh(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return xl(t,e);var n=Kl(t),r=Kl(e),i=xl(n.seconds,r.seconds);return 0!==i?i:xl(n.nanos,r.nanos)}function ih(t){return oh(t)}function oh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Kl(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Wl(t.bytesValue).toBase64():"referenceValue"in t?Hl.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=oh(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+oh(t.fields[o])}return e+"}"}(t.mapValue):Ol();var e}function sh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ah(t){return!!t&&"integerValue"in t}function uh(t){return!!t&&"arrayValue"in t}function ch(t){return!!t&&"nullValue"in t}function lh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hh(t){return!!t&&"mapValue"in t}var fh=function(t,e){this.key=t,this.version=e},dh=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(gl.c)(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(fh),ph=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(gl.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(fh),gh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gl.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(fh),yh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function mh(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new yh(t,e,n,r,i,o,s)}function vh(t){var e=Sl(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+ih(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Dl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=kh(e.startAt)),e.endAt&&(n+="|ub:",n+=kh(e.endAt)),e.h=n}return e.h}function bh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Rh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!th(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ph(t.startAt,e.startAt)&&Ph(t.endAt,e.endAt)}function wh(t){return Hl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var _h=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(gl.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Eh(t,n,r):"array-contains"===n?new Ch(t,r):"in"===n?new Ih(t,r):"not-in"===n?new xh(t,r):"array-contains-any"===n?new Ah(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Oh(t,n):new Th(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(nh(e,this.value)):null!==e&&Zl(this.value)===Zl(e)&&this.m(nh(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ol()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Eh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Hl.fromName(r.referenceValue),i}return Object(gl.c)(e,t),e.prototype.matches=function(t){var e=Hl.comparator(t.key,this.key);return this.m(e)},e}(_h),Oh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Sh(0,n),r}return Object(gl.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(_h),Th=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Sh(0,n),r}return Object(gl.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(_h);function Sh(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Hl.fromName(t.referenceValue)})}var Ch=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(gl.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return uh(e)&&eh(e.arrayValue,this.value)},e}(_h),Ih=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(gl.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&eh(this.value.arrayValue,e)},e}(_h),xh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(gl.c)(e,t),e.prototype.matches=function(t){if(eh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!eh(this.value.arrayValue,e)},e}(_h),Ah=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(gl.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!uh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return eh(e.value.arrayValue,t)})},e}(_h),jh=function(t,e){this.position=t,this.before=e};function kh(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return ih(t)}).join(",")}var Nh=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Rh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Dh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Hl.comparator(Hl.fromName(s.referenceValue),n.key):nh(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ph(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!th(t.position[n],e.position[n]))return!1;return!0}var Mh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Lh(t,e,n,r,i,o,s,a){return new Mh(t,e,n,r,i,o,s,a)}function Vh(t){return new Mh(t)}function Fh(t){return!Dl(t.limit)&&"F"===t.limitType}function Uh(t){return!Dl(t.limit)&&"L"===t.limitType}function qh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Bh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Hh(t){return null!==t.collectionGroup}function zh(t){var e=Sl(t);if(null===e.p){e.p=[];var n=Bh(e),r=qh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Nh(n)),e.p.push(new Nh(Bl.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Nh(Bl.keyField(),u))}}}return e.p}function Gh(t){var e=Sl(t);if(!e.T)if("F"===e.limitType)e.T=mh(e.path,e.collectionGroup,zh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=zh(e);r<i.length;r++){var o=i[r];n.push(new Nh(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new jh(e.endAt.position,!e.endAt.before):null,a=e.startAt?new jh(e.startAt.position,!e.startAt.before):null;e.T=mh(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Kh(t,e,n){return new Mh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $h(t,e){return bh(Gh(t),Gh(e))&&t.limitType===e.limitType}function Wh(t){return vh(Gh(t))+"|lt:"+t.limitType}function Qh(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+ih(e.value);var e}).join(", ")+"]"),Dl(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+kh(t.startAt)),t.endAt&&(e+=", endAt: "+kh(t.endAt)),"Target("+e+")"}(Gh(t))+"; limitType="+t.limitType+")"}function Yh(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Hl.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Dh(t.startAt,zh(t),e)||t.endAt&&Dh(t.endAt,zh(t),e))}(t,e)}function Xh(t){return function(e,n){for(var r=!1,i=0,o=zh(t);i<o.length;i++){var s=o[i],a=Jh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Jh(t,e,n){var r=t.field.isKeyField()?Hl.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?nh(r,i):Ol()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ol()}}var Zh=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Ql(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),tf=function(){function t(t){this.fields=t,t.sort(Bl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Al(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),ef=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!hh(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return th(this.proto,t.proto)},t}(),nf=function(){function t(t){void 0===t&&(t=ef.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Zl(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(Bl.emptyPath(),this.A);return null!=t?new ef(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=hh(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.P(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function rf(t){var e=[];return Nl(t.fields||{},function(t,n){var r=new Bl([t]);if(hh(n)){var i=rf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new tf(e)}function of(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pl(e)?"-0":e}}function sf(t){return{integerValue:""+t}}function af(t,e){return Ml(e)?sf(e):of(t,e)}var uf=function(){this._=void 0};function cf(t,e,n){return t instanceof ff?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof df?pf(t,e):t instanceof gf?yf(t,e):function(t,e){var n=hf(t,e),r=vf(n)+vf(t.S);return ah(n)&&ah(t.S)?sf(r):of(t.D,r)}(t,e)}function lf(t,e,n){return t instanceof df?pf(t,e):t instanceof gf?yf(t,e):n}function hf(t,e){return t instanceof mf?ah(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gl.c)(e,t),e}(uf),df=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(gl.c)(e,t),e}(uf);function pf(t,e){for(var n=bf(e),r=function(t){n.some(function(e){return th(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var gf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(gl.c)(e,t),e}(uf);function yf(t,e){for(var n=bf(e),r=function(t){n=n.filter(function(e){return!th(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var mf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Object(gl.c)(e,t),e}(uf);function vf(t){return $l(t.integerValue||t.doubleValue)}function bf(t){return uh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var wf=function(t,e){this.field=t,this.transform=e},_f=function(t,e){this.version=t,this.transformResults=e},Ef=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Of(t,e){return void 0!==t.updateTime?e instanceof dh&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof dh}var Tf=function(){};function Sf(t,e,n){return t instanceof jf?function(t,e,n){var r=t.value,i=Rf(t.fieldTransforms,e,n.transformResults);return r=Pf(t.fieldTransforms,r,i),new dh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof kf?function(t,e,n){if(!Of(t.precondition,e))return new gh(t.key,n.version);var r=Nf(t,e,Rf(t.fieldTransforms,e,n.transformResults));return new dh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new ph(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Cf(t,e,n){return t instanceof jf?function(t,e,n){if(!Of(t.precondition,e))return e;var r=t.value,i=Df(t.fieldTransforms,n,e);r=Pf(t.fieldTransforms,r,i);var o=Af(e);return new dh(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof kf?function(t,e,n){if(!Of(t.precondition,e))return e;var r=Af(e),i=Nf(t,e,Df(t.fieldTransforms,n,e));return new dh(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return Of(t.precondition,e)?new ph(t.key,Zh.min()):e}(t,e)}function If(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof dh?e.field(o.field):void 0,a=hf(o.transform,s||null);null!=a&&(n=null==n?(new nf).set(o.field,a):n.set(o.field,a))}return n?n.v():null}(t.fieldTransforms,e)}function xf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Al(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof df&&e instanceof df||t instanceof gf&&e instanceof gf?Al(t.elements,e.elements,th):t instanceof mf&&e instanceof mf?th(t.S,e.S):t instanceof ff&&e instanceof ff}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Af(t){return t instanceof dh?t.version:Zh.min()}var jf=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(gl.c)(e,t),e}(Tf),kf=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(gl.c)(e,t),e}(Tf);function Nf(t,e,n){var r;return r=function(t,e){var n=new nf(e);return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.v()}(t,r=e instanceof dh?e.data():ef.empty()),Pf(t.fieldTransforms,r,n)}function Rf(t,e,n){var r=[];Tl(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof dh&&(a=e.field(o.field)),r.push(lf(s,a,n[i]))}return r}function Df(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof dh&&(u=n.field(s.field)),r.push(cf(a,u,e))}return r}function Pf(t,e,n){for(var r=new nf(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var Mf,Lf,Vf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(gl.c)(e,t),e}(Tf),Ff=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(gl.c)(e,t),e}(Tf),Uf=function(t){this.count=t};function qf(t){switch(t){case Ll.OK:return Ol();case Ll.CANCELLED:case Ll.UNKNOWN:case Ll.DEADLINE_EXCEEDED:case Ll.RESOURCE_EXHAUSTED:case Ll.INTERNAL:case Ll.UNAVAILABLE:case Ll.UNAUTHENTICATED:return!1;case Ll.INVALID_ARGUMENT:case Ll.NOT_FOUND:case Ll.ALREADY_EXISTS:case Ll.PERMISSION_DENIED:case Ll.FAILED_PRECONDITION:case Ll.ABORTED:case Ll.OUT_OF_RANGE:case Ll.UNIMPLEMENTED:case Ll.DATA_LOSS:return!0;default:return Ol()}}function Bf(t){if(void 0===t)return wl("GRPC error has no .code"),Ll.UNKNOWN;switch(t){case Mf.OK:return Ll.OK;case Mf.CANCELLED:return Ll.CANCELLED;case Mf.UNKNOWN:return Ll.UNKNOWN;case Mf.DEADLINE_EXCEEDED:return Ll.DEADLINE_EXCEEDED;case Mf.RESOURCE_EXHAUSTED:return Ll.RESOURCE_EXHAUSTED;case Mf.INTERNAL:return Ll.INTERNAL;case Mf.UNAVAILABLE:return Ll.UNAVAILABLE;case Mf.UNAUTHENTICATED:return Ll.UNAUTHENTICATED;case Mf.INVALID_ARGUMENT:return Ll.INVALID_ARGUMENT;case Mf.NOT_FOUND:return Ll.NOT_FOUND;case Mf.ALREADY_EXISTS:return Ll.ALREADY_EXISTS;case Mf.PERMISSION_DENIED:return Ll.PERMISSION_DENIED;case Mf.FAILED_PRECONDITION:return Ll.FAILED_PRECONDITION;case Mf.ABORTED:return Ll.ABORTED;case Mf.OUT_OF_RANGE:return Ll.OUT_OF_RANGE;case Mf.UNIMPLEMENTED:return Ll.UNIMPLEMENTED;case Mf.DATA_LOSS:return Ll.DATA_LOSS;default:return Ol()}}(Lf=Mf||(Mf={}))[Lf.OK=0]="OK",Lf[Lf.CANCELLED=1]="CANCELLED",Lf[Lf.UNKNOWN=2]="UNKNOWN",Lf[Lf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lf[Lf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lf[Lf.NOT_FOUND=5]="NOT_FOUND",Lf[Lf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lf[Lf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lf[Lf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lf[Lf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lf[Lf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lf[Lf.ABORTED=10]="ABORTED",Lf[Lf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lf[Lf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lf[Lf.INTERNAL=13]="INTERNAL",Lf[Lf.UNAVAILABLE=14]="UNAVAILABLE",Lf[Lf.DATA_LOSS=15]="DATA_LOSS";var Hf=function(){function t(t,e){this.comparator=t,this.root=e||Gf.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gf.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gf.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new zf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new zf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new zf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new zf(this.root,t,this.comparator,!0)},t}(),zf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Gf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Ol();if(this.right.isRed())throw Ol();var t=this.left.check();if(t!==this.right.check())throw Ol();return t+(this.isRed()?0:1)},t}();Gf.EMPTY=null,Gf.RED=!0,Gf.BLACK=!1,Gf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ol()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ol()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ol()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ol()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ol()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Gf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Kf=function(){function t(t){this.comparator=t,this.data=new Hf(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new $f(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new $f(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),$f=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Wf=new Hf(Hl.comparator);function Qf(){return Wf}function Yf(){return Qf()}var Xf=new Hf(Hl.comparator);function Jf(){return Xf}var Zf=new Hf(Hl.comparator);function td(){return Zf}var ed=new Kf(Hl.comparator);function nd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ed,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var rd=new Kf(xl);function id(){return rd}var od=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,sd.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Zh.min(),r,id(),Qf(),nd())},t}(),sd=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(zl.EMPTY_BYTE_STRING,n,nd(),nd(),nd())},t}(),ad=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},ud=function(t,e){this.targetId=t,this.$=e},cd=function(t,e,n,r){void 0===n&&(n=zl.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ld=function(){function t(){this.F=0,this.O=dd(),this.k=zl.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=nd(),e=nd(),n=nd();return this.O.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ol()}}),new sd(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=dd()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),hd=function(){function t(t){this.X=t,this.Z=new Map,this.tt=Qf(),this.et=fd(),this.nt=new Kf(xl)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof dh?this.it(r,t.N):t.N instanceof ph&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:Ol()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach(function(t,r){n.at(r)&&e(r)})},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(wh(i))if(0===n){var o=new Hl(i.path);this.rt(e,o,new ph(o,Zh.min()))}else Tl(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach(function(r,i){var o=e.lt(i);if(o){if(r.current&&wh(o.target)){var s=new Hl(o.target.path);null!==e.tt.get(s)||e.wt(i,s)||e.rt(i,s,new ph(s,t))}r.q&&(n.set(i,r.K()),r.W())}});var r=nd();this.et.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new od(t,n,this.nt,this.tt,r);return this.tt=Qf(),this.et=fd(),this.nt=new Kf(xl),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new ld,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new Kf(xl),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||bl("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new ld),this.X.getRemoteKeysForTarget(t).forEach(function(n){e.rt(t,n,null)})},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function fd(){return new Hf(Hl.comparator)}function dd(){return new Hf(Hl.comparator)}var pd={asc:"ASCENDING",desc:"DESCENDING"},gd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yd=function(t,e){this.databaseId=t,this.V=e};function md(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function vd(t,e){return t.V?e.toBase64():e.toUint8Array()}function bd(t,e){return md(t,e.toTimestamp())}function wd(t){return Tl(!!t),Zh.fromTimestamp(function(t){var e=Kl(t);return new Ql(e.seconds,e.nanos)}(t))}function _d(t,e){return function(t){return new Ul(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ed(t){var e=Ul.fromString(t);return Tl(Kd(e)),e}function Od(t,e){return _d(t.databaseId,e.path)}function Td(t,e){var n=Ed(e);if(n.get(1)!==t.databaseId.projectId)throw new Vl(Ll.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Vl(Ll.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Hl(xd(n))}function Sd(t,e){return _d(t.databaseId,e)}function Cd(t){var e=Ed(t);return 4===e.length?Ul.emptyPath():xd(e)}function Id(t){return new Ul(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xd(t){return Tl(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ad(t,e,n){return{name:Od(t,e),fields:n.proto.mapValue.fields}}function jd(t,e,n){var r=Td(t,e.name),i=wd(e.updateTime),o=new ef({mapValue:{fields:e.fields}});return new dh(r,i,o,{hasCommittedMutations:!!n})}function kd(t,e){var n;if(e instanceof jf)n={update:Ad(t,e.key,e.value)};else if(e instanceof Vf)n={delete:Od(t,e.key)};else if(e instanceof kf)n={update:Ad(t,e.key,e.data),updateMask:Gd(e.fieldMask)};else{if(!(e instanceof Ff))return Ol();n={verify:Od(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof ff)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof df)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gf)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof mf)return{fieldPath:e.field.canonicalString(),increment:n.S};throw Ol()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:bd(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ol()}(t,e.precondition)),n}function Nd(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ef.updateTime(wd(t.updateTime)):void 0!==t.exists?Ef.exists(t.exists):Ef.none()}(e.currentDocument):Ef.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Tl("REQUEST_TIME"===e.setToServerValue),n=new ff):"appendMissingElements"in e?n=new df(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new gf(e.removeAllFromArray.values||[]):"increment"in e?n=new mf(t,e.increment):Ol();var r=Bl.fromServerFormat(e.fieldPath);return new wf(r,n)}(t,e)}):[];if(e.update){var i=Td(t,e.update.name),o=new ef({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new tf((t.fieldPaths||[]).map(function(t){return Bl.fromServerFormat(t)}))}(e.updateMask);return new kf(i,o,s,n,r)}return new jf(i,o,n,r)}if(e.delete){var a=Td(t,e.delete);return new Vf(a,n)}if(e.verify){var u=Td(t,e.verify);return new Ff(u,n)}return Ol()}function Rd(t,e){return{documents:[Sd(t,e.path)]}}function Dd(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Sd(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Sd(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(lh(t.value))return{unaryFilter:{field:qd(t.field),op:"IS_NAN"}};if(ch(t.value))return{unaryFilter:{field:qd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(lh(t.value))return{unaryFilter:{field:qd(t.field),op:"IS_NOT_NAN"}};if(ch(t.value))return{unaryFilter:{field:qd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qd(t.field),op:Ud(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:qd(t.field),direction:Fd(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.V||Dl(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ld(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ld(e.endAt)),n}function Pd(t){var e=Cd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Tl(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Md(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Nh(Bd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Dl(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Vd(n.startAt));var l=null;return n.endAt&&(l=Vd(n.endAt)),Lh(e,i,a,s,u,"F",c,l)}function Md(t){return t?void 0!==t.unaryFilter?[zd(t)]:void 0!==t.fieldFilter?[Hd(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Md(t)}).reduce(function(t,e){return t.concat(e)}):Ol():[]}function Ld(t){return{before:t.before,values:t.position}}function Vd(t){return new jh(t.values||[],!!t.before)}function Fd(t){return pd[t]}function Ud(t){return gd[t]}function qd(t){return{fieldPath:t.canonicalString()}}function Bd(t){return Bl.fromServerFormat(t.fieldPath)}function Hd(t){return _h.create(Bd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ol()}}(t.fieldFilter.op),t.fieldFilter.value)}function zd(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Bd(t.unaryFilter.field);return _h.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Bd(t.unaryFilter.field);return _h.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Bd(t.unaryFilter.field);return _h.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Bd(t.unaryFilter.field);return _h.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ol()}}function Gd(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Kd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function $d(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Qd(e)),e=Wd(t.get(n),e);return Qd(e)}function Wd(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Qd(t){return t+"\x01\x01"}function Yd(t){var e=t.length;if(Tl(e>=2),2===e)return Tl("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ul.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Ol(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Ol()}o=s+2}return new Ul(r)}var Xd=function(t,e){this.seconds=t,this.nanoseconds=e},Jd=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Jd.store="owner",Jd.key="owner";var Zd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Zd.store="mutationQueues",Zd.keyPath="userId";var tp=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};tp.store="mutations",tp.keyPath="batchId",tp.userMutationsIndex="userMutationsIndex",tp.userMutationsKeyPath=["userId","batchId"];var ep=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,$d(e)]},t.key=function(t,e,n){return[t,$d(e),n]},t}();ep.store="documentMutations",ep.PLACEHOLDER=new ep;var np=function(t,e){this.path=t,this.readTime=e},rp=function(t,e){this.path=t,this.version=e},ip=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ip.store="remoteDocuments",ip.readTimeIndex="readTimeIndex",ip.readTimeIndexPath="readTime",ip.collectionReadTimeIndex="collectionReadTimeIndex",ip.collectionReadTimeIndexPath=["parentPath","readTime"];var op=function(t){this.byteSize=t};op.store="remoteDocumentGlobal",op.key="remoteDocumentGlobalKey";var sp=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};sp.store="targets",sp.keyPath="targetId",sp.queryTargetsIndexName="queryTargetsIndex",sp.queryTargetsKeyPath=["canonicalId","targetId"];var ap=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ap.store="targetDocuments",ap.keyPath=["targetId","path"],ap.documentTargetsIndex="documentTargetsIndex",ap.documentTargetsKeyPath=["path","targetId"];var up=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};up.key="targetGlobalKey",up.store="targetGlobal";var cp=function(t,e){this.collectionId=t,this.parent=e};cp.store="collectionParents",cp.keyPath=["collectionId","parent"];var lp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};lp.store="clientMetadata",lp.keyPath="clientId";var hp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};hp.store="bundles",hp.keyPath="bundleId";var fp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};fp.store="namedQueries",fp.keyPath="name";var dp=Object(gl.f)(Object(gl.f)([],Object(gl.f)(Object(gl.f)([],Object(gl.f)(Object(gl.f)([],Object(gl.f)(Object(gl.f)([],[Zd.store,tp.store,ep.store,ip.store,sp.store,Jd.store,up.store,ap.store]),[lp.store])),[op.store])),[cp.store])),[hp.store,fp.store]),pp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",gp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),yp=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},mp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Ol(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),vp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new yp,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new _p(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=Cp(e.target.error);n.gt.reject(new _p(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new _p(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(bl("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Op(e)},t}(),bp=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(ds.g)())&&wl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return bl("SimpleDb","Removing database:",t),Tp(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(ds.g)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Object(gl.b)(this,void 0,void 0,function(){var e,n=this;return Object(gl.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(bl("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new _p(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Vl(Ll.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new _p(t,n))},i.onupgradeneeded=function(t){bl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){bl("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}})})},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(gl.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(gl.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(gl.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Vt(t)];case 2:return a.db=h.sent(),e=vp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),mp.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.Et];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return bl("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),wp=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return Tp(this.xt.delete())},t}(),_p=function(t){function e(e,n){var r=this;return(r=t.call(this,Ll.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(gl.c)(e,t),e}(Vl);function Ep(t){return"IndexedDbTransactionError"===t.name}var Op=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(bl("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(bl("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Tp(n)},t.prototype.add=function(t){return bl("SimpleDb","ADD",this.store.name,t,t),Tp(this.store.add(t))},t.prototype.get=function(t){var e=this;return Tp(this.store.get(t)).next(function(n){return void 0===n&&(n=null),bl("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return bl("SimpleDb","DELETE",this.store.name,t),Tp(this.store.delete(t))},t.prototype.count=function(){return bl("SimpleDb","COUNT",this.store.name),Tp(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Lt=function(t,e){bl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,function(t,e,n){return n.delete()})},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new mp(function(n,r){e.onerror=function(t){var e=Cp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Mt=function(t,e){var n=[];return new mp(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new wp(i),s=e(i.primaryKey,i.value,o);if(s instanceof mp){var a=s.catch(function(t){return o.done(),mp.reject(t)});n.push(a)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return mp.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Tp(t){return new mp(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Cp(t.target.error);n(e)}})}var Sp=!1;function Cp(t){var e=bp.It(Object(ds.g)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Vl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Sp||(Sp=!0,setTimeout(function(){throw r},0)),r}}return t}var Ip=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Object(gl.c)(e,t),e}(gp);function xp(t,e){var n=Sl(t);return bp.Pt(n.Qt,e)}var Ap=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Sf(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Cf(s,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Cf(s,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},nd())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Al(this.mutations,t.mutations,function(t,e){return xf(t,e)})&&Al(this.baseMutations,t.baseMutations,function(t,e){return xf(t,e)})},t}(),jp=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Tl(e.mutations.length===r.length);for(var i=td(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),kp=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Zh.min()),void 0===o&&(o=Zh.min()),void 0===s&&(s=zl.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Np=function(t){this.Kt=t};function Rp(t,e){if(e.document)return jd(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Hl.fromSegments(e.noDocument.path),r=Vp(e.noDocument.readTime);return new ph(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Hl.fromSegments(e.unknownDocument.path);return r=Vp(e.unknownDocument.version),new gh(i,r)}return Ol()}function Dp(t,e,n){var r=Pp(n),i=e.key.path.popLast().toArray();if(e instanceof dh){var o=function(t,e){return{name:Od(t,e.key),fields:e.toProto().mapValue.fields,updateTime:md(t,e.version.toTimestamp())}}(t.Kt,e),s=e.hasCommittedMutations;return new ip(null,null,o,s,r,i)}if(e instanceof ph){var a=e.key.path.toArray(),u=Lp(e.version);return s=e.hasCommittedMutations,new ip(null,new np(a,u),null,s,r,i)}if(e instanceof gh){var c=e.key.path.toArray(),l=Lp(e.version);return new ip(new rp(c,l),null,null,!0,r,i)}return Ol()}function Pp(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Mp(t){var e=new Ql(t[0],t[1]);return Zh.fromTimestamp(e)}function Lp(t){var e=t.toTimestamp();return new Xd(e.seconds,e.nanoseconds)}function Vp(t){var e=new Ql(t.seconds,t.nanoseconds);return Zh.fromTimestamp(e)}function Fp(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Nd(t.Kt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Nd(t.Kt,e)}),o=Ql.fromMillis(e.localWriteTimeMs);return new Ap(e.batchId,o,n,i)}function Up(t){var e,n,r=Vp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Vp(t.lastLimboFreeSnapshotVersion):Zh.min();return void 0!==t.query.documents?(Tl(1===(n=t.query).documents.length),e=Gh(Vh(Cd(n.documents[0])))):e=function(t){return Gh(Pd(t))}(t.query),new kp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,zl.fromBase64String(t.resumeToken))}function qp(t,e){var n,r=Lp(e.snapshotVersion),i=Lp(e.lastLimboFreeSnapshotVersion);n=wh(e.target)?Rd(t.Kt,e.target):Dd(t.Kt,e.target);var o=e.resumeToken.toBase64();return new sp(e.targetId,vh(e.target),r,o,e.sequenceNumber,i,n)}function Bp(t){var e=Pd({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Kh(e,e.limit,"L"):e}var Hp=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return zp(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Vp(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return zp(t).put({bundleId:(n=e).id,createTime:Lp(wd(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Gp(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Bp(e.bundledQuery),readTime:Vp(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Gp(t).put(function(t){return{name:t.name,readTime:Lp(wd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function zp(t){return xp(t,hp.store)}function Gp(t){return xp(t,fp.store)}var Kp=function(){function t(){this.Wt=new $p}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),mp.resolve()},t.prototype.getCollectionParents=function(t,e){return mp.resolve(this.Wt.getEntries(e))},t}(),$p=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Kf(Ul.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Kf(Ul.comparator)).toArray()},t}(),Wp=function(){function t(){this.jt=new $p}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});var o={collectionId:r,parent:$d(i)};return Qp(t).put(o)}return mp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[jl(e),""],!1,!0);return Qp(t).kt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Yd(o.parent))}return n})},t}();function Qp(t){return xp(t,cp.store)}var Yp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Jp(t,e,n){var r=t.store(tp.store),i=t.store(ep.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.qt({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Tl(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=ep.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return mp.waitFor(o).next(function(){return c})}function Zp(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ol();e=t.noDocument}return JSON.stringify(e).length}Xp.DEFAULT_COLLECTION_PERCENTILE=10,Xp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xp.DEFAULT=new Xp(41943040,Xp.DEFAULT_COLLECTION_PERCENTILE,Xp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xp.DISABLED=new Xp(-1,0,0);var tg=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return Tl(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ng(t).qt({index:tp.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=rg(t),s=ng(t);return s.add({}).next(function(a){Tl("number"==typeof a);for(var u=new Ap(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return kd(t.Kt,e)}),i=n.mutations.map(function(e){return kd(t.Kt,e)});return new tp(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new Kf(function(t,e){return xl(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=ep.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,ep.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.zt[a]=u.keys()}),mp.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return ng(t).get(e).next(function(t){return t?(Tl(t.userId===n.userId),Fp(n.D,t)):null})},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?mp.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ng(t).qt({index:tp.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Tl(e.batchId>=r),o=Fp(n.D,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ng(t).qt({index:tp.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ng(t).kt(tp.userMutationsIndex,n).next(function(t){return t.map(function(t){return Fp(e.D,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ep.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return rg(t).qt({range:i},function(r,i,s){var a=r[0],u=r[2],c=Yd(r[1]);if(a===n.userId&&e.path.isEqual(c))return ng(t).get(u).next(function(t){if(!t)throw Ol();Tl(t.userId===n.userId),o.push(Fp(n.D,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Kf(xl),i=[];return e.forEach(function(e){var o=ep.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=rg(t).qt({range:s},function(t,i,o){var s=t[0],a=t[2],u=Yd(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),mp.waitFor(i).next(function(){return n.Yt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=ep.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Kf(xl);return rg(t).qt({range:s},function(t,e,o){var s=t[0],u=t[2],c=Yd(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Yt(t,a)})},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(ng(t).get(e).next(function(t){if(null===t)throw Ol();Tl(t.userId===n.userId),r.push(Fp(n.D,t))}))}),mp.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Jp(t.Qt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Xt(e.batchId)}),mp.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return mp.resolve();var r=IDBKeyRange.lowerBound(ep.prefixForUser(e.userId)),i=[];return rg(t).qt({range:r},function(t,n,r){if(t[0]===e.userId){var o=Yd(t[1]);i.push(o)}else r.done()}).next(function(){Tl(0===i.length)})})},t.prototype.containsKey=function(t,e){return eg(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return ig(t).get(this.userId).next(function(t){return t||new Zd(e.userId,-1,"")})},t}();function eg(t,e,n){var r=ep.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return rg(t).qt({range:o,Bt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function ng(t){return xp(t,tp.store)}function rg(t){return xp(t,ep.store)}function ig(t){return xp(t,Zd.store)}var og=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),sg=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next(function(n){var r=new og(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return Zh.fromTimestamp(new Ql(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next(function(){return n.se(t).next(function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return ag(t).delete(e.targetId)}).next(function(){return n.se(t)}).next(function(e){return Tl(e.targetCount>0),e.targetCount-=1,n.ie(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ag(t).qt(function(s,a){var u=Up(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return mp.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return ag(t).qt(function(t,n){var r=Up(n);e(r)})},t.prototype.se=function(t){return ug(t).get(up.key).next(function(t){return Tl(null!==t),t})},t.prototype.ie=function(t,e){return ug(t).put(up.key,e)},t.prototype.re=function(t,e){return ag(t).put(qp(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=vh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ag(t).qt({range:r,index:sp.queryTargetsIndexName},function(t,n,r){var o=Up(n);bh(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=cg(t);return e.forEach(function(e){var s=$d(e.path);i.push(o.put(new ap(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),mp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=cg(t);return mp.forEach(e,function(e){var o=$d(e.path);return mp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=cg(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=cg(t),i=nd();return r.qt({range:n,Bt:!0},function(t,e,n){var r=Yd(t[1]),o=new Hl(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=$d(e.path),r=IDBKeyRange.bound([n],[jl(n)],!1,!0),i=0;return cg(t).qt({index:ap.documentTargetsIndex,Bt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.yt=function(t,e){return ag(t).get(e).next(function(t){return t?Up(t):null})},t}();function ag(t){return xp(t,sp.store)}function ug(t){return xp(t,up.store)}function cg(t){return xp(t,ap.store)}function lg(t){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(e){if(t.code!==Ll.FAILED_PRECONDITION||t.message!==pp)throw t;return bl("LocalStore","Unexpectedly lost primary lease"),[2]})})}function hg(t,e){var n=t[1],r=e[1],i=xl(t[0],e[0]);return 0===i?xl(n,r):i}var fg=function(){function t(t){this.ce=t,this.buffer=new Kf(hg),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();hg(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),dg=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;bl("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(gl.b)(e,void 0,void 0,function(){var e;return Object(gl.d)(this,function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ep(e=n.sent())?(bl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,lg(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}})})})},t}(),pg=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return mp.resolve(yl.o);var r=new fg(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(bl("LruGarbageCollector","Garbage collection skipped; disabled"),mp.resolve(Yp)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(bl("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Yp):n.ye(t,e)})},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(bl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),vl()<=fs.a.DEBUG&&bl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),mp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),gg=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new pg(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return yg(t,n)},t.prototype.removeReference=function(t,e,n){return yg(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return yg(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return ig(t).Ut(function(r){return eg(t,r,e).next(function(t){return t&&(n=!0),mp.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,function(s,a){if(a<=e){var u=n.Ee(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),cg(t).delete([0,$d(s.path)])})});i.push(u)}}).next(function(){return mp.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return yg(t,e)},t.prototype.pe=function(t,e){var n,r=cg(t),i=yl.o;return r.qt({index:ap.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==yl.o&&e(new Hl(Yd(n)),i),i=s,n=o):i=yl.o}).next(function(){i!==yl.o&&e(new Hl(Yd(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function yg(t,e){return cg(t).put(function(t,e){return new ap(0,$d(t.path),e)}(e,t.currentSequenceNumber))}var mg=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Nl(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Rl(this.inner)},t}(),vg=function(){function t(){this.changes=new mg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Zh.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?mp.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),bg=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return Eg(t).put(Og(e),n)},t.prototype.removeEntry=function(t,e){var n=Eg(t),r=Og(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Te(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Eg(t).get(Og(e)).next(function(t){return n.Ie(t)})},t.prototype.Ae=function(t,e){var n=this;return Eg(t).get(Og(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:Zp(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Yf();return this.Re(t,e,function(t,e){var i=n.Ie(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.be=function(t,e){var n=this,r=Yf(),i=new Hf(Hl.comparator);return this.Re(t,e,function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,Zp(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{ve:r,Pe:i}})},t.prototype.Re=function(t,e,n){if(e.isEmpty())return mp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Eg(t).qt({range:r},function(t,e,r){for(var s=Hl.fromSegments(t);o&&Hl.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Jf(),o=e.path.length+1,s={};if(n.isEqual(Zh.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Pp(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=ip.collectionReadTimeIndex}return Eg(t).qt(s,function(t,n,s){if(t.length===o){var a=Rp(r.D,n);e.path.isPrefixOf(a.key.path)?a instanceof dh&&Yh(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new wg(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return _g(t).get(op.key).next(function(t){return Tl(!!t),t})},t.prototype.Te=function(t,e){return _g(t).put(op.key,e)},t.prototype.Ie=function(t){if(t){var e=Rp(this.D,t);return e instanceof ph&&e.version.isEqual(Zh.min())?null:e}return null},t}(),wg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new mg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(gl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Kf(function(t,e){return xl(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Se.get(o);if(s.maybeDocument){var u=Dp(e.Ve.D,s.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=Zp(u);r+=c-a,n.push(e.Ve.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Dp(e.Ve.D,new ph(o,Zh.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))}),n.push(this.Ve.updateMetadata(t,r)),mp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},e}(vg);function _g(t){return xp(t,op.store)}function Eg(t){return xp(t,ip.store)}function Og(t){return t.path.toArray()}var Tg=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;Tl(n<r&&n>=0&&r<=11);var o=new vp("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Jd.store)}(t),function(t){t.createObjectStore(Zd.store,{keyPath:Zd.keyPath}),t.createObjectStore(tp.store,{keyPath:tp.keyPath,autoIncrement:!0}).createIndex(tp.userMutationsIndex,tp.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ep.store)}(t),Sg(t),function(t){t.createObjectStore(ip.store)}(t));var s=mp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ap.store),t.deleteObjectStore(sp.store),t.deleteObjectStore(up.store)}(t),Sg(t)),s=s.next(function(){return function(t){var e=t.store(up.store),n=new up(0,0,Zh.min().toTimestamp(),0);return e.put(up.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(tp.store).kt().next(function(n){t.deleteObjectStore(tp.store),t.createObjectStore(tp.store,{keyPath:tp.keyPath,autoIncrement:!0}).createIndex(tp.userMutationsIndex,tp.userMutationsKeyPath,{unique:!0});var r=e.store(tp.store),i=n.map(function(t){return r.put(t)});return mp.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(lp.store,{keyPath:lp.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.De(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(op.store)}(t),i.Ce(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Ne(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ip.store);e.createIndex(ip.readTimeIndex,ip.readTimeIndexPath,{unique:!1}),e.createIndex(ip.collectionReadTimeIndex,ip.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(hp.store,{keyPath:hp.keyPath})}(t),function(t){t.createObjectStore(fp.store,{keyPath:fp.keyPath})}(t)})),s},t.prototype.Ce=function(t){var e=0;return t.store(ip.store).qt(function(t,n){e+=Zp(n)}).next(function(){var n=new op(e);return t.store(op.store).put(op.key,n)})},t.prototype.De=function(t){var e=this,n=t.store(Zd.store),r=t.store(tp.store);return n.kt().next(function(n){return mp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(tp.userMutationsIndex,i).next(function(r){return mp.forEach(r,function(r){Tl(r.userId===n.userId);var i=Fp(e.D,r);return Jp(t,n.userId,i).next(function(){})})})})})},t.prototype.xe=function(t){var e=t.store(ap.store),n=t.store(ip.store);return t.store(up.store).get(up.key).next(function(t){var r=[];return n.qt(function(n,i){var o=new Ul(n),s=function(t){return[0,$d(t)]}(o);r.push(e.get(s).next(function(n){return n?mp.resolve():function(n){return e.put(new ap(0,$d(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return mp.waitFor(r)})})},t.prototype.Ne=function(t,e){t.createObjectStore(cp.store,{keyPath:cp.keyPath});var n=e.store(cp.store),r=new $p,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:$d(i)})}};return e.store(ip.store).qt({Bt:!0},function(t,e){var n=new Ul(t);return i(n.popLast())}).next(function(){return e.store(ep.store).qt({Bt:!0},function(t,e){var n=Yd(t[1]);return i(n.popLast())})})},t.prototype.$e=function(t){var e=this,n=t.store(sp.store);return n.qt(function(t,r){var i=Up(r),o=qp(e.D,i);return n.put(o)})},t}();function Sg(t){t.createObjectStore(ap.store,{keyPath:ap.keyPath}).createIndex(ap.documentTargetsIndex,ap.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(sp.store,{keyPath:sp.keyPath}).createIndex(sp.queryTargetsIndexName,sp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(up.store)}var Cg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ig=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=s,this.document=a,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new Vl(Ll.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gg(this,i),this.We=n+"main",this.D=new Np(u),this.je=new bp(this.We,11,new Tg(this.D)),this.Ge=new sg(this.referenceDelegate,this.D),this.Gt=new Wp,this.ze=function(t,e){return new bg(t,e)}(this.D,this.Gt),this.He=new Hp,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&wl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Vl(Ll.FAILED_PRECONDITION,Cg);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Ge.getHighestSequenceNumber(e)})}).then(function(e){t.Me=new yl(e,t.Oe)}).then(function(){t.Le=!0}).catch(function(e){return t.je&&t.je.close(),Promise.reject(e)})},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Object(gl.b)(e,void 0,void 0,function(){return Object(gl.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct(function(n){return Object(gl.b)(e,void 0,void 0,function(){return Object(gl.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return Object(gl.b)(e,void 0,void 0,function(){return Object(gl.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Ag(e).put(new lp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nn(e).next(function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable(function(){return t.Ke(!1)}))})}).next(function(){return t.sn(e)}).next(function(n){return t.isPrimary&&!n?t.rn(e).next(function(){return!1}):!!n&&t.on(e).next(function(){return!0})})}).catch(function(e){if(Ep(e))return bl("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return bl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable(function(){return t.Ke(e)}),t.isPrimary=e})},t.prototype.nn=function(t){var e=this;return xg(t).get(Jd.key).next(function(t){return mp.resolve(e.cn(t))})},t.prototype.an=function(t){return Ag(t).delete(this.clientId)},t.prototype.un=function(){return Object(gl.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(gl.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=xp(t,lp.store);return e.kt().next(function(t){var n=r.ln(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return mp.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?mp.resolve(!0):xg(t).get(Jd.key).next(function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new Vl(Ll.FAILED_PRECONDITION,Cg);return!1}}return!(!e.networkEnabled||!e.inForeground)||Ag(t).kt().next(function(t){return void 0===e.ln(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&bl("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(gl.b)(this,void 0,void 0,function(){var t=this;return Object(gl.d)(this,function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[Jd.store,lp.store],function(e){var n=new Ip(e,yl.o);return t.rn(n).next(function(){return t.an(n)})})];case 1:return e.sent(),this.je.close(),this.yn(),[2]}})})},t.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Ag(e).kt().next(function(e){return t.ln(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return tg.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return bl("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",dp,function(o){return r=new Ip(o,i.Me?i.Me.next():yl.o),"readwrite-primary"===e?i.nn(r).next(function(t){return!!t||i.sn(r)}).next(function(e){if(!e)throw wl("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new Vl(Ll.FAILED_PRECONDITION,pp);return n(r)}).next(function(t){return i.on(r).next(function(){return t})}):i.pn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.pn=function(t){var e=this;return xg(t).get(Jd.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Vl(Ll.FAILED_PRECONDITION,Cg)})},t.prototype.on=function(t){var e=new Jd(this.clientId,this.allowTabSynchronization,Date.now());return xg(t).put(Jd.key,e)},t.At=function(){return bp.At()},t.prototype.rn=function(t){var e=this,n=xg(t);return n.get(Jd.key).next(function(t){return e.cn(t)?(bl("IndexedDbPersistence","Releasing primary lease."),n.delete(Jd.key)):mp.resolve()})},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(wl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return bl("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return wl("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){wl("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function xg(t){return xp(t,Jd.store)}function Ag(t){return xp(t,lp.store)}function jg(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var kg=function(t,e){this.progress=t,this.En=e},Ng=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.An(t,e,r)})},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.Rn=function(t,e,n){var r=Yf();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next(function(e){return n.vn(t,e)})},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.Rn(t,e,r),o=Qf();return i.forEach(function(t,e){e||(e=new ph(t,Zh.min())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Hl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):Hh(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new Hl(e)).next(function(t){var e=Jf();return t instanceof dh&&(e=e.insert(t.key,t)),e})},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=Jf();return this.Gt.getCollectionParents(t,i).next(function(s){return mp.forEach(s,function(s){var a=function(t,e){return new Mh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sn(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Dn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=Cf(u,r.get(c),o.localWriteTime);r=l instanceof dh?r.insert(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Yh(e,n)||(r=r.remove(t))}),r})},t.prototype.Dn=function(t,e,n){for(var r=nd(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof kf&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof dh&&(c=c.insert(t,e))}),c})},t}(),Rg=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=nd(),i=nd(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Dg=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Zh.min())?this.On(t,e):this.Fn.bn(t,r).next(function(o){var s=i.kn(e,o);return(Fh(e)||Uh(e))&&i.Mn(e.limitType,s,r,n)?i.On(t,e):(vl()<=fs.a.DEBUG&&bl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Qh(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.kn=function(t,e){var n=new Kf(Xh(t));return e.forEach(function(e,r){r instanceof dh&&Yh(t,r)&&(n=n.add(r))}),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return vl()<=fs.a.DEBUG&&bl("QueryEngine","Using full collection scan to execute query:",Qh(e)),this.Fn.getDocumentsMatchingQuery(t,e,Zh.min())},t}(),Pg=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new Hf(xl),this.qn=new mg(function(t){return vh(t)},bh),this.Un=Zh.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new Ng(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Bn)})},t}();function Mg(t,e,n,r){return new Pg(t,e,n,r)}function Lg(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(gl.d)(this,function(s){switch(s.label){case 0:return n=Sl(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Tn.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Ng(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=nd(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.bn(t,s).next(function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}})})}function Vg(t,e){var n=Sl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=mp.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=e,s=n.docVersions.get(t);Tl(null!==s),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)})}),s.next(function(){return t.Tn.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}function Fg(t){var e=Sl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function Ug(t,e){var n=Sl(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Tl(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.Ge.updateTargetData(t,c))}}});var a=Qf();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(qg(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Zh.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next(function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return mp.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Kn.vn(t,a)})}).then(function(t){return n.Bn=i,t})}function qg(t,e,n,r,i){var o=nd();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Qf();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof ph&&s.version.isEqual(Zh.min())?(e.removeEntry(n,u),o=o.insert(n,s)):null==a||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):bl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Bg(t,e){var n=Sl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)})}function Hg(t,e){var n=Sl(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ge.getTargetData(t,e).next(function(i){return i?mp.resolve(r=i):n.Ge.allocateTargetId(t).next(function(i){return r=new kp(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function zg(t,e,n){return Object(gl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(gl.d)(this,function(a){switch(a.label){case 0:r=Sl(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ep(s=a.sent()))throw s;return bl("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}})})}function Gg(t,e,n){var r=Sl(t),i=Zh.min(),o=nd();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Sl(t),i=r.qn.get(n);return void 0!==i?mp.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,Gh(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:Zh.min(),n?o:nd())}).next(function(t){return{documents:t,jn:o}})})}function Kg(t,e){var n=Sl(t),r=Sl(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function $g(t){var e=Sl(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Sl(t),i=Qf(),o=Pp(n),s=Eg(e),a=IDBKeyRange.lowerBound(o,!0);return s.qt({index:ip.readTimeIndex,range:a},function(t,e){var n=Rp(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:Mp(o)}})}(e.Qn,t,e.Un)}).then(function(t){var n=t.En;return e.Un=t.readTime,n})}function Wg(t){return Object(gl.b)(this,void 0,void 0,function(){var e;return Object(gl.d)(this,function(n){return[2,(e=Sl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Eg(t),n=Zh.min();return e.qt({index:ip.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Mp(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Un=t})]})})}function Qg(t,e,n,r){return Object(gl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(gl.d)(this,function(p){switch(p.label){case 0:for(i=Sl(t),o=nd(),s=Qf(),a=td(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.zn(l)),a=a.insert(h,e.Hn(l.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,Hg(i,function(t){return Gh(Vh(Ul.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return qg(t,f,s,Zh.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.Ge.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.Ge.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Kn.vn(t,e)})})})]}})})}function Yg(t,e,n){return void 0===n&&(n=nd()),Object(gl.b)(this,void 0,void 0,function(){var r,i;return Object(gl.d)(this,function(o){switch(o.label){case 0:return[4,Hg(t,Gh(Bp(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Sl(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=wd(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var s=r.withResumeToken(zl.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(s.targetId,s),i.Ge.updateTargetData(t,s).next(function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.Ge.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.He.saveNamedQuery(t,e)})})]}})})}var Xg=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return mp.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:wd(n.createTime)}),mp.resolve()},t.prototype.getNamedQuery=function(t,e){return mp.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:Bp(t.bundledQuery),readTime:wd(t.readTime)}}(e)),mp.resolve()},t}(),Jg=function(){function t(){this.Xn=new Kf(Zg.Zn),this.ts=new Kf(Zg.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Zg(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.ss(new Zg(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.os=function(t){var e=this,n=new Hl(new Ul([])),r=new Zg(n,t),i=new Zg(n,t+1),o=[];return this.ts.forEachInRange([r,i],function(t){e.ss(t),o.push(t.key)}),o},t.prototype.cs=function(){var t=this;this.Xn.forEach(function(e){return t.ss(e)})},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new Hl(new Ul([])),n=new Zg(e,t),r=new Zg(e,t+1),i=nd();return this.ts.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Zg(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Zg=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return Hl.comparator(t.key,e.key)||xl(t.hs,e.hs)},t.es=function(t,e){return xl(t.hs,e.hs)||Hl.comparator(t.key,e.key)},t}(),ty=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new Kf(Zg.Zn)}return t.prototype.checkEmpty=function(t){return mp.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new Ap(i,e,n,r);this.Tn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.fs=this.fs.add(new Zg(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return mp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return mp.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return mp.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return mp.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return mp.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Zg(e,0),i=new Zg(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],function(t){var e=n.ds(t.hs);o.push(e)}),mp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Kf(xl);return e.forEach(function(t){var e=new Zg(t,0),i=new Zg(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],function(t){r=r.add(t.hs)})}),mp.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Hl.isDocumentKey(i)||(i=i.child(""));var o=new Zg(new Hl(i),0),s=new Kf(xl);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.hs)),!0)},o),mp.resolve(this._s(s))},t.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.ds(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Tl(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return mp.forEach(e.mutations,function(i){var o=new Zg(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.fs=r})},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new Zg(e,0),r=this.fs.firstAfterOrEqual(n);return mp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return mp.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),ey=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new Hf(Hl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return mp.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=Yf();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),mp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Jf(),i=new Hl(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof dh&&Yh(e,u)&&(r=r.insert(u.key,u))}return mp.resolve(r)},t.prototype.ps=function(t,e){return mp.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new ny(this)},t.prototype.getSize=function(t){return mp.resolve(this.size)},t}(),ny=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Object(gl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)}),mp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(vg),ry=function(){function t(t){this.persistence=t,this.Es=new mg(function(t){return vh(t)},bh),this.lastRemoteSnapshotVersion=Zh.min(),this.highestTargetId=0,this.Ts=0,this.Is=new Jg,this.targetCount=0,this.As=og.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach(function(t,n){return e(n)}),mp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return mp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return mp.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),mp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),mp.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new og(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,mp.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),mp.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,mp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Es.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),mp.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return mp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return mp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),mp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),mp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),mp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return mp.resolve(n)},t.prototype.containsKey=function(t,e){return mp.resolve(this.Is.containsKey(e))},t}(),iy=function(){function t(t,e){var n=this;this.Rs={},this.Me=new yl(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new ry(this),this.Gt=new Kp,this.ze=function(t,e){return new ey(t,function(t){return n.referenceDelegate.bs(t)})}(this.Gt),this.D=new Np(e),this.He=new Xg(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new ty(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;bl("MemoryPersistence","Starting transaction:",t);var i=new oy(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Vs=function(t,e){return mp.or(Object.values(this.Rs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),oy=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(gl.c)(e,t),e}(gp),sy=function(){function t(t){this.persistence=t,this.Ss=new Jg,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw Ol()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),mp.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),mp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),mp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mp.forEach(this.xs,function(r){var i=Hl.fromPath(r);return e.Ns(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Ds=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return mp.or([function(){return mp.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),ay=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function uy(t,e){return"firestore_clients_"+t+"_"+e}function cy(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function ly(t,e){return"firestore_targets_"+t+"_"+e}ay.UNAUTHENTICATED=new ay(null),ay.GOOGLE_CREDENTIALS=new ay("google-credentials-uid"),ay.FIRST_PARTY=new ay("first-party-uid");var hy=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Vl(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(wl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),fy=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Vl(i.error.code,i.error.message)),o?new t(e,i.state,r):(wl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),dy=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=id(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ml(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(wl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),py=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(wl("SharedClientState","Failed to parse online state: "+e),null)},t}(),gy=function(){function t(){this.activeTargetIds=id()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),yy=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new Hf(xl),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=uy(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new gy),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(gl.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(gl.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(uy(this.persistenceKey,r)))&&(o=dy.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(ly(this.persistenceKey,t));if(n){var r=fy.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(ly(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return bl("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){bl("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){bl("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(bl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void wl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable(function(){return Object(gl.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(gl.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(s=function(t){var e=yl.o;if(null!=t)try{var n=JSON.parse(t);Tl("number"==typeof n),e=n}catch(t){wl("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==yl.o&&this.sequenceNumberHandler(s);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new hy(this.currentUser,t,e,n),i=cy(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=cy(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=ly(this.persistenceKey,t),i=new fy(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return dy.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return hy.$s(new ay(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return fy.$s(r,e)},t.prototype.Ys=function(t){return py.$s(t)},t.prototype.hi=function(t){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(bl("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=id();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),my=function(){function t(){this.yi=new gy,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new gy,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),vy=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),by=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){bl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){bl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),wy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},_y=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),Ey=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(gl.c)(e,t),e.prototype.qi=function(t,e,n,r){return new Promise(function(i,o){var s=new pl;s.listenOnce(hl.COMPLETE,function(){try{switch(s.getLastErrorCode()){case ll.NO_ERROR:var e=s.getResponseJson();bl("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ll.TIMEOUT:bl("Connection",'RPC "'+t+'" timed out'),o(new Vl(Ll.DEADLINE_EXCEEDED,"Request time out"));break;case ll.HTTP_ERROR:var n=s.getStatus();if(bl("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ll).indexOf(e)>=0?e:Ll.UNKNOWN}(r.status);o(new Vl(a,r.message))}else o(new Vl(Ll.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Vl(Ll.UNAVAILABLE,"Connection failed."));break;default:Ol()}}finally{bl("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new ol,i=uu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(ds.l)()||Object(ds.n)()||Object(ds.j)()||Object(ds.k)()||Object(ds.o)()||Object(ds.i)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");bl("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new _y({vi:function(t){c?bl("Connection","Not sending because WebChannel is closed:",t):(u||(bl("Connection","Opening WebChannel transport."),a.open(),u=!0),bl("Connection","WebChannel sending:",t),a.send(t))},Pi:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,dl.EventType.OPEN,function(){c||bl("Connection","WebChannel transport opened.")}),h(a,dl.EventType.CLOSE,function(){c||(c=!0,bl("Connection","WebChannel transport closed"),l.$i())}),h(a,dl.EventType.ERROR,function(t){c||(c=!0,_l("Connection","WebChannel transport errored:",t),l.$i(new Vl(Ll.UNAVAILABLE,"The operation could not be completed")))}),h(a,dl.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Tl(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){bl("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Mf[t];if(void 0!==e)return Bf(e)}(i),s=r.message;void 0===o&&(o=Ll.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new Vl(o,s)),a.close()}else bl("Connection","WebChannel received:",n),l.Fi(n)}}),h(i,fl.STAT_EVENT,function(t){10===t.stat?bl("Connection","Detected buffering proxy"):11===t.stat&&bl("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ni()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);bl("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then(function(t){return bl("RestConnection","Received: ",t),t},function(e){throw _l("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+wy[t]},t}());function Oy(){return"undefined"!=typeof window?window:null}function Ty(){return"undefined"!=typeof document?document:null}function Sy(t){return new yd(t,!0)}var Cy=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&bl("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),Iy=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Cy(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===Ll.RESOURCE_EXHAUSTED?(wl(e.toString()),wl("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===Ll.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}})})},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then(function(e){t.sr===n&&t.gr(e)},function(n){e(function(){var e=new Vl(Ll.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)})})},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return Object(gl.b)(t,void 0,void 0,function(){return Object(gl.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.pr=function(t){return bl("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget(function(){return e.sr===t?n():(bl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),xy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,s}return Object(gl.c)(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ol()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(Tl(void 0===e||"string"==typeof e),zl.fromBase64String(e||"")):(Tl(void 0===e||e instanceof Uint8Array),zl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ll.UNKNOWN:Bf(t.code);return new Vl(e,t.message||"")}(a);n=new cd(r,i,o,s||null)}else if("documentChange"in e){i=Td(t,(r=e.documentChange).document.name),o=wd(r.document.updateTime);var a=new ef({mapValue:{fields:r.document.fields}}),u=(s=new dh(i,o,a,{}),r.targetIds||[]);n=new ad(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Td(t,(r=e.documentDelete).document),o=r.readTime?wd(r.readTime):Zh.min(),a=new ph(i,o),n=new ad([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Td(t,(r=e.documentRemove).document),n=new ad([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Ol();var c=e.filter;i=new Uf(r=c.count||0),n=new ud(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return Zh.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Zh.min():e.readTime?wd(e.readTime):Zh.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=Id(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=wh(r)?{documents:Rd(t,r)}:{query:Dd(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=vd(t,e.resumeToken):e.snapshotVersion.compareTo(Zh.min())>0&&(n.readTime=md(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ol()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=Id(this.D),e.removeTarget=t,this.wr(e)},e}(Iy),Ay=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,s.Rr=!1,s}return Object(gl.c)(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(Tl(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(Tl(void 0!==e),t.map(function(t){return function(t,e){var n=wd(t.updateTime?t.updateTime:e);return n.isEqual(Zh.min())&&(n=wd(e)),new _f(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=wd(t.commitTime);return this.listener.Pr(n,e)}return Tl(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=Id(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return kd(e.D,t)})};this.wr(n)},e}(Iy),jy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Object(gl.c)(e,t),e.prototype.Cr=function(){if(this.Dr)throw new Vl(Ll.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Mi(t,e,n,i)}).catch(function(t){throw t.code===Ll.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Ui(t,e,n,i)}).catch(function(t){throw t.code===Ll.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Dr=!1},e}(function(){}),ky=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(wl(e),this.Fr=!1):bl("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),Ny=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return Object(gl.b)(o,void 0,void 0,function(){return Object(gl.d)(this,function(t){switch(t.label){case 0:return qy(this)?(bl("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(gl.b)(this,void 0,void 0,function(){var e;return Object(gl.d)(this,function(n){switch(n.label){case 0:return(e=Sl(t)).Qr.add(4),[4,Dy(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,Ry(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new ky(n,r)};function Ry(t){return Object(gl.b)(this,void 0,void 0,function(){var e,n;return Object(gl.d)(this,function(r){switch(r.label){case 0:if(!qy(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Dy(t){return Object(gl.b)(this,void 0,void 0,function(){var e,n;return Object(gl.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Py(t,e){var n=Sl(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),Uy(n)?Fy(n):nm(n).ar()&&Ly(n,e))}function My(t,e){var n=Sl(t),r=nm(n);n.Ur.delete(e),r.ar()&&Vy(n,e),0===n.Ur.size&&(r.ar()?r.lr():qy(n)&&n.jr.set("Unknown"))}function Ly(t,e){t.Gr.H(e.targetId),nm(t).Ir(e)}function Vy(t,e){t.Gr.H(e),nm(t).Ar(e)}function Fy(t){t.Gr=new hd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),nm(t).start(),t.jr.Or()}function Uy(t){return qy(t)&&!nm(t).cr()&&t.Ur.size>0}function qy(t){return 0===Sl(t).Qr.size}function By(t){t.Gr=void 0}function Hy(t){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(e){return t.Ur.forEach(function(e,n){Ly(t,e)}),[2]})})}function zy(t,e){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(n){return By(t),Uy(t)?(t.jr.Lr(e),Fy(t)):t.jr.set("Unknown"),[2]})})}function Gy(t,e,n){return Object(gl.b)(this,void 0,void 0,function(){var r,i,o;return Object(gl.d)(this,function(s){switch(s.label){case 0:if(t.jr.set("Online"),!(e instanceof cd&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(gl.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),bl("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Ky(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ad?t.Gr.st(e):e instanceof ud?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(Zh.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Fg(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(zl.EMPTY_BYTE_STRING,n.snapshotVersion)),Vy(t,e);var r=new kp(n.target,e,1,n.sequenceNumber);Ly(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return bl("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Ky(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Ky(t,e,n){return Object(gl.b)(this,void 0,void 0,function(){var r=this;return Object(gl.d)(this,function(i){switch(i.label){case 0:if(!Ep(e))throw e;return t.Qr.add(1),[4,Dy(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return Fg(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(gl.b)(r,void 0,void 0,function(){return Object(gl.d)(this,function(e){switch(e.label){case 0:return bl("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,Ry(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function $y(t,e){return e().catch(function(n){return Ky(t,n,e)})}function Wy(t){return Object(gl.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(gl.d)(this,function(s){switch(s.label){case 0:e=Sl(t),n=rm(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return qy(t)&&t.qr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Bg(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=rm(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Ky(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Qy(e)&&Yy(e),[2]}})})}function Qy(t){return qy(t)&&!rm(t).cr()&&t.qr.length>0}function Yy(t){rm(t).start()}function Xy(t){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(e){return rm(t).Sr(),[2]})})}function Jy(t){return Object(gl.b)(this,void 0,void 0,function(){var e,n,r;return Object(gl.d)(this,function(i){for(e=rm(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]})})}function Zy(t,e,n){return Object(gl.b)(this,void 0,void 0,function(){var r,i;return Object(gl.d)(this,function(o){switch(o.label){case 0:return r=t.qr.shift(),i=jp.from(r,e,n),[4,$y(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Wy(t)];case 2:return o.sent(),[2]}})})}function tm(t,e){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(n){switch(n.label){case 0:return e&&rm(t).br?[4,function(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r;return Object(gl.d)(this,function(i){switch(i.label){case 0:return qf(r=e.code)&&r!==Ll.ABORTED?(n=t.qr.shift(),rm(t).hr(),[4,$y(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Wy(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Qy(t)&&Yy(t),[2]}})})}function em(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n;return Object(gl.d)(this,function(r){switch(r.label){case 0:return n=Sl(t),e?(n.Qr.delete(2),[4,Ry(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,Dy(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function nm(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=Sl(t);return r.Cr(),new xy(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:Hy.bind(null,t),Di:zy.bind(null,t),Tr:Gy.bind(null,t)}),t.Kr.push(function(n){return Object(gl.b)(e,void 0,void 0,function(){return Object(gl.d)(this,function(e){switch(e.label){case 0:return n?(t.zr.hr(),Uy(t)?Fy(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),By(t),e.label=3;case 3:return[2]}})})})),t.zr}function rm(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=Sl(t);return r.Cr(),new Ay(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:Xy.bind(null,t),Di:tm.bind(null,t),Vr:Jy.bind(null,t),Pr:Zy.bind(null,t)}),t.Kr.push(function(n){return Object(gl.b)(e,void 0,void 0,function(){return Object(gl.d)(this,function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,Wy(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(bl("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}})})})),t.Hr}var im=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new yp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vl(Ll.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function om(t,e){if(wl("AsyncQueue",e+": "+t),Ep(t))return new Vl(Ll.UNAVAILABLE,e+": "+t);throw t}var sm=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Hl.comparator(e.key,n.key)}:function(t,e){return Hl.comparator(t.key,e.key)},this.keyedMap=Jf(),this.sortedSet=new Hf(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),am=function(){function t(){this.Jr=new Hf(Hl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Ol():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),um=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,sm.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$h(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),cm=function(){this.Xr=void 0,this.listeners=[]},lm=function(){this.queries=new mg(function(t){return Wh(t)},$h),this.onlineState="Unknown",this.Zr=new Set};function hm(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(gl.d)(this,function(c){switch(c.label){case 0:if(n=Sl(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new cm),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=c.sent(),[3,4];case 3:return a=c.sent(),u=om(a,"Initialization of query '"+Qh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&gm(n),[2]}})})}function fm(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(gl.d)(this,function(a){return n=Sl(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function dm(t,e){for(var n=Sl(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&gm(n)}function pm(t,e,n){var r=Sl(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function gm(t){t.Zr.forEach(function(t){t.next()})}var ym=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new um(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=um.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),mm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),vm=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return Td(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?jd(this.D,t.document,!1):new ph(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return wd(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new vm(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||nd()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(gl.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(gl.d)(this,function(o){switch(o.label){case 0:return[4,Qg(this.localStore,new vm(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Yg(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new kg(Object.assign({},this.progress),t))]}})})}}();var bm=function(t){this.key=t},wm=function(t){this.key=t},_m=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=nd(),this.mutatedKeys=nd(),this.po=Xh(t),this.Eo=new sm(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new am,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Fh(this.query)&&i.size===this.query.limit?i.last():null,c=Uh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof dh?e:null;h&&(h=Yh(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Fh(this.query)||Uh(this.query))for(;s.size>this.query.limit;){var l=Fh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:s,Ao:r,Mn:a,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ol()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)}),this.bo(n);var s=e?this.vo():[],a=0===this.yo.size&&this.current?1:0,u=a!==this.mo;return this.mo=a,0!==o.length||u?{snapshot:new um(this.query,t.Eo,i,o,t.mutatedKeys,0===a,u,!1),Po:s}:{Po:s}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new am,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=nd(),this.Eo.forEach(function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))});var n=[];return e.forEach(function(e){t.yo.has(e)||n.push(new wm(e))}),this.yo.forEach(function(t){e.has(t)||n.push(new bm(t))}),n},t.prototype.So=function(t){this._o=t.jn,this.yo=nd();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return um.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),Em=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Om=function(t){this.key=t,this.Co=!1},Tm=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new mg(function(t){return Wh(t)},$h),this.$o=new Map,this.Fo=new Set,this.Oo=new Hf(Hl.comparator),this.ko=new Map,this.Mo=new Jg,this.Lo={},this.Bo=new Map,this.qo=og.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function Sm(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(gl.d)(this,function(a){switch(a.label){case 0:return n=tv(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,Hg(n.localStore,Gh(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Cm(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Py(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Cm(t,e,n,r){return Object(gl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(gl.d)(this,function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Object(gl.b)(this,void 0,void 0,function(){var i,o,s;return Object(gl.d)(this,function(a){switch(a.label){case 0:return(i=e.view.Io(n)).Mn?[4,Gg(t.localStore,e.query,!1).then(function(t){return e.view.Io(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Fm(t,e.targetId,s.Po),s.snapshot)]}})})}(t,e,n,r)},[4,Gg(t.localStore,e,!0)];case 1:return i=l.sent(),o=new _m(e,i.jn),s=o.Io(i.documents),a=sd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Fm(t,n,u.Po),c=new Em(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}})})}function Im(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i;return Object(gl.d)(this,function(o){switch(o.label){case 0:return n=Sl(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter(function(t){return!$h(t,e)})),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,zg(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),My(n.remoteStore,r.targetId),Lm(n,r.targetId)}).catch(lg)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Lm(n,r.targetId),[4,zg(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function xm(t,e,n){return Object(gl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(gl.d)(this,function(a){switch(a.label){case 0:r=ev(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Sl(t),i=Ql.now(),o=e.reduce(function(t,e){return t.add(e.key)},nd());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Kn.bn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=If(c,n.get(c.key));null!=l&&s.push(new kf(c.key,l,rf(l.proto.mapValue),Ef.exists(!0)))}return r.Tn.addMutationBatch(t,i,s,e)})}).then(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new Hf(xl)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Bm(r,i.changes)];case 3:return a.sent(),[4,Wy(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=om(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Am(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r;return Object(gl.d)(this,function(i){switch(i.label){case 0:n=Sl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ug(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.ko.get(e);r&&(Tl(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?Tl(r.Co):t.removedDocuments.size>0&&(Tl(r.Co),r.Co=!1))}),[4,Bm(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,lg(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function jm(t,e,n){var r=Sl(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach(function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Sl(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)}),r&&gm(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function km(t,e,n){return Object(gl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(gl.d)(this,function(c){switch(c.label){case 0:return(r=Sl(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(s=(s=new Hf(Hl.comparator)).insert(o,new ph(o,Zh.min())),a=nd().add(o),u=new od(Zh.min(),new Map,new Kf(xl),s,a),[4,Am(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),qm(r),[3,4];case 2:return[4,zg(r.localStore,e,!1).then(function(){return Lm(r,e,n)}).catch(lg)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Nm(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i;return Object(gl.d)(this,function(o){switch(o.label){case 0:n=Sl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Vg(n.localStore,e)];case 2:return i=o.sent(),Mm(n,r,null),Pm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Bm(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,lg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Rm(t,e,n){return Object(gl.b)(this,void 0,void 0,function(){var r,i;return Object(gl.d)(this,function(o){switch(o.label){case 0:r=Sl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Sl(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Tn.lookupMutationBatch(t,e).next(function(e){return Tl(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Mm(r,e,n),Pm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Bm(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,lg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Dm(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(gl.d)(this,function(a){switch(a.label){case 0:qy((n=Sl(t)).remoteStore)||bl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Sl(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=om(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Pm(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function Mm(t,e,n){var r=Sl(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function Lm(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach(function(e){t.Mo.containsKey(e)||Vm(t,e)})}function Vm(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(My(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),qm(t))}function Fm(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof bm?(t.Mo.addReference(o.key,e),Um(t,o)):o instanceof wm?(bl("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||Vm(t,o.key)):Ol()}}function Um(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(bl("SyncEngine","New document in limbo: "+n),t.Fo.add(r),qm(t))}function qm(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new Hl(Ul.fromString(e)),r=t.qo.next();t.ko.set(r,new Om(n)),t.Oo=t.Oo.insert(n,r),Py(t.remoteStore,new kp(Gh(Vh(n.path)),r,2,yl.o))}}function Bm(t,e,n){return Object(gl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(gl.d)(this,function(a){switch(a.label){case 0:return r=Sl(t),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach(function(t,a){s.push(r.Qo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Rg.Nn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.xo.Tr(i),[4,function(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(gl.d)(this,function(l){switch(l.label){case 0:n=Sl(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return mp.forEach(e,function(e){return mp.forEach(e.Cn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return mp.forEach(e.xn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Ep(r=l.sent()))throw r;return bl("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Bn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Hm(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r;return Object(gl.d)(this,function(i){switch(i.label){case 0:return(n=Sl(t)).currentUser.isEqual(e)?[3,3]:(bl("SyncEngine","User change. New user:",e.toKey()),[4,Lg(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach(function(t){t.forEach(function(t){t.reject(new Vl(Ll.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Bm(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function zm(t,e){var n=Sl(t),r=n.ko.get(e);if(r&&r.Co)return nd().add(r.key);var i=nd(),o=n.$o.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.No.get(a[s]);i=i.unionWith(u.view.To)}return i}function Gm(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i;return Object(gl.d)(this,function(o){switch(o.label){case 0:return[4,Gg((n=Sl(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&Fm(n,e.targetId,i.Po),i)]}})})}function Km(t){return Object(gl.b)(this,void 0,void 0,function(){var e;return Object(gl.d)(this,function(n){return[2,$g((e=Sl(t)).localStore).then(function(t){return Bm(e,t)})]})})}function $m(t,e,n,r){return Object(gl.b)(this,void 0,void 0,function(){var i,o;return Object(gl.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Sl(t),r=Sl(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Jt(t,e).next(function(e){return e?n.Kn.bn(t,e):mp.resolve(null)})})}((i=Sl(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Wy(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Mm(i,e,r||null),Pm(i,e),function(t,e){Sl(Sl(t).Tn).Xt(e)}(i.localStore,e)):Ol(),s.label=4;case 4:return[4,Bm(i,o)];case 5:return s.sent(),[3,7];case 6:bl("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Wm(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(gl.d)(this,function(c){switch(c.label){case 0:return tv(n=Sl(t)),ev(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Qm(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,em(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Py(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(a=[],u=Promise.resolve(),n.$o.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Lm(n,e),zg(n.localStore,e,!0)}),My(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Qm(n,a)];case 5:return c.sent(),function(t){var e=Sl(t);e.ko.forEach(function(t,n){My(e.remoteStore,n)}),e.Mo.cs(),e.ko=new Map,e.Oo=new Hf(Hl.comparator)}(n),n.Uo=!1,[4,em(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Qm(t,e,n){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(gl.d)(this,function(g){switch(g.label){case 0:n=Sl(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.$o.get(a=s[o]))&&0!==c.length?[4,Hg(n.localStore,Gh(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.No.get(h[l]),[4,Gm(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Kg(n.localStore,a)];case 8:return p=g.sent(),[4,Hg(n.localStore,p)];case 9:return u=g.sent(),[4,Cm(n,Ym(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}})})}function Ym(t){return Lh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Xm(t){var e=Sl(t);return Sl(Sl(e.localStore).persistence).gn()}function Jm(t,e,n,r){return Object(gl.b)(this,void 0,void 0,function(){var i,o,s;return Object(gl.d)(this,function(a){switch(a.label){case 0:return(i=Sl(t)).Uo?(bl("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,$g(i.localStore)];case 3:return o=a.sent(),s=od.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Bm(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,zg(i.localStore,e,!0)];case 6:return a.sent(),Lm(i,e,r),[3,8];case 7:Ol(),a.label=8;case 8:return[2]}})})}function Zm(t,e,n){return Object(gl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(gl.d)(this,function(f){switch(f.label){case 0:if(!(r=tv(t)).Uo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.$o.has(s=o[i])?(bl("SyncEngine","Adding an already active target "+s),[3,5]):[4,Kg(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Hg(r.localStore,a)];case 3:return u=f.sent(),[4,Cm(r,Ym(a),u.targetId,!1)];case 4:f.sent(),Py(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(gl.d)(this,function(e){switch(e.label){case 0:return r.$o.has(t)?[4,zg(r.localStore,t,!1).then(function(){My(r.remoteStore,t),Lm(r,t)}).catch(lg)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function tv(t){var e=Sl(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Am.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=km.bind(null,e),e.xo.Tr=dm.bind(null,e.eventManager),e.xo.Ko=pm.bind(null,e.eventManager),e}function ev(t){var e=Sl(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Rm.bind(null,e),e}var nv=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(e){switch(e.label){case 0:return this.D=Sy(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}})})},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return Mg(this.persistence,new Dg,t.initialUser,this.D)},t.prototype.Go=function(t){return new iy(sy.Cs,this.D)},t.prototype.jo=function(t){return new my},t.prototype.terminate=function(){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),rv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(gl.c)(e,t),e.prototype.initialize=function(e){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Wg(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,ev(this.Jo.syncEngine)];case 4:return n.sent(),[4,Wy(this.Jo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ho=function(t){return Mg(this.persistence,new Dg,t.initialUser,this.D)},e.prototype.zo=function(t){return new dg(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=jg(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Xp.withCacheSize(this.cacheSizeBytes):Xp.DEFAULT;return new Ig(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Oy(),Ty(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new my},e}(nv),iv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(gl.c)(e,t),e.prototype.initialize=function(e){return Object(gl.b)(this,void 0,void 0,function(){var n,r=this;return Object(gl.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof yy?(this.sharedClientState.syncEngine={wi:$m.bind(null,n),_i:Jm.bind(null,n),mi:Zm.bind(null,n),gn:Xm.bind(null,n),di:Km.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en(function(t){return Object(gl.b)(r,void 0,void 0,function(){return Object(gl.d)(this,function(e){switch(e.label){case 0:return[4,Wm(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jo=function(t){var e=Oy();if(!yy.At(e))throw new Vl(Ll.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=jg(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new yy(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(rv),ov=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n=this;return Object(gl.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return jm(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Hm.bind(null,this.syncEngine),[4,em(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new lm},t.prototype.createDatastore=function(t){var e=Sy(t.databaseInfo.databaseId),n=new Ey(t.databaseInfo);return function(t,e,n){return new jy(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return jm(s.syncEngine,t,0)},o=by.At()?new by:new vy,new Ny(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Tm(t,e,n,r,i,o);return s&&(a.Uo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(gl.b)(this,void 0,void 0,function(){var e;return Object(gl.d)(this,function(n){switch(n.label){case 0:return e=Sl(t),bl("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,Dy(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),sv=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),av=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new yp,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Wo=function(){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},t.prototype.ec=function(){return Object(gl.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(gl.d)(this,function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new mm(JSON.parse(r),t.length+n)]}})})},t.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.nc=function(){return Object(gl.b)(this,void 0,void 0,function(){var t,e;return Object(gl.d)(this,function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.ic=function(t){return Object(gl.b)(this,void 0,void 0,function(){var e;return Object(gl.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Object(gl.b)(this,void 0,void 0,function(){var t,e;return Object(gl.d)(this,function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(gl.b)(this,void 0,void 0,function(){var e,n=this;return Object(gl.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Vl(Ll.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(gl.d)(this,function(u){switch(u.label){case 0:return n=Sl(t),r=Id(n.D)+"/documents",i={documents:e.map(function(t){return Od(n.D,t)})},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Tl(!!e.found);var n=Td(t,e.found.name),r=wd(e.found.updateTime),i=new ef({mapValue:{fields:e.found.fields}});return new dh(n,r,i,{})}(t,e):"missing"in e?function(t,e){Tl(!!e.missing),Tl(!!e.readTime);var n=Td(t,e.missing),r=wd(e.readTime);return new ph(n,r)}(t,e):Ol()}(n.D,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Tl(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof ph||t instanceof dh?n.recordVersion(t):Ol()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Vf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(gl.b)(this,void 0,void 0,function(){var t,e=this;return Object(gl.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Hl.fromPath(n);e.mutations.push(new Ff(r,e.precondition(r)))}),[4,function(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i;return Object(gl.d)(this,function(o){switch(o.label){case 0:return n=Sl(t),r=Id(n.D)+"/documents",i={writes:e.map(function(t){return kd(n.D,t)})},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof dh)e=t.version;else{if(!(t instanceof ph))throw Ol();e=Zh.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Vl(Ll.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ef.updateTime(e):Ef.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Zh.min()))throw new Vl(Ll.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ef.updateTime(e)}return Ef.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),uv=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new Cy(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi(function(){return Object(gl.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(gl.d)(this,function(r){return t=new av(this.datastore),(e=this.uc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.hc(t)})})}).catch(function(t){n.hc(t)}),[2]})})})},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!Dl(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!qf(e)}return!1},t}(),cv=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=ay.UNAUTHENTICATED,this.clientId=Il.u(),this.credentialListener=function(){},this.receivedInitialUser=new yp,this.credentials.setChangeListener(function(t){bl("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Vl(Ll.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new yp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(gl.b)(t,void 0,void 0,function(){var t,n;return Object(gl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=om(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function lv(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(gl.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),bl("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(gl.b)(i,void 0,void 0,function(){return Object(gl.d)(this,function(t){switch(t.label){case 0:return[4,Lg(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function hv(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r;return Object(gl.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,fv(t)];case 1:return n=i.sent(),bl("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(gl.b)(this,void 0,void 0,function(){var n,r;return Object(gl.d)(this,function(i){switch(i.label){case 0:return(n=Sl(t)).asyncQueue.verifyOperationInProgress(),bl("RemoteStore","RemoteStore received new credentials"),r=qy(n),n.Qr.add(3),[4,Dy(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,Ry(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function fv(t){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(bl("FirestoreClient","Using default OfflineComponentProvider"),[4,lv(t,new nv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function dv(t){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(bl("FirestoreClient","Using default OnlineComponentProvider"),[4,hv(t,new ov)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function pv(t){return fv(t).then(function(t){return t.persistence})}function gv(t){return fv(t).then(function(t){return t.localStore})}function yv(t){return dv(t).then(function(t){return t.remoteStore})}function mv(t){return dv(t).then(function(t){return t.syncEngine})}function vv(t){return Object(gl.b)(this,void 0,void 0,function(){var e,n;return Object(gl.d)(this,function(r){switch(r.label){case 0:return[4,dv(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Sm.bind(null,e.syncEngine),n.onUnlisten=Im.bind(null,e.syncEngine),n)]}})})}function bv(t,e,n){var r=this;void 0===n&&(n={});var i=new yp;return t.asyncQueue.enqueueAndForget(function(){return Object(gl.b)(r,void 0,void 0,function(){var r;return Object(gl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new sv({next:function(o){e.enqueueAndForget(function(){return fm(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Vl(Ll.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Vl(Ll.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new ym(Vh(n.path),o,{includeMetadataChanges:!0,uo:!0});return hm(t,s)},[4,vv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function wv(t,e,n){var r=this;void 0===n&&(n={});var i=new yp;return t.asyncQueue.enqueueAndForget(function(){return Object(gl.b)(r,void 0,void 0,function(){var r;return Object(gl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new sv({next:function(n){e.enqueueAndForget(function(){return fm(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Vl(Ll.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new ym(n,o,{includeMetadataChanges:!0,uo:!0});return hm(t,s)},[4,vv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var _v=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},Ev=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Ov=new Map,Tv=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Sv=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(ay.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Cv=function(){function t(t){var e=this;this.fc=null,this.currentUser=ay.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.dc!==e?(bl("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Tl("string"==typeof n.accessToken),new Tv(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return Tl(null===t||"string"==typeof t),new ay(t)},t}(),Iv=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=ay.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),xv=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new Iv(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(ay.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Av(t,e,n){if(!n)throw new Vl(Ll.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function jv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function kv(t,e,n,r){if(!0===e&&!0===r)throw new Vl(Ll.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Nv(t){if(!Hl.isDocumentKey(t))throw new Vl(Ll.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Rv(t){if(Hl.isDocumentKey(t))throw new Vl(Ll.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Dv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ol()}function Pv(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Vl(Ll.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Dv(t);throw new Vl(Ll.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Mv(t,e){if(e<=0)throw new Vl(Ll.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Lv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Vl(Ll.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Vl(Ll.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,kv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Vv=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Lv({}),this._settingsFrozen=!1,t instanceof Ev?(this._databaseId=t,this._credentials=new Sv):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Vl(Ll.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ev(t.options.projectId)}(t),this._credentials=new Cv(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Vl(Ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Vl(Ll.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lv(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Sv;switch(t.type){case"gapi":var e=t.client;return Tl(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new xv(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Vl(Ll.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Ov.get(this))&&(bl("ComponentProvider","Removing Datastore"),Ov.delete(this),t.terminate()),Promise.resolve();var t},t}(),Fv=function(t){this._delegate=t},Uv=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Bv(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),qv=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Bv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Vh(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(gl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Uv(this.firestore,null,new Hl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(qv);function Hv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Fv&&(t=t._delegate),Av("collection","path",e),t instanceof Vv)return Rv(n=Ul.fromString.apply(Ul,Object(gl.f)([e],r))),new Bv(t,null,n);if(!(t instanceof Uv||t instanceof Bv))throw new Vl(Ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Rv(n=Ul.fromString.apply(Ul,Object(gl.f)([t.path],r)).child(Ul.fromString(e))),new Bv(t.firestore,null,n)}function zv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Fv&&(t=t._delegate),1===arguments.length&&(e=Il.u()),Av("doc","path",e),t instanceof Vv)return Nv(n=Ul.fromString.apply(Ul,Object(gl.f)([e],r))),new Uv(t,null,new Hl(n));if(!(t instanceof Uv||t instanceof Bv))throw new Vl(Ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Nv(n=t._path.child(Ul.fromString.apply(Ul,Object(gl.f)([e],r)))),new Uv(t.firestore,t instanceof Bv?t._converter:null,new Hl(n))}function Gv(t,e){return t instanceof Fv&&(t=t._delegate),e instanceof Fv&&(e=e._delegate),(t instanceof Uv||t instanceof Bv)&&(e instanceof Uv||e instanceof Bv)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Kv(t,e){return t instanceof Fv&&(t=t._delegate),e instanceof Fv&&(e=e._delegate),t instanceof qv&&e instanceof qv&&t.firestore===e.firestore&&$h(t._query,e._query)&&t._converter===e._converter}var $v=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new Cy(this,"async_queue_retry"),this.bc=function(){var e=Ty();e&&bl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=Ty();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=Ty();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},t.prototype.Vc=function(){return Object(gl.b)(this,void 0,void 0,function(){var t,e=this;return Object(gl.d)(this,function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!Ep(t=n.sent()))throw t;return bl("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi(function(){return e.Vc()}),n.label=5;case 5:return[2]}})})},t.prototype.Pc=function(t){var e=this,n=this.yc.then(function(){return e.Ac=!0,t().catch(function(t){throw e.Ic=t,e.Ac=!1,wl("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Ac=!1,t})});return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=im.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&Ol()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Object(gl.b)(this,void 0,void 0,function(){var t;return Object(gl.d)(this,function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then(function(){e.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()})},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function Wv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new yp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Qv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new $v,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(gl.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Xv(this),this._firestoreClient.terminate()},e}(Vv);function Yv(t){return t._firestoreClient||Xv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Xv(t){var e=t._freezeSettings(),n=function(t,e,n){return new _v(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new cv(t._credentials,t._queue,n)}function Jv(t,e,n){var r=this,i=new yp;return t.asyncQueue.enqueue(function(){return Object(gl.b)(r,void 0,void 0,function(){var r;return Object(gl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,lv(t,n)];case 1:return o.sent(),[4,hv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ll.FAILED_PRECONDITION||t.code===Ll.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Zv(t){if(t._initialized||t._terminated)throw new Vl(Ll.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var tb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),eb=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(zl.fromBase64String(e))}catch(e){throw new Vl(Ll.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(zl.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),nb=function(t){this._methodName=t},rb=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Vl(Ll.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Vl(Ll.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return xl(this._lat,t._lat)||xl(this._long,t._long)},t}(),ib=/^__.*__$/,ob=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new kf(t,this.data,this.fieldMask,e,this.fieldTransforms):new jf(t,this.data,e,this.fieldTransforms)},t}(),sb=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new kf(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function ab(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ol()}}var ub=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return xb(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(ab(this.Fc)&&ib.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),cb=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||Sy(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new ub({Fc:t,methodName:e,Kc:n,path:Bl.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function lb(t){var e=t._freezeSettings(),n=Sy(t._databaseId);return new cb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hb(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);Tb("Data must be an object, but it was:",s,r);var a,u,c=Eb(r,s);if(o.merge)a=new tf(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Sb(e,f[h],n);if(!s.contains(d))throw new Vl(Ll.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Ab(l,d)||l.push(d)}a=new tf(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new ob(new ef(c),a,u)}var fb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gl.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(nb);function db(t,e,n){return new ub({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gl.c)(e,t),e.prototype._toFieldTransform=function(t){return new wf(t.path,new ff)},e.prototype.isEqual=function(t){return t instanceof e},e}(nb),gb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(gl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=db(this,t,!0),n=this.jc.map(function(t){return _b(t,e)}),r=new df(n);return new wf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(nb),yb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(gl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=db(this,t,!0),n=this.jc.map(function(t){return _b(t,e)}),r=new gf(n);return new wf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(nb),mb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Object(gl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new mf(t.D,af(t.D,this.Gc));return new wf(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(nb);function vb(t,e,n,r){var i=t.Wc(1,e,n);Tb("Data must be an object, but it was:",i,r);var o=[],s=new nf;Nl(r,function(t,r){var a=Ib(e,t,n);r instanceof Fv&&(r=r._delegate);var u=i.Bc(a);if(r instanceof fb)o.push(a);else{var c=_b(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new tf(o);return new sb(s.v(),a,i.fieldTransforms)}function bb(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[Sb(e,r,n)],u=[i];if(o.length%2!=0)throw new Vl(Ll.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Sb(e,o[c])),u.push(o[c+1]);for(var l=[],h=new nf,f=a.length-1;f>=0;--f)if(!Ab(l,a[f])){var d=a[f],p=u[f];p instanceof Fv&&(p=p._delegate);var g=s.Bc(d);if(p instanceof fb)l.push(d);else{var y=_b(p,g);null!=y&&(l.push(d),h.set(d,y))}}var m=new tf(l);return new sb(h.v(),m,s.fieldTransforms)}function wb(t,e,n,r){return void 0===r&&(r=!1),_b(n,t.Wc(r?4:3,e))}function _b(t,e){if(t instanceof Fv&&(t=t._delegate),Ob(t))return Tb("Unsupported field value:",e,t),Eb(t,e);if(t instanceof nb)return function(t,e){if(!ab(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=_b(o[i],e.qc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Fv&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return af(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ql.fromDate(t);return{timestampValue:md(e.D,n)}}if(t instanceof Ql)return n=new Ql(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:md(e.D,n)};if(t instanceof rb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof eb)return{bytesValue:vd(e.D,t._byteString)};if(t instanceof Uv){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:_d(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+Dv(t))}(t,e)}function Eb(t,e){var n={};return Rl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nl(t,function(t,r){var i=_b(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Ob(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ql||t instanceof rb||t instanceof eb||t instanceof Uv||t instanceof nb)}function Tb(t,e,n){if(!Ob(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Dv(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function Sb(t,e,n){if(e instanceof Fv&&(e=e._delegate),e instanceof tb)return e._internalPath;if("string"==typeof e)return Ib(t,e);throw xb("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Cb=new RegExp("[~\\*/\\[\\]]");function Ib(t,e,n){if(e.search(Cb)>=0)throw xb("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(tb.bind.apply(tb,Object(gl.f)([void 0],e.split(".")))))._internalPath}catch(r){throw xb("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function xb(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Vl(Ll.INVALID_ARGUMENT,(a+=". ")+t+u)}function Ab(t,e){return t.some(function(t){return t.isEqual(e)})}var jb=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Uv(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new kb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(Nb("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),kb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gl.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(jb);function Nb(t,e){return"string"==typeof e?Ib(t,e):e instanceof Fv?e._delegate._internalPath:e._internalPath}var Rb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Db=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(gl.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Pb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(Nb("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(jb),Pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gl.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Db),Mb=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Rb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Pb(n._firestore,n._userDataWriter,r.key,r,new Rb(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Vl(Ll.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Pb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Rb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Pb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Rb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Lb(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Lb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ol()}}function Vb(t,e){return t instanceof Db&&e instanceof Db?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Mb&&e instanceof Mb&&t._firestore===e._firestore&&Kv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Fb(t){if(Uh(t)&&0===t.explicitOrderBy.length)throw new Vl(Ll.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ub=function(){};function qb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Bb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Object(gl.c)(e,t),e.prototype._apply=function(t){var e=lb(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Qb(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Wb(r,t,l[c]));a={arrayValue:{values:u}}}else a=Wb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Qb(s,o),a=wb(n,"where",s,"in"===o||"not-in"===o);var h=_h.create(i,o,a);return function(t,e){if(e.g()){var n=Bh(t);if(null!==n&&!n.isEqual(e.field))throw new Vl(Ll.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=qh(t);null!==r&&Yb(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Vl(Ll.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new qv(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Mh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Ub),Hb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Object(gl.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Nh(e,n);return function(t,e){if(null===qh(t)){var n=Bh(t);null!==n&&Yb(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new qv(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Mh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Ub),zb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(gl.c)(e,t),e.prototype._apply=function(t){return new qv(t.firestore,t._converter,Kh(t._query,this.Xc,this.Zc))},e}(Ub),Gb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(gl.c)(e,t),e.prototype._apply=function(t){var e=$b(t,this.type,this.ta,this.ea);return new qv(t.firestore,t._converter,function(t,e){return new Mh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Ub),Kb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(gl.c)(e,t),e.prototype._apply=function(t){var e=$b(t,this.type,this.ta,this.ea);return new qv(t.firestore,t._converter,function(t,e){return new Mh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Ub);function $b(t,e,n,r){if(n[0]instanceof Fv&&(n[0]=n[0]._delegate),n[0]instanceof jb)return function(t,e,n,r,i){if(!r)throw new Vl(Ll.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=zh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(sh(e,r.key));else{var c=r.field(u.field);if(Yl(c))throw new Vl(Ll.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Vl(Ll.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new jh(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=lb(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Vl(Ll.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Hh(t)&&-1!==c.indexOf("/"))throw new Vl(Ll.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Ul.fromString(c));if(!Hl.isDocumentKey(l))throw new Vl(Ll.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Hl(l);a.push(sh(e,h))}else{var f=wb(n,r,c);a.push(f)}}return new jh(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Wb(t,e,n){if(n instanceof Fv&&(n=n._delegate),"string"==typeof n){if(""===n)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hh(e)&&-1!==n.indexOf("/"))throw new Vl(Ll.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ul.fromString(n));if(!Hl.isDocumentKey(r))throw new Vl(Ll.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return sh(t,new Hl(r))}if(n instanceof Uv)return sh(t,n._key);throw new Vl(Ll.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Dv(n)+".")}function Qb(t,e){if(!Array.isArray(t)||0===t.length)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Yb(t,e,n){if(!n.isEqual(e))throw new Vl(Ll.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Xb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Zl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $l(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Wl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ol()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Nl(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new rb($l(t.latitude),$l(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Xl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Jl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Kl(t);return new Ql(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Ul.fromString(t);Tl(Kd(n));var r=new Ev(n.get(1),n.get(3)),i=new Hl(n.popFirst(5));return r.isEqual(e)||wl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Jb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Zb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(gl.c)(e,t),e.prototype.convertBytes=function(t){return new eb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Uv(this.firestore,null,e)},e}(Xb),tw=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=lb(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=ew(t,this._firestore),i=Jb(r._converter,e,n),o=hb(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Ef.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=ew(t,this._firestore);return e instanceof Fv&&(e=e._delegate),o="string"==typeof e||e instanceof tb?bb(this._dataReader,"WriteBatch.update",s._key,e,n,r):vb(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ef.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=ew(t,this._firestore);return this._mutations=this._mutations.concat(new Vf(e._key,Ef.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Vl(Ll.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function ew(t,e){if(t instanceof Fv&&(t=t._delegate),t.firestore!==e)throw new Vl(Ll.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var nw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(gl.c)(e,t),e.prototype.convertBytes=function(t){return new eb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Uv(this.firestore,null,e)},e}(Xb);function rw(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Pv(t,Uv);var o=Pv(t.firestore,Qv),s=lb(o);return e instanceof Fv&&(e=e._delegate),ow(o,[("string"==typeof e||e instanceof tb?bb(s,"updateDoc",t._key,e,n,r):vb(s,"updateDoc",t._key,e)).toMutation(t._key,Ef.exists(!0))])}function iw(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Fv&&(t=t._delegate);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Wv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Wv(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Uv)c=Pv(t.firestore,Qv),l=Vh(t._key.path),u={next:function(e){i[a]&&i[a](sw(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Pv(t,qv);c=Pv(d.firestore,Qv),l=d._query;var p=new nw(c);u={next:function(t){i[a]&&i[a](new Mb(c,p,d,t))},error:i[a+1],complete:i[a+2]},Fb(t._query)}return function(t,e,n,r){var i=this,o=new sv(r),s=new ym(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(gl.b)(i,void 0,void 0,function(){var e;return Object(gl.d)(this,function(n){switch(n.label){case 0:return e=hm,[4,vv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(gl.b)(i,void 0,void 0,function(){var e;return Object(gl.d)(this,function(n){switch(n.label){case 0:return e=fm,[4,vv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Yv(c),l,h,u)}function ow(t,e){return function(t,e){var n=this,r=new yp;return t.asyncQueue.enqueueAndForget(function(){return Object(gl.b)(n,void 0,void 0,function(){var n;return Object(gl.d)(this,function(i){switch(i.label){case 0:return n=xm,[4,mv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Yv(t),e)}function sw(t,e,n){var r=n.docs.get(e._key),i=new nw(t);return new Db(t,i,e._key,r,new Rb(n.hasPendingWrites,n.fromCache),e._converter)}var aw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(gl.c)(e,t),e.prototype.get=function(e){var n=this,r=ew(e,this._firestore),i=new nw(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Db(n._firestore,i,r._key,t._document,new Rb(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=lb(t)}return t.prototype.get=function(t){var e=this,n=ew(t,this._firestore),r=new Zb(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Ol();var i=t[0];if(i instanceof ph)return new jb(e._firestore,r,n._key,null,n._converter);if(i instanceof dh)return new jb(e._firestore,r,i.key,i,n._converter);throw Ol()})},t.prototype.set=function(t,e,n){var r=ew(t,this._firestore),i=Jb(r._converter,e,n),o=hb(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=ew(t,this._firestore);return e instanceof Fv&&(e=e._delegate),o="string"==typeof e||e instanceof tb?bb(this._dataReader,"Transaction.update",s._key,e,n,r):vb(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=ew(t,this._firestore);return this._transaction.delete(e._key),this},t}());function uw(){if("undefined"==typeof Uint8Array)throw new Vl(Ll.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function cw(){if("undefined"==typeof atob)throw new Vl(Ll.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var lw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gl.c)(e,t),e.fromBase64String=function(t){return cw(),new e(eb.fromBase64String(t))},e.fromUint8Array=function(t){return uw(),new e(eb.fromUint8Array(t))},e.prototype.toBase64=function(){return cw(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return uw(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Fv),hw=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Zv(t=Pv(t,Qv));var n=Yv(t),r=t._freezeSettings(),i=new ov;return Jv(n,i,new rv(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Zv(t=Pv(t,Qv));var e=Yv(t),n=t._freezeSettings(),r=new ov;return Jv(e,r,new iv(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Vl(Ll.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new yp;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(gl.b)(e,void 0,void 0,function(){var e;return Object(gl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(gl.b)(this,void 0,void 0,function(){return Object(gl.d)(this,function(e){switch(e.label){case 0:return bp.At()?[4,bp.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(jg(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),fw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Ev||(i.sa=e),i}return Object(gl.c)(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Pv(t,Vv))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&_l("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(gl.b)(e,void 0,void 0,function(){var e,n;return Object(gl.d)(this,function(r){switch(r.label){case 0:return[4,pv(t)];case 1:return e=r.sent(),[4,yv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Sl(t);return e.Qr.delete(0),Ry(e)}(n))]}})})})}(Yv(Pv(this._delegate,Qv)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(gl.b)(e,void 0,void 0,function(){var e,n;return Object(gl.d)(this,function(r){switch(r.label){case 0:return[4,pv(t)];case 1:return e=r.sent(),[4,yv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(gl.b)(this,void 0,void 0,function(){var e;return Object(gl.d)(this,function(n){switch(n.label){case 0:return(e=Sl(t)).Qr.add(0),[4,Dy(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}(Yv(Pv(this._delegate,Qv)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&kv("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new yp;return t.asyncQueue.enqueueAndForget(function(){return Object(gl.b)(e,void 0,void 0,function(){var e;return Object(gl.d)(this,function(r){switch(r.label){case 0:return e=Dm,[4,mv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Yv(Pv(this._delegate,Qv)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new sv(e);return t.asyncQueue.enqueueAndForget(function(){return Object(gl.b)(n,void 0,void 0,function(){var e;return Object(gl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Sl(t).Zr.add(e),e.next()},[4,vv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(gl.b)(n,void 0,void 0,function(){var e;return Object(gl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Sl(t).Zr.delete(e)},[4,vv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Yv(t=Pv(t,Qv)),Wv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new Vl(Ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Cw(this,Hv(this._delegate,t))}catch(t){throw vw(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new mw(this,zv(this._delegate,t))}catch(t){throw vw(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Ow(this,function(t,e){if(t=Pv(t,Vv),Av("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new qv(t,null,function(t){return new Mh(Ul.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw vw(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new yp;return t.asyncQueue.enqueueAndForget(function(){return Object(gl.b)(n,void 0,void 0,function(){var n;return Object(gl.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return dv(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new uv(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Yv(t),function(n){return e(new aw(t,n))})}(this._delegate,function(n){return t(new pw(e,n))})},e.prototype.batch=function(){var t=this;return Yv(this._delegate),new gw(new tw(this._delegate,function(e){return ow(t._delegate,e)}))},e.prototype.loadBundle=function(t){throw new Vl(Ll.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Vl(Ll.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Fv),dw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(gl.c)(e,t),e.prototype.convertBytes=function(t){return new lw(new eb(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return mw.ia(e,this.firestore,null)},e}(Xb),pw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new dw(e),r}return Object(gl.c)(e,t),e.prototype.get=function(t){var e=this,n=Iw(t);return this._delegate.get(n).then(function(t){return new _w(e._firestore,new Db(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},e.prototype.set=function(t,e,n){var r=Iw(t);return n?(jv("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Iw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(gl.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Iw(t);return this._delegate.delete(e),this},e}(Fv),gw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gl.c)(e,t),e.prototype.set=function(t,e,n){var r=Iw(t);return n?(jv("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Iw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(gl.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Iw(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(Fv),yw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Object(gl.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new Pb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Ew(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new dw(t),n),i.set(n,o)),o},e}(Fv);yw.oa=new WeakMap;var mw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new dw(e),r}return Object(gl.c)(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new Vl(Ll.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Uv(n._delegate,r,new Hl(t)))},e.ia=function(t,n,r){return new e(n,new Uv(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Cw(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Cw(this.firestore,Hv(this._delegate,t))}catch(t){throw vw(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Fv&&(t=t._delegate),t instanceof Uv&&Gv(this._delegate,t)},e.prototype.set=function(t,e){e=jv("DocumentReference.set",e);try{return function(t,e,n){t=Pv(t,Uv);var r=Pv(t.firestore,Qv),i=Jb(t._converter,e,n);return ow(r,[hb(lb(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Ef.none())])}(this._delegate,t,e)}catch(t){throw vw(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?rw(this._delegate,t):rw.apply(void 0,Object(gl.f)([this._delegate,t,e],n))}catch(t){throw vw(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return ow(Pv((t=this._delegate).firestore,Qv),[new Vf(t._key,Ef.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=bw(e),i=ww(e,function(e){return new _w(t.firestore,new Db(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return iw(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Pv(t,Uv);var e=Pv(t.firestore,Qv),n=Yv(e),r=new nw(e);return function(t,e){var n=this,r=new yp;return t.asyncQueue.enqueueAndForget(function(){return Object(gl.b)(n,void 0,void 0,function(){var n;return Object(gl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(gl.b)(this,void 0,void 0,function(){var r,i;return Object(gl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Sl(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof dh?n.resolve(i):i instanceof ph?n.resolve(null):n.reject(new Vl(Ll.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=om(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,gv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Db(e,r,t._key,n,new Rb(n instanceof dh&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Pv(t,Uv);var e=Pv(t.firestore,Qv);return bv(Yv(e),t._key,{source:"server"}).then(function(n){return sw(e,t,n)})}(this._delegate):function(t){t=Pv(t,Uv);var e=Pv(t.firestore,Qv);return bv(Yv(e),t._key).then(function(n){return sw(e,t,n)})}(this._delegate)).then(function(t){return new _w(e.firestore,new Db(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?yw.ra(this.firestore,t):null))},e}(Fv);function vw(t,e,n){return t.message=t.message.replace(e,n),t}function bw(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Wv(r))return r}return{}}function ww(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Wv(t[0])?t[0]:Wv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var _w=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(gl.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new mw(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return Vb(this._delegate,t._delegate)},e}(Fv),Ew=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gl.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(_w),Ow=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new dw(e),r}return Object(gl.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,qb(this._delegate,function(t,e,n){var r=e,i=Nb("where",t);return new Bb(i,r,n)}(t,n,r)))}catch(t){throw vw(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,qb(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Nb("orderBy",t);return new Hb(r,n)}(t,n)))}catch(t){throw vw(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,qb(this._delegate,function(t){return Mv("limit",t),new zb("limit",t,"F")}(t)))}catch(t){throw vw(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,qb(this._delegate,function(t){return Mv("limitToLast",t),new zb("limitToLast",t,"L")}(t)))}catch(t){throw vw(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Gb("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw vw(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Gb("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw vw(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kb("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw vw(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kb("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw vw(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Kv(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Pv(t,qv);var e=Pv(t.firestore,Qv),n=Yv(e),r=new nw(e);return function(t,e){var n=this,r=new yp;return t.asyncQueue.enqueueAndForget(function(){return Object(gl.b)(n,void 0,void 0,function(){var n;return Object(gl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(gl.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(gl.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Gg(t,e,!0)];case 1:return a=u.sent(),r=new _m(e,a.jn),i=r.Io(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=om(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,gv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Mb(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Pv(t,qv);var e=Pv(t.firestore,Qv),n=Yv(e),r=new nw(e);return wv(n,t._query,{source:"server"}).then(function(n){return new Mb(e,r,t,n)})}(this._delegate):function(t){t=Pv(t,qv);var e=Pv(t.firestore,Qv),n=Yv(e),r=new nw(e);return Fb(t._query),wv(n,t._query).then(function(n){return new Mb(e,r,t,n)})}(this._delegate)).then(function(t){return new Sw(e.firestore,new Mb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=bw(e),i=ww(e,function(e){return new Sw(t.firestore,new Mb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return iw(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?yw.ra(this.firestore,t):null))},e}(Fv),Tw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(gl.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Ew(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(Fv),Sw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(gl.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Ow(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Ew(t._firestore,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Tw(e._firestore,t)})},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Ew(n._firestore,r))})},e.prototype.isEqual=function(t){return Vb(this._delegate,t._delegate)},e}(Fv),Cw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(gl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new mw(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new mw(this.firestore,void 0===t?zv(this._delegate):zv(this._delegate,t))}catch(t){throw vw(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Pv(t.firestore,Qv),r=zv(t),i=Jb(t._converter,e);return ow(n,[hb(lb(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Ef.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new mw(e.firestore,t)})},e.prototype.isEqual=function(t){return Gv(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?yw.ra(this.firestore,t):null))},e}(Ow);function Iw(t){return t instanceof Fv&&(t=t._delegate),Pv(t,Uv)}var xw,Aw=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(tb.bind.apply(tb,Object(gl.f)([void 0],e))))||this}return Object(gl.c)(e,t),e.documentId=function(){return new e(Bl.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof Fv&&(t=t._delegate),t instanceof tb&&this._delegate._internalPath.isEqual(t._internalPath)},e}(Fv),jw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gl.c)(e,t),e.serverTimestamp=function(){var t=new pb("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new fb("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new gb("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yb("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new mb("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(Fv),kw=n("/6Yf"),Nw={Firestore:fw,GeoPoint:rb,Timestamp:Ql,Blob:lw,Transaction:pw,WriteBatch:gw,DocumentReference:mw,DocumentSnapshot:_w,Query:Ow,QueryDocumentSnapshot:Ew,QuerySnapshot:Sw,CollectionReference:Cw,FieldPath:Aw,FieldValue:jw,setLogLevel:function(t){ml.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new kw.a("firestore",function(t){return function(t,e){return new fw(t,new Qv(t,e),new hw)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Nw)))})(xw=hs.a),xw.registerVersion("@firebase/firestore","2.2.1");var Rw=n("VRyK"),Dw=n("qgXg"),Pw=n("Ylt2");class Mw extends hn.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Lw(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new fn.a;if(this.isStopped||this.hasError?o=nr.a.EMPTY:(this.observers.push(t),o=new Pw.a(this,t)),r&&t.add(t=new us.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Dw.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Lw{constructor(t,e){this.time=t,this.value=e}}function Vw(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Mw(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Fw(t,e){return e?An(()=>t,e):An(()=>t)}var Uw=n("tf+s");const qw=new r.r("angularfire2.auth.use-emulator"),Bw=new r.r("angularfire2.auth.settings"),Hw=new r.r("angularfire2.auth.tenant-id"),zw=new r.r("angularfire2.auth.langugage-code"),Gw=new r.r("angularfire2.auth.use-device-language"),Kw=new r.r("angularfire.auth.persistence");let $w=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new cs.d(i),f=Object(cs.h)(h),d=new hn.a,p=Object(Se.a)(void 0).pipe(Object(us.b)(h.outsideAngular),An(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(mt.a)(()=>Object(cs.g)(t,i,e)),Object(mt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(cs.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Vw({bufferSize:1,refCount:!1}));if(M(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Se.a)(null);else{p.pipe(tr()).subscribe();const t=p.pipe(An(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Vw({bufferSize:1,refCount:!1})),e=t=>new gt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(An(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(An(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Fw(n),Object(Uw.a)(h.outsideAngular),Object(us.b)(h.insideAngular)),this.user=t.pipe(Fw(r),Object(Uw.a)(h.outsideAngular),Object(us.b)(h.insideAngular)),this.idToken=this.user.pipe(An(t=>t?Object(bt.a)(t.getIdToken()):Object(Se.a)(null))),this.idTokenResult=this.user.pipe(An(t=>t?Object(bt.a)(t.getIdTokenResult()):Object(Se.a)(null))),this.credential=Object(Rw.a)(t,d,this.authState.pipe(Ae(t=>!t))).pipe(Object(mt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Uw.a)(h.outsideAngular),Object(us.b)(h.insideAngular))}return Object(cs.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(cs.c),r.Rb(cs.b,8),r.Rb(r.C),r.Rb(r.A),r.Rb(qw,8),r.Rb(Bw,8),r.Rb(Hw,8),r.Rb(zw,8),r.Rb(Gw,8),r.Rb(Kw,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(cs.c),Object(r.Rb)(cs.b,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(qw,8),Object(r.Rb)(Bw,8),Object(r.Rb)(Hw,8),Object(r.Rb)(zw,8),Object(r.Rb)(Gw,8),Object(r.Rb)(Kw,8))},token:t,providedIn:"any"}),t})();function Ww(t,e){return function(t,e=ns.a){return new gt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Qw(t,e){return Ww(t,e).pipe(Object(mt.a)(t=>({payload:t,type:"query"})))}function Yw(t,e){return Qw(t,e).pipe(Mn(void 0),rs(),Object(mt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Xw(t,e,n){return Yw(t,n).pipe(Ln((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Jw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Jw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Jw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new ss(void 0,void 0)),Object(mt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Jw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Zw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(cs.e)($w,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class t_{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Yw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(mt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Mn(void 0),rs(),Ae(([t,e])=>e.length>0||!t),Object(mt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ln((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Zw(t);return Xw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Qw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(mt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(bt.a)(this.query.get(t)).pipe(Object(us.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new e_(this.ref.doc(t),this.afs)}}class e_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=a_(n,e);return new t_(r,i,this.afs)}snapshotChanges(){return Ww(this.ref,this.afs.schedulers.outsideAngular).pipe(Mn(void 0),rs(),Object(mt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(mt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(bt.a)(this.ref.get(t)).pipe(Object(us.b)(this.afs.schedulers.insideAngular))}}class n_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Yw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(mt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Ae(t=>t.length>0),this.afs.keepUnstableUntilFirst):Yw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ln((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Zw(t);return Xw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Qw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(mt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(bt.a)(this.query.get(t)).pipe(Object(us.b)(this.afs.schedulers.insideAngular))}}const r_=new r.r("angularfire2.enableFirestorePersistence"),i_=new r.r("angularfire2.firestore.persistenceSettings"),o_=new r.r("angularfire2.firestore.settings"),s_=new r.r("angularfire2.firestore.use-emulator");function a_(t,e=(t=>t)){return{query:e(t),ref:t}}let u_=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new cs.d(o),this.keepUnstableUntilFirst=Object(cs.h)(this.schedulers);const c=Object(cs.g)(t,o,e);!ls.a.auth&&u&&Object(cs.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(cs.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!M(i)){const e=()=>{try{return Object(bt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(xw){return"undefined"!=typeof console&&console.warn(xw),Object(Se.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Se.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=a_(n,e),o=this.schedulers.ngZone.run(()=>r);return new t_(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new n_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new e_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(cs.c),r.Rb(cs.b,8),r.Rb(r_,8),r.Rb(o_,8),r.Rb(r.C),r.Rb(r.A),r.Rb(i_,8),r.Rb(s_,8),r.Rb(qw,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(cs.c),Object(r.Rb)(cs.b,8),Object(r.Rb)(r_,8),Object(r.Rb)(o_,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(i_,8),Object(r.Rb)(s_,8),Object(r.Rb)(qw,8))},token:t,providedIn:"any"}),t})();function c_(t,e){1&t&&(r.Nb(0,"div"),r.Nb(1,"span"),r.ec(2),r.Mb(),r.Mb()),2&t&&(r.Ab(2),r.fc(" ",91184.16092159999," "))}function l_(t,e){if(1&t){const t=r.Ob();r.Nb(0,"li",5),r.Ub("click",function(){r.ac(t);const n=e.$implicit;return r.Wb().helloFrom(n)}),r.ec(1),r.Mb()}if(2&t){const t=e.$implicit;r.Ab(1),r.fc(" ",t," ")}}function h_(t,e){if(1&t&&(r.Nb(0,"li"),r.ec(1),r.Mb()),2&t){const t=e.$implicit;r.Ab(1),r.fc(" ",t," ")}}const f_=function(){return["/login"]};let d_=(()=>{class t{constructor(t,e,n){this.connectionService=t,this.router=e,this.afs=n,this.title="PRF",this.cloudId="",this.value="",this.example=["1_elem"],this.dataObserver=null,console.log(ts),this.cloudElements=[]}goToSecond(){this.router.navigate(["/second","PRF",{message:this.title}])}hello(){console.log("Hello World!"),this.title="PRF"===this.title?"NOT PRF":"PRF",this.example.push(Math.floor(100*Math.random())+"_elem")}helloFrom(t){console.log("Hello from "+t)}saveData(){this.afs.collection("Examples-023").add({id:this.cloudId,value:this.value}).then(t=>{console.log("save successful",t),this.cloudId="",this.value="",this.refreshDb()}).catch(t=>{console.log("save error",t)})}refreshDb(){this.cloudElements=[],this.afs.collection("Examples-023",t=>t.where("id","==","valami").orderBy("value","desc")).get().subscribe(t=>{t.docs.forEach(t=>{const e=t.data();this.cloudElements.push("Id: "+e.id+", Value: "+e.value)})})}ngOnInit(){this.refreshDb()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(es),r.Kb(jo),r.Kb(u_))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-first"]],decls:27,vars:9,consts:[["role","main",1,"content"],[1,"card","highlight-card","card-small",3,"click"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["type","text",3,"ngModel","ngModelChange"],[3,"click"],[3,"routerLink"],[4,"ngFor","ngForOf"],["type","text","id","id",3,"ngModel","ngModelChange"],["type","text","id","value",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Ub("click",function(){return e.hello()}),r.Nb(2,"span"),r.ec(3),r.Mb(),r.Mb(),r.dc(4,c_,3,1,"div",2),r.Nb(5,"ul"),r.dc(6,l_,2,1,"li",3),r.Mb(),r.Nb(7,"input",4),r.Ub("ngModelChange",function(t){return e.title=t}),r.Mb(),r.Nb(8,"button",5),r.Ub("click",function(){return e.goToSecond()}),r.ec(9,"Second"),r.Mb(),r.Nb(10,"a",6),r.ec(11,"Logout"),r.Mb(),r.Nb(12,"ul"),r.dc(13,h_,2,1,"li",7),r.Mb(),r.Nb(14,"div"),r.Nb(15,"div"),r.Nb(16,"label"),r.ec(17,"Id"),r.Mb(),r.Nb(18,"input",8),r.Ub("ngModelChange",function(t){return e.cloudId=t}),r.Mb(),r.Mb(),r.Nb(19,"div"),r.Nb(20,"label"),r.ec(21,"Value"),r.Mb(),r.Nb(22,"input",9),r.Ub("ngModelChange",function(t){return e.value=t}),r.Mb(),r.Mb(),r.Nb(23,"button",5),r.Ub("click",function(){return e.saveData()}),r.ec(24,"SAVE"),r.Mb(),r.Mb(),r.Nb(25,"button",5),r.Ub("click",function(){return e.refreshDb()}),r.ec(26,"REFRESH"),r.Mb(),r.Mb()),2&t&&(r.Ab(3),r.fc("",e.title," app is running!"),r.Ab(1),r.Xb("ngIf","PRF"==e.title),r.Ab(2),r.Xb("ngForOf",e.example),r.Ab(1),r.Xb("ngModel",e.title),r.Ab(3),r.Xb("routerLink",r.Yb(8,f_)),r.Ab(3),r.Xb("ngForOf",e.cloudElements),r.Ab(5),r.Xb("ngModel",e.cloudId),r.Ab(4),r.Xb("ngModel",e.value))},directives:[N,j,Ct,Gt,Ee,ko],styles:[""]}),t})(),p_=(()=>{class t{constructor(t){this.router=t}canActivate(t,e){return!!localStorage.getItem("user")||(this.router.navigate(["/login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(jo))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),g_=(()=>{class t{constructor(t,e){this.http=t,this.auth=e}login(t,e){return this.auth.signInWithEmailAndPassword(t,e)}logout(){return this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(We),r.Rb($w))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const y_=function(){return["/first"]},m_=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class t{constructor(t,e){this.loginService=t,this.router=e,this.email="",this.password=""}login(){""!=this.email&&""!=this.password&&this.loginService.login(this.email,this.password).then(t=>{console.log(t),localStorage.setItem("user",t.user.uid),this.router.navigate(["/first"])}).catch(t=>{console.log("login error",t)})}ngOnInit(){localStorage.getItem("user")&&(localStorage.removeItem("user"),this.loginService.logout().then(()=>{console.log("logout sikeres")}).catch(t=>{console.log("logout error",t)}))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(g_),r.Kb(jo))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-login"]],decls:13,vars:2,consts:[["role","main",1,"content"],["type","email","id","email",3,"ngModel","ngModelChange"],["type","password","id","password",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"h2"),r.ec(2,"Login"),r.Mb(),r.Nb(3,"div"),r.Nb(4,"label"),r.ec(5,"Email"),r.Mb(),r.Nb(6,"input",1),r.Ub("ngModelChange",function(t){return e.email=t}),r.Mb(),r.Mb(),r.Nb(7,"div"),r.Nb(8,"label"),r.ec(9,"Password"),r.Mb(),r.Nb(10,"input",2),r.Ub("ngModelChange",function(t){return e.password=t}),r.Mb(),r.Mb(),r.Nb(11,"button",3),r.Ub("click",function(){return e.login()}),r.ec(12,"LOGIN"),r.Mb(),r.Mb()),2&t&&(r.Ab(6),r.Xb("ngModel",e.email),r.Ab(4),r.Xb("ngModel",e.password))},directives:[Ct,Gt,Ee],styles:[""]}),t})()},{path:"first",component:d_,canActivate:[p_]},{path:"second/:id",component:(()=>{class t{constructor(t){this.route=t,this.message=""}ngOnInit(){this.route.paramMap.subscribe(t=>{console.log(t.keys),console.log(t.get("message")),this.message=t.get("id")+"  "+t.get("message")},t=>{console.log("parammap error",t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(li))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-second"]],decls:6,vars:3,consts:[["role","main",1,"content"],[1,"card","highlight-card","card-small"],[3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"span"),r.ec(3),r.Mb(),r.Mb(),r.Nb(4,"a",2),r.ec(5,"First"),r.Mb(),r.Mb()),2&t&&(r.Ab(3),r.fc("",e.message," second works"),r.Ab(1),r.Xb("routerLink",r.Yb(2,y_)))},directives:[ko],styles:[""]}),t})(),canActivate:[p_]},{path:"**",component:Zo}];let v_=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[Ho.forRoot(m_)],Ho]}),t})(),b_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:6,vars:0,consts:[["role","banner",1,"toolbar"],["width","40","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],[1,"spacer"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Lb(1,"img",1),r.Nb(2,"span"),r.ec(3,"Welcome"),r.Mb(),r.Lb(4,"div",2),r.Mb(),r.Lb(5,"router-outlet"))},directives:[Ro],styles:[""]}),t})(),w_=(()=>{class t{constructor(){}intercept(t,e){return t=t.clone({withCredentials:!0}),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),__=(()=>{class t{}return t.\u0275mod=r.Ib({type:t,bootstrap:[b_]}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[{provide:Ye,useClass:w_,multi:!0}],imports:[[pt,v_,ln,Te,cs.a.initializeApp(ts.firebase)]]}),t})();ts.production&&Object(r.T)(),ft().bootstrapModule(__).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);