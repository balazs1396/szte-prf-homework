(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?s:e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return sn}),n.d(e,"b",function(){return Ja}),n.d(e,"c",function(){return $a}),n.d(e,"d",function(){return Ga}),n.d(e,"e",function(){return Ka}),n.d(e,"f",function(){return Gu}),n.d(e,"g",function(){return Pu}),n.d(e,"h",function(){return Zs}),n.d(e,"i",function(){return cu}),n.d(e,"j",function(){return Os}),n.d(e,"k",function(){return eu}),n.d(e,"l",function(){return Is}),n.d(e,"m",function(){return vr}),n.d(e,"n",function(){return xa}),n.d(e,"o",function(){return Zi}),n.d(e,"p",function(){return Sn}),n.d(e,"q",function(){return N}),n.d(e,"r",function(){return on}),n.d(e,"s",function(){return mo}),n.d(e,"t",function(){return Ks}),n.d(e,"u",function(){return Ws}),n.d(e,"v",function(){return tu}),n.d(e,"w",function(){return la}),n.d(e,"x",function(){return Lu}),n.d(e,"y",function(){return ca}),n.d(e,"z",function(){return ju}),n.d(e,"A",function(){return fu}),n.d(e,"B",function(){return Cn}),n.d(e,"C",function(){return Xa}),n.d(e,"D",function(){return Ya}),n.d(e,"E",function(){return js}),n.d(e,"F",function(){return As}),n.d(e,"G",function(){return Er}),n.d(e,"H",function(){return Ns}),n.d(e,"I",function(){return dr}),n.d(e,"J",function(){return In}),n.d(e,"K",function(){return Uu}),n.d(e,"L",function(){return oa}),n.d(e,"M",function(){return bu}),n.d(e,"N",function(){return an}),n.d(e,"O",function(){return Ds}),n.d(e,"P",function(){return Rs}),n.d(e,"Q",function(){return fa}),n.d(e,"R",function(){return V}),n.d(e,"S",function(){return ku}),n.d(e,"T",function(){return xu}),n.d(e,"U",function(){return w}),n.d(e,"V",function(){return Iu}),n.d(e,"W",function(){return Hu}),n.d(e,"X",function(){return Eu}),n.d(e,"Y",function(){return Za}),n.d(e,"Z",function(){return eo}),n.d(e,"ab",function(){return cs}),n.d(e,"bb",function(){return hr}),n.d(e,"cb",function(){return Wn}),n.d(e,"db",function(){return Ln}),n.d(e,"eb",function(){return Fn}),n.d(e,"fb",function(){return Hn}),n.d(e,"gb",function(){return qn}),n.d(e,"hb",function(){return Un}),n.d(e,"ib",function(){return Bn}),n.d(e,"jb",function(){return os}),n.d(e,"kb",function(){return Bu}),n.d(e,"lb",function(){return ss}),n.d(e,"mb",function(){return as}),n.d(e,"nb",function(){return Vn}),n.d(e,"ob",function(){return H}),n.d(e,"pb",function(){return So}),n.d(e,"qb",function(){return Fo}),n.d(e,"rb",function(){return Lo}),n.d(e,"sb",function(){return Vo}),n.d(e,"tb",function(){return is}),n.d(e,"ub",function(){return kt}),n.d(e,"vb",function(){return y}),n.d(e,"wb",function(){return Mn}),n.d(e,"xb",function(){return vo}),n.d(e,"yb",function(){return St}),n.d(e,"zb",function(){return ws}),n.d(e,"Ab",function(){return oi}),n.d(e,"Bb",function(){return xo}),n.d(e,"Cb",function(){return $o}),n.d(e,"Db",function(){return qa}),n.d(e,"Eb",function(){return tt}),n.d(e,"Fb",function(){return at}),n.d(e,"Gb",function(){return O}),n.d(e,"Hb",function(){return T}),n.d(e,"Ib",function(){return it}),n.d(e,"Jb",function(){return ut}),n.d(e,"Kb",function(){return jo}),n.d(e,"Lb",function(){return Po}),n.d(e,"Mb",function(){return Do}),n.d(e,"Nb",function(){return Ro}),n.d(e,"Ob",function(){return Mo}),n.d(e,"Pb",function(){return tn}),n.d(e,"Qb",function(){return ts}),n.d(e,"Rb",function(){return En}),n.d(e,"Sb",function(){return en}),n.d(e,"Tb",function(){return za}),n.d(e,"Ub",function(){return Uo}),n.d(e,"Vb",function(){return Ba}),n.d(e,"Wb",function(){return Ho}),n.d(e,"Xb",function(){return ko}),n.d(e,"Yb",function(){return Ia}),n.d(e,"Zb",function(){return Ua}),n.d(e,"ac",function(){return Qt}),n.d(e,"bc",function(){return pr}),n.d(e,"cc",function(){return ot}),n.d(e,"dc",function(){return Ao}),n.d(e,"ec",function(){return Jo}),n.d(e,"fc",function(){return Zo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("7o/Q");function u(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class l extends a.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class h extends o.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.a.EMPTY)),t}refCount(){return u()(this)}}const f=(()=>{const t=h.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.a}function g(t){for(let e in t)if(t[e]===g)return e;throw Error("Could not find renamed property on target object.")}function m(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function y(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(y).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function v(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const b=g({__forward_ref__:g});function w(t){return t.__forward_ref__=w,t.toString=function(){return y(this())},t}function _(t){return E(t)?t():t}function E(t){return"function"==typeof t&&t.hasOwnProperty(b)&&t.__forward_ref__===w}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function T(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function S(t){return C(t,x)||C(t,j)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function I(t){return t&&(t.hasOwnProperty(A)||t.hasOwnProperty(k))?t[A]:null}const x=g({"\u0275prov":g}),A=g({"\u0275inj":g}),j=g({ngInjectableDef:g}),k=g({ngInjectorDef:g});var N=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let R;function D(t){const e=R;return R=t,e}function P(t,e,n){const r=S(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&N.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${y(t)}]`)}function M(t){return{toString:t}.toString()}var L=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),V=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,q="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,B="undefined"!=typeof global&&global,H=F||B||U||q,z={},G=[],K=g({"\u0275cmp":g}),$=g({"\u0275dir":g}),W=g({"\u0275pipe":g}),Q=g({"\u0275mod":g}),Y=g({"\u0275loc":g}),X=g({"\u0275fac":g}),J=g({__NG_ELEMENT_ID__:g});let Z=0;function tt(t){return M(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||V.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Z++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(nt):null,n})}function et(t){return ct(t)||function(t){return t[$]||null}(t)}function nt(t){return function(t){return t[W]||null}(t)}const rt={};function it(t){const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&M(()=>{rt[t.id]=t.type}),e}function ot(t,e){return M(()=>{const n=lt(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function st(t,e){if(null==t)return z;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const at=tt;function ut(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[K]||null}function lt(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${y(t)} does not have '\u0275mod' property.`);return n}const ht=20,ft=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function mt(t){return 2==(2&t.flags)}function yt(t){return 1==(1&t.flags)}function vt(t){return null!==t.template}function bt(t,e){return t.hasOwnProperty(X)?t[X]:null}class wt extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function _t(t){return"string"==typeof t?t:null==t?"":String(t)}function Et(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():_t(t)}function Ot(t,e){const n=e?` in ${e}`:"";throw new wt("201",`No provider for ${Et(t)} found${n}`)}class Tt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function St(){return Ct}function Ct(t){return t.type.prototype.ngOnChanges&&(t.setInput=xt),It}function It(){const t=At(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===z)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function xt(t,e,n,r){const i=At(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:z,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Tt(u&&u.currentValue,e,s===z),t[r]=e}function At(t){return t.__ngSimpleChanges__||null}let jt;function kt(t){jt=t}function Nt(t){return!!t.listen}St.ngInherit=!0;const Rt={createRenderer:(t,e)=>void 0!==jt?jt:"undefined"!=typeof document?document:void 0};function Dt(t){for(;Array.isArray(t);)t=t[0];return t}function Pt(t,e){return Dt(e[t])}function Mt(t,e){return Dt(e[t.index])}function Lt(t,e){return t.data[e]}function Vt(t,e){const n=e[t];return dt(n)?n:n[0]}function Ft(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ut(t){return 4==(4&t[2])}function qt(t){return 128==(128&t[2])}function Bt(t,e){return null==e?null:t[e]}function Ht(t){t[18]=0}function zt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Gt={lFrame:he(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Kt(){return Gt.bindingsEnabled}function $t(){return Gt.lFrame.lView}function Wt(){return Gt.lFrame.tView}function Qt(t){Gt.lFrame.contextLView=t}function Yt(){let t=Xt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Xt(){return Gt.lFrame.currentTNode}function Jt(t,e){const n=Gt.lFrame;n.currentTNode=t,n.isParent=e}function Zt(){return Gt.lFrame.isParent}function te(){return Gt.isInCheckNoChangesMode}function ee(t){Gt.isInCheckNoChangesMode=t}function ne(){return Gt.lFrame.bindingIndex++}function re(t,e){const n=Gt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ie(e)}function ie(t){Gt.lFrame.currentDirectiveIndex=t}function oe(){return Gt.lFrame.currentQueryIndex}function se(t){Gt.lFrame.currentQueryIndex=t}function ae(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ue(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=ae(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Gt.lFrame=le();return r.currentTNode=e,r.lView=t,!0}function ce(t){const e=le(),n=t[1];Gt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function le(){const t=Gt.lFrame,e=null===t?null:t.child;return null===e?he(t):e}function he(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function fe(){const t=Gt.lFrame;return Gt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const de=fe;function pe(){const t=fe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ge(){return Gt.lFrame.selectedIndex}function me(t){Gt.lFrame.selectedIndex=t}function ye(){const t=Gt.lFrame;return Lt(t.tView,t.selectedIndex)}function ve(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function be(t,e,n){Ee(t,e,3,n)}function we(t,e,n,r){(3&t[2])===n&&Ee(t,e,n,r)}function _e(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ee(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Oe(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Oe(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Te=-1;class Se{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ce(t,e,n){const r=Nt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];xe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ie(t){return 3===t||4===t||6===t}function xe(t){return 64===t.charCodeAt(0)}function Ae(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||je(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function je(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function ke(t){return t!==Te}function Ne(t){return 32767&t}function Re(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let De=!0;function Pe(t){const e=De;return De=t,e}let Me=0;function Le(t,e){const n=Fe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ve(r.data,t),Ve(e,null),Ve(r.blueprint,null));const i=Ue(t,e),o=t.injectorIndex;if(ke(i)){const t=Ne(i),n=Re(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ve(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Fe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ue(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Te;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Te}function qe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Me++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Be(t,e,n){if(n&N.Optional)return t;Ot(e,"NodeInjector")}function He(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],o=D(void 0);try{return i?i.get(e,r,n&N.Optional):P(e,r,n&N.Optional)}finally{D(o)}}return Be(r,e,n)}function ze(t,e,n,r=N.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(J)?t[J]:void 0;return"number"==typeof e?e>=0?255&e:Ke:e}(n);if("function"==typeof o){if(!ue(e,t,r))return r&N.Host?Be(i,n,r):He(e,n,r,i);try{const t=o();if(null!=t||r&N.Optional)return t;Ot(n)}finally{de()}}else if("number"==typeof o){let i=null,s=Fe(t,e),a=Te,u=r&N.Host?e[16][6]:null;for((-1===s||r&N.SkipSelf)&&(a=-1===s?Ue(t,e):e[s+8],a!==Te&&Xe(r,!1)?(i=e[1],s=Ne(a),e=Re(a,e)):s=-1);-1!==s;){const t=e[1];if(Ye(o,s,t.data)){const t=$e(s,e,n,i,r,u);if(t!==Ge)return t}a=e[s+8],a!==Te&&Xe(r,e[1].data[s+8]===u)&&Ye(o,s,e)?(i=t,s=Ne(a),e=Re(a,e)):s=-1}}}return He(e,n,r,i)}const Ge={};function Ke(){return new Je(Yt(),$t())}function $e(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=We(a,s,n,null==r?mt(a)&&De:r!=s&&0!=(3&a.type),i&N.Host&&o===a);return null!==u?Qe(e,s,u,a):Ge}function We(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&vt(t)&&t.type===n)return u}return null}function Qe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Se){const s=i;s.resolving&&function(t,e){throw new wt("200",`Circular dependency in DI detected for ${t}`)}(Et(o[n]));const a=Pe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?D(s.injectImpl):null;ue(t,r,N.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ct(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&D(u),Pe(a),s.resolving=!1,de()}}return i}function Ye(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Xe(t,e){return!(t&N.Self||t&N.Host&&e)}class Je{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return ze(this._tNode,this._lView,t,void 0,e)}}function Ze(t){const e=t;if(E(t))return()=>{const t=Ze(_(e));return t?t():null};let n=bt(e);if(null===n){const t=I(e);n=t&&t.factory}return n||null}function tn(t){return M(()=>{const e=t.prototype.constructor,n=e[X]||Ze(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[X]||Ze(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function en(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ie(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Yt(),t)}const nn="__parameters__";function rn(t,e,n){return M(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(nn)?t[nn]:Object.defineProperty(t,nn,{value:[]})[nn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class on{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=O({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const sn=new on("AnalyzeForEntryComponents"),an=Function;function un(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),un(r,e)):e!==t&&e.push(r)}return e}function cn(t,e){t.forEach(t=>Array.isArray(t)?cn(t,e):e(t))}function ln(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function hn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function fn(t,e,n){let r=pn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function dn(t,e){const n=pn(t,e);if(n>=0)return t[1|n]}function pn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const gn={},mn=/\n/gm,yn="__source",vn=g({provide:String,useValue:g});let bn;function wn(t){const e=bn;return bn=t,e}function _n(t,e=N.Default){if(void 0===bn)throw new Error("inject() must be called from an injection context");return null===bn?P(t,void 0,e):bn.get(t,e&N.Optional?null:void 0,e)}function En(t,e=N.Default){return(R||_n)(_(t),e)}function On(t){const e=[];for(let n=0;n<t.length;n++){const r=_(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(En(t,n))}else e.push(En(r))}return e}function Tn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Sn=Tn(rn("Inject",t=>({token:t})),-1),Cn=Tn(rn("Optional"),8),In=Tn(rn("SkipSelf"),4);let xn;function An(t){var e;return(null===(e=function(){if(void 0===xn&&(xn=null,H.trustedTypes))try{xn=H.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return xn}())||void 0===e?void 0:e.createHTML(t))||t}class jn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class kn extends jn{getTypeName(){return"HTML"}}class Nn extends jn{getTypeName(){return"Style"}}class Rn extends jn{getTypeName(){return"Script"}}class Dn extends jn{getTypeName(){return"URL"}}class Pn extends jn{getTypeName(){return"ResourceURL"}}function Mn(t){return t instanceof jn?t.changingThisBreaksApplicationSecurity:t}function Ln(t,e){const n=Vn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Vn(t){return t instanceof jn&&t.getTypeName()||null}function Fn(t){return new kn(t)}function Un(t){return new Nn(t)}function qn(t){return new Rn(t)}function Bn(t){return new Dn(t)}function Hn(t){return new Pn(t)}class zn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(An(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Gn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=An(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=An(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Kn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$n=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wn(t){return(t=String(t)).match(Kn)||t.match($n)?t:"unsafe:"+t}function Qn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Yn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Xn=Qn("area,br,col,hr,img,wbr"),Jn=Qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zn=Qn("rp,rt"),tr=Yn(Zn,Jn),er=Yn(Xn,Yn(Jn,Qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yn(Zn,Qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tr),nr=Qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rr=Qn("srcset"),ir=Yn(nr,rr,Qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),or=Qn("script,style,template");class sr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!er.hasOwnProperty(e))return this.sanitizedSomething=!0,!or.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!ir.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;nr[o]&&(s=Wn(s)),rr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Wn(t.trim())).join(", ")),this.buf.push(" ",e,'="',cr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();er.hasOwnProperty(e)&&!Xn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(cr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ar=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ur=/([^\#-~ |!])/g;function cr(t){return t.replace(/&/g,"&amp;").replace(ar,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ur,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let lr;function hr(t,e){let n=null;try{lr=lr||function(t){const e=new Gn(t);return function(){try{return!!(new window.DOMParser).parseFromString(An(""),"text/html")}catch(t){return!1}}()?new zn(e):e}(t);let r=e?String(e):"";n=lr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=lr.getInertBodyElement(r)}while(r!==o);return An((new sr).sanitizeChildren(fr(n)||n))}finally{if(n){const t=fr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function fr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var dr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function pr(t){const e=function(){const t=$t();return t&&t[12]}();return e?e.sanitize(dr.URL,t)||"":Ln(t,"URL")?Mn(t):Wn(_t(t))}function gr(t){return t.ngDebugContext}function mr(t){return t.ngOriginalError}function yr(t,...e){t.error(...e)}class vr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||yr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?gr(t)?gr(t):this._findContext(mr(t)):null}_findOriginalError(t){let e=mr(t);for(;e&&mr(e);)e=mr(e);return e}}function br(t,e){t.__ngContext__=e}const wr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(H))();function _r(t){return t instanceof Function?t():t}var Er=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Or(t,e){return(void 0)(t,e)}function Tr(t){const e=t[3];return pt(e)?e[3]:e}function Sr(t){return Ir(t[13])}function Cr(t){return Ir(t[4])}function Ir(t){for(;null!==t&&!pt(t);)t=t[4];return t}function xr(t,e,n,r,i){if(null!=r){let o,s=!1;pt(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=Dt(r);0===t&&null!==n?null==i?Pr(e,n,a):Dr(e,n,a,i||null,!0):1===t&&null!==n?Dr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Lr(t,e);r&&function(t,e,n,r){Nt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Dt(n)&&xr(e,t,r,o,i);for(let s=ft;s<n.length;s++){const i=n[s];Hr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Ar(t,e,n){return Nt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function jr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,zt(i,-1)),n.splice(r,1)}function kr(t,e){if(t.length<=ft)return;const n=ft+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&jr(o,r),e>0&&(t[n-1][4]=r[4]);const s=hn(t,ft+e);Hr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Nr(t,e){if(!(256&e[2])){const n=e[11];Nt(n)&&n.destroyNode&&Hr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Rr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&Rr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&Rr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Rr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Se)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Dt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Nt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&jr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Dr(t,e,n,r,i){Nt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Pr(t,e,n){Nt(t)?t.appendChild(e,n):e.appendChild(n)}function Mr(t,e,n,r,i){null!==r?Dr(t,e,n,r,i):Pr(t,e,n)}function Lr(t,e){return Nt(t)?t.parentNode(e):e.parentNode}function Vr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===V.None||e===V.Emulated)return null}return Mt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Mt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Mr(o,i,n[a],s,!1);else Mr(o,i,n,s,!1)}function Fr(t,e){if(null!==e){const n=e.type;if(3&n)return Mt(e,t);if(4&n)return qr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Fr(t,n);{const n=t[e.index];return pt(n)?qr(-1,n):Dt(n)}}if(32&n)return Or(e,t)()||Dt(t[e.index]);{const n=Ur(t,e);return null!==n?Array.isArray(n)?n[0]:Fr(Tr(t[16]),n):Fr(t,e.next)}}return null}function Ur(t,e){return null!==e?t[16][6].projection[e.projection]:null}function qr(t,e){const n=ft+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Fr(t,r)}return e[7]}function Br(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&br(Dt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Br(t,e,n.child,r,i,o,!1),xr(e,t,i,a,o);else if(32&u){const s=Or(n,r);let u;for(;u=s();)xr(e,t,i,u,o);xr(e,t,i,a,o)}else 16&u?zr(t,e,r,n,i,o):xr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Hr(t,e,n,r,i,o){Br(n,r,t.firstChild,e,i,o,!1)}function zr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)xr(e,t,i,a[u],o);else Br(t,e,a,s[3],i,o,!0)}function Gr(t,e,n){Nt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Kr(t,e,n){Nt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function $r(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Wr="ng-template";function Qr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==$r(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Yr(t){return 4===t.type&&t.value!==Wr}function Xr(t,e,n){return e===(4!==t.type||n?t.value:Wr)}function Jr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ie(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Xr(t,u,n)||""===u&&1===e.length){if(Zr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Qr(t.attrs,c,n)){if(Zr(r))return!1;s=!0}continue}const l=ti(8&r?"class":u,i,Yr(t),n);if(-1===l){if(Zr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==$r(e,c,0)||2&r&&c!==t){if(Zr(r))return!1;s=!0}}}}else{if(!s&&!Zr(r)&&!Zr(u))return!1;if(s&&Zr(u))continue;s=!1,r=u|1&r}}return Zr(r)||s}function Zr(t){return 0==(1&t)}function ti(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ei(t,e,n=!1){for(let r=0;r<e.length;r++)if(Jr(t,e[r],n))return!0;return!1}function ni(t,e){return t?":not("+e.trim()+")":e}function ri(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Zr(s)||(e+=ni(o,i),i=""),r=s,o=o||!Zr(r);n++}return""!==i&&(e+=ni(o,i)),e}const ii={};function oi(t){si(Wt(),$t(),ge()+t,te())}function si(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&be(e,r,n)}else{const r=t.preOrderHooks;null!==r&&we(e,r,0,n)}me(n)}function ai(t,e){return t<<17|e<<2}function ui(t){return t>>17&32767}function ci(t){return 2|t}function li(t){return(131068&t)>>2}function hi(t,e){return-131069&t|e<<2}function fi(t){return 1|t}function di(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];se(i),n.contentQueries(2,e[o],o)}}}function pi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ht(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function gi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Xt(),s=Zt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Gt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Gt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Jt(o,!0),o}function mi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function yi(t,e,n){ce(e);try{const r=t.viewQuery;null!==r&&Ki(1,r,n);const i=t.template;null!==i&&wi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&di(t,e),t.staticViewQueries&&Ki(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)qi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,pe()}}function vi(t,e,n,r){const i=e[2];if(256==(256&i))return;ce(e);const o=te();try{Ht(e),Gt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&wi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&be(e,n,null)}else{const n=t.preOrderHooks;null!==n&&we(e,n,0,null),_e(e,0)}if(function(t){for(let e=Sr(t);null!==e;e=Cr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&zt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Sr(t);null!==e;e=Cr(e))for(let t=ft;t<e.length;t++){const n=e[t],r=n[1];qt(n)&&vi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&di(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&be(e,n)}else{const n=t.contentHooks;null!==n&&we(e,n,1),_e(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)me(~r);else{const i=r,o=n[++t],s=n[++t];re(o,i),s(2,e[i])}}}finally{me(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Fi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ki(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&be(e,n)}else{const n=t.viewHooks;null!==n&&we(e,n,2),_e(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,zt(e[3],-1))}finally{pe()}}function bi(t,e,n,r){const i=e[10],o=!te(),s=Ut(e);try{o&&!s&&i.begin&&i.begin(),s&&yi(t,e,r),vi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function wi(t,e,n,r,i){const o=ge();try{me(-1),2&r&&e.length>ht&&si(t,e,ht,te()),n(r,i)}finally{me(o)}}function _i(t,e,n){Kt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Le(n,e),br(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=vt(r);o&&Pi(e,n,r);const u=Qe(e,t,a,n);br(u,e),null!==s&&Mi(0,a-i,u,r,0,s),o&&(Vt(n.index,e)[8]=u)}}(t,e,n,Mt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Gt.lFrame.currentDirectiveIndex;try{me(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ie(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||ji(r,i)}}finally{me(-1),ie(s)}}(t,e,n))}function Ei(t,e,n=Mt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Oi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ti(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ti(t,e,n,r,i,o,s,a,u,c){const l=ht+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ii);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Si(t,e,n,r){const i=Wi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Qi(t).push(r,i.length-1))}function Ci(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ii(t,e,n,r,i,o,s,a){const u=Mt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Xi(t,n,c,r,i),mt(e)&&function(t,e){const n=Vt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Nt(o)?o.setProperty(u,r,i):xe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function xi(t,e,n,r){let i=!1;if(Kt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ei(n,s.selectors,!1)&&(i||(i=[]),qe(Le(n,e),t,s.type),vt(s)?(ki(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ri(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=mi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ae(n.mergedAttrs,c.hostAttrs),Di(t,n,e,u,c),Ni(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Yr(e)?null:Li(n,i);o.push(c),s=Ci(n,u,s),a=Ci(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new wt("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ae(n.mergedAttrs,n.attrs),i}function Ai(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function ji(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ki(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ni(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vt(e)&&(n[""]=t)}}function Ri(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Di(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bt(i.type)),s=new Se(o,vt(i),null);t.blueprint[r]=s,n[r]=s,Ai(t,e,0,r,mi(t,n,i.hostVars,ii),i)}function Pi(t,e,n){const r=Mt(e,t),i=Oi(n),o=t[10],s=Bi(t,pi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Mi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Li(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Vi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Fi(t,e){const n=Vt(e,t);if(qt(n)){const t=n[1];80&n[2]?vi(t,n,t.template,n[8]):n[5]>0&&Ui(n)}}function Ui(t){for(let n=Sr(t);null!==n;n=Cr(n))for(let t=ft;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];vi(t,e,t.template,e[8])}else e[5]>0&&Ui(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Vt(e[n],t);qt(r)&&r[5]>0&&Ui(r)}}function qi(t,e){const n=Vt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),yi(r,n,n[8])}function Bi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Hi(t){for(;t;){t[2]|=64;const e=Tr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function zi(t,e,n){const r=e[10];r.begin&&r.begin();try{vi(t,e,t.template,n)}catch(i){throw Yi(e,i),i}finally{r.end&&r.end()}}function Gi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Ft(n),i=r[1];bi(i,r,i.template,n)}}(t[8])}function Ki(t,e,n){se(0),e(t,n)}const $i=(()=>Promise.resolve(null))();function Wi(t){return t[7]||(t[7]=[])}function Qi(t){return t.cleanup||(t.cleanup=[])}function Yi(t,e){const n=t[9],r=n?n.get(vr,null):null;r&&r.handleError(e)}function Xi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ji(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=v(i,t):2==o&&(r=v(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Zi=new on("INJECTOR",-1);class to{get(t,e=gn){if(e===gn){const e=new Error(`NullInjectorError: No provider for ${y(t)}!`);throw e.name="NullInjectorError",e}return e}}const eo=new on("Set Injector scope."),no={},ro={},io=[];let oo;function so(){return void 0===oo&&(oo=new to),oo}function ao(t,e=null,n=null,r){return new uo(t,n,e||so(),r)}class uo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&cn(e,n=>this.processProvider(n,t,e)),cn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Zi,ho(void 0,this));const o=this.records.get(eo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:y(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=gn,n=N.Default){this.assertNotDestroyed();const r=wn(this);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof on)&&S(t);e=n&&this.injectableDefInScope(n)?ho(co(t),no):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?so():this.parent).get(t,e=n&N.Optional&&e===gn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(y(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[yn]&&i.unshift(e[yn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=y(e);if(Array.isArray(e))i=e.map(y).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):y(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(mn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{wn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(y(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=_(t)))return!1;let r=I(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=I(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{cn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];cn(r,t=>this.processProvider(t,n,r||io))}}this.injectorDefTypes.add(o),this.records.set(o,ho(r.factory,no));const a=r.providers;if(null!=a&&!s){const e=t;cn(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=po(t=_(t))?t:_(t&&t.provide);const i=function(t,e,n){return fo(t)?ho(void 0,t.useValue):ho(lo(t),no)}(t);if(po(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ho(void 0,no,!0),e.factory=()=>On(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===no&&(e.value=ro,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function co(t){const e=S(t),n=null!==e?e.factory:bt(t);if(null!==n)return n;const r=I(t);if(null!==r)return r.factory;if(t instanceof on)throw new Error(`Token ${y(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${y(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[x]||t[j]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function lo(t,e,n){let r;if(po(t)){const e=_(t);return bt(e)||co(e)}if(fo(t))r=()=>_(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...On(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>En(_(t.useExisting));else{const e=_(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return bt(e)||co(e);r=()=>new e(...On(t.deps))}var i;return r}function ho(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function fo(t){return null!==t&&"object"==typeof t&&vn in t}function po(t){return"function"==typeof t}const go=function(t,e,n){return function(t,e=null,n=null,r){const i=ao(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let mo=(()=>{class t{static create(t,e){return Array.isArray(t)?go(t,e,""):go(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=gn,t.NULL=new to,t.\u0275prov=O({token:t,providedIn:"any",factory:()=>En(Zi)}),t.__NG_ELEMENT_ID__=-1,t})();function yo(t,e){ve(Ft(t)[1],Yt())}function vo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=bo(t.inputs),e.declaredInputs=bo(t.declaredInputs),e.outputs=bo(t.outputs);const n=i.hostBindings;n&&Eo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&wo(t,o),s&&_o(t,s),m(t.inputs,i.inputs),m(t.declaredInputs,i.declaredInputs),m(t.outputs,i.outputs),vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===vo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ae(i.hostAttrs,n=Ae(n,i.hostAttrs))}}(r)}function bo(t){return t===z?{}:t===G?[]:t}function wo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function _o(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Eo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Oo=null;function To(){if(!Oo){const t=H.Symbol;if(t&&t.iterator)Oo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Oo=n)}}}return Oo}function So(t){return!!Co(t)&&(Array.isArray(t)||!(t instanceof Map)&&To()in t)}function Co(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Io(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function xo(t,e,n,r){const i=$t();return Io(i,ne(),e)&&(Wt(),function(t,e,n,r,i,o){const s=Mt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Nt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?_t(o):s(o,r||"",i);Nt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ye(),i,t,e,n,r)),xo}function Ao(t,e,n,r,i,o,s,a){const u=$t(),c=Wt(),l=t+ht,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=gi(e,t,4,s||null,Bt(c,a));xi(e,n,l,Bt(c,u)),ve(e,l);const h=l.tViews=Ti(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Jt(h,!1);const f=u[11].createComment("");Vr(c,u,f,h),br(f,u),Bi(u,u[l]=Vi(f,u,f,h)),yt(h)&&_i(c,u,h),null!=s&&Ei(u,h,a)}function jo(t,e=N.Default){const n=$t();return null===n?En(t,e):ze(Yt(),n,_(t),e)}function ko(t,e,n){const r=$t();return Io(r,ne(),e)&&Ii(Wt(),ye(),r,t,e,r[11],n,!1),ko}function No(t,e,n,r,i){const o=i?"class":"style";Xi(t,n,e.inputs[o],o,r)}function Ro(t,e,n,r){const i=$t(),o=Wt(),s=ht+t,a=i[11],u=i[s]=Ar(a,e,Gt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=gi(e,t,2,i,Bt(a,o));return xi(e,n,u,Bt(a,s)),null!==u.attrs&&Ji(u,u.attrs,!1),null!==u.mergedAttrs&&Ji(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Jt(c,!0);const l=c.mergedAttrs;null!==l&&Ce(a,u,l);const h=c.classes;null!==h&&Kr(a,u,h);const f=c.styles;null!==f&&Gr(a,u,f),64!=(64&c.flags)&&Vr(o,i,u,c),0===Gt.lFrame.elementDepthCount&&br(u,i),Gt.lFrame.elementDepthCount++,yt(c)&&(_i(o,i,c),function(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&Ei(i,c)}function Do(){let t=Yt();Zt()?Gt.lFrame.isParent=!1:(t=t.parent,Jt(t,!1));const e=t;Gt.lFrame.elementDepthCount--;const n=Wt();n.firstCreatePass&&(ve(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&No(n,e,$t(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&No(n,e,$t(),e.stylesWithoutHost,!1)}function Po(t,e,n,r){Ro(t,e,n,r),Do()}function Mo(){return $t()}function Lo(t){return!!t&&"function"==typeof t.then}function Vo(t){return!!t&&"function"==typeof t.subscribe}const Fo=Vo;function Uo(t,e,n=!1,r){const i=$t(),o=Wt(),s=Yt();return function(t,e,n,r,i,o,s=!1,a){const u=yt(r),c=t.firstCreatePass&&Qi(t),l=Wi(e);let h=!0;if(3&r.type){const f=Mt(r,e),d=a?a(f):z,p=d.target||f,g=l.length,m=a?t=>a(Dt(t[r.index])).target:r.index;if(Nt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Bo(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=Bo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=Bo(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Uo}function qo(t,e,n){try{return!1!==e(n)}catch(r){return Yi(t,r),!1}}function Bo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Vt(t.index,e):e;0==(32&e[2])&&Hi(s);let a=qo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=qo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Ho(t=1){return function(t){return(Gt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Gt.lFrame.contextLView))[8]}(t)}const zo=[];function Go(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ui(o):li(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Ko(t[a],e)&&(u=!0,t[a+1]=r?fi(n):ci(n)),a=r?ui(n):li(n)}u&&(t[n+1]=r?ci(o):fi(o))}function Ko(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pn(t,e)>=0}function $o(t,e){return function(t,e,n,r){const i=$t(),o=Wt(),s=function(t){const e=Gt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ge()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Gt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Qo(n=Wo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Wo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==li(r))return t[ui(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Wo(null,t,e,n[1],r),n=Qo(n,e.attrs,r),function(t,e,n,r){t[ui(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Qo(r,t[o].hostAttrs,true);return Qo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ui(s),u=li(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||pn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ui(t[a+1]);t[r+1]=ai(e,a),0!==e&&(t[e+1]=hi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ai(a,0),0!==a&&(t[a+1]=hi(t[a+1],r)),a=r;else t[r+1]=ai(u,0),0===a?a=r:t[u+1]=hi(t[u+1],r),u=r;l&&(t[r+1]=ci(t[r+1])),Go(t,c,r,!0),Go(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&pn(o,e)>=0&&(n[r+1]=fi(n[r+1]))}(e,c,t,r),s=ai(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==ii&&Io(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Xo(1==(1&c)?Yo(u,e,n,i,li(c),s):void 0)||(Xo(o)||function(t){return 2==(2&t)}(c)&&(o=Yo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Nt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Pt(ge(),n),i,o))}(o,o.data[ge()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=y(Mn(t))),t}(e),true,s)}(t,e),$o}function Wo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Qo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Qo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),fn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Yo(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ii&&(l=c?zo:void 0);let h=c?dn(l,r):u===r?l:void 0;if(o&&!Xo(h)&&(h=dn(e,r)),Xo(h)&&(a=h,s))return a;const f=t[i+1];i=s?ui(f):li(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=dn(t,r))}return a}function Xo(t){return void 0!==t}function Jo(t,e=""){const n=$t(),r=Wt(),i=t+ht,o=r.firstCreatePass?gi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Nt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Vr(r,n,s,o),Jt(o,!1)}function Zo(t,e,n){const r=$t(),i=function(t,e,n,r){return Io(t,ne(),n)?e+_t(n)+r:ii}(r,t,e,n);return i!==ii&&function(t,e,n){const r=Pt(e,t);!function(t,e,n){Nt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ge(),i),Zo}function ts(t,e,n){const r=$t();return Io(r,ne(),e)&&Ii(Wt(),ye(),r,t,e,r[11],n,!0),ts}const es=void 0;var ns=["en",[["a","p"],["AM","PM"],es],[["AM","PM"],es,es],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],es,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],es,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",es,"{1} 'at' {0}",es],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let rs={};function is(t,e,n){"string"!=typeof e&&(n=e,e=t[cs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),rs[e]=t,n&&(rs[e][cs.ExtraData]=n)}function os(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=us(e);if(n)return n;const r=e.split("-")[0];if(n=us(r),n)return n;if("en"===r)return ns;throw new Error(`Missing locale data for the locale "${t}".`)}function ss(t){return os(t)[cs.CurrencyCode]||null}function as(t){return os(t)[cs.PluralCase]}function us(t){return t in rs||(rs[t]=H.ng&&H.ng.common&&H.ng.common.locales&&H.ng.common.locales[t]),rs[t]}var cs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ls="en-US";let hs=ls;function fs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(hs=t.toLowerCase().replace(/_/g,"-"))}function ds(t,e,n,r,i){if(t=_(t),Array.isArray(t))for(let o=0;o<t.length;o++)ds(t[o],e,n,r,i);else{const o=Wt(),s=$t();let a=po(t)?t:_(t.provide),u=lo(t);const c=Yt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(po(t)||!t.multi){const r=new Se(u,i,jo),d=ms(a,e,i?l:l+f,h);-1===d?(qe(Le(c,s),o,a),ps(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=ms(a,e,l+f,h),p=ms(a,e,l,l+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){qe(Le(c,s),o,a);const l=function(t,e,n,r,i){const o=new Se(t,n,jo);return o.multi=[],o.index=e,o.componentProviders=0,gs(o,i,r&&!n),o}(i?vs:ys,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),ps(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else ps(o,t,d>-1?d:p,gs(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function ps(t,e,n,r){const i=po(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function gs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ms(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ys(t,e,n,r){return bs(this.multi,[])}function vs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Qe(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),bs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],bs(i,o);return o}function bs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ws(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Wt();if(r.firstCreatePass){const i=vt(t);ds(n,r.data,r.blueprint,i,!0),ds(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class _s{}class Es{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${y(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Os=(()=>{class t{}return t.NULL=new Es,t})();function Ts(...t){}function Ss(t,e){return new Is(Mt(t,e))}const Cs=function(){return Ss(Yt(),$t())};let Is=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Cs,t})();function xs(t){return t instanceof Is?t.nativeElement:t}class As{}let js=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ks(),t})();const ks=function(){const t=$t(),e=Vt(Yt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let Ns=(()=>{class t{}return t.\u0275prov=O({token:t,providedIn:"root",factory:()=>null}),t})();class Rs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ds=new Rs("11.2.0");class Ps{constructor(){}supports(t){return So(t)}create(t){return new Ls(t)}}const Ms=(t,e)=>e;class Ls{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ms}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<qs(n,r,i)?e:n,s=qs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!So(t))throw new Error(`Error trying to diff '${y(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[To()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Vs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Us),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Us),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Vs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Fs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Us{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Fs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Bs{constructor(){}supports(t){return t instanceof Map||Co(t)}create(){return new Hs}}class Hs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Co(t)))throw new Error(`Error trying to diff '${y(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new zs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class zs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Gs(){return new Ks([new Ps])}let Ks=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Gs()),deps:[[t,new In,new Cn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=O({token:t,providedIn:"root",factory:Gs}),t})();function $s(){return new Ws([new Bs])}let Ws=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||$s()),deps:[[t,new In,new Cn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=O({token:t,providedIn:"root",factory:$s}),t})();function Qs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Dt(o)),pt(o))for(let t=ft;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Qs(e[1],e,n,r)}const s=n.type;if(8&s)Qs(t,e,n.child,r);else if(32&s){const t=Or(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Ur(e,n);if(Array.isArray(t))r.push(...t);else{const n=Tr(e[16]);Qs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ys{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Qs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(kr(t,n),hn(e,n))}this._attachedToViewContainer=!1}Nr(this._lView[1],this._lView)}onDestroy(t){Si(this._lView[1],this._lView,null,t)}markForCheck(){Hi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){zi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){ee(!0);try{zi(t,e,n)}finally{ee(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Hr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Xs extends Ys{constructor(t){super(t),this._view=t}detectChanges(){Gi(this._view)}checkNoChanges(){!function(t){ee(!0);try{Gi(t)}finally{ee(!1)}}(this._view)}get context(){return null}}const Js=ta;let Zs=(()=>{class t{}return t.__NG_ELEMENT_ID__=Js,t.__ChangeDetectorRef__=!0,t})();function ta(t=!1){return function(t,e,n){if(!n&&mt(t)){const n=Vt(t.index,e);return new Ys(n,n)}return 47&t.type?new Ys(e[16],e):null}(Yt(),$t(),t)}const ea=[new Bs],na=new Ks([new Ps]),ra=new Ws(ea),ia=function(){return ua(Yt(),$t())};let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ia,t})();const sa=oa,aa=class extends sa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=pi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),yi(e,n,t),new Ys(n)}};function ua(t,e){return 4&t.type?new aa(e,t,Ss(t,e)):null}class ca{}class la{}const ha=function(){return ya(Yt(),$t())};let fa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ha,t})();const da=fa,pa=class extends da{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ss(this._hostTNode,this._hostLView)}get injector(){return new Je(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ue(this._hostTNode,this._hostLView);if(ke(t)){const e=Re(t,this._hostLView),n=Ne(t);return new Je(e[1].data[n+8],e)}return new Je(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ga(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ca,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new pa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ft+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ft?(e[4]=n[i],ln(n,ft+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=qr(i,o),a=n[11],u=Lr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Hr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),ln(ma(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ga(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=kr(this._lContainer,e);n&&(hn(ma(this._lContainer),e),Nr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=kr(this._lContainer,e);return n&&null!=hn(ma(this._lContainer),e)?new Ys(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ga(t){return t[8]}function ma(t){return t[8]||(t[8]=[])}function ya(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=Dt(r);else{const n=e[11];i=n.createComment("");const r=Mt(t,e);Dr(n,Lr(n,r),i,function(t,e){return Nt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Vi(r,e,i,t),Bi(e,n)}return new pa(n,t,e)}const va={};class ba extends Os{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new Ea(e,this.ngModule)}}function wa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const _a=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>wr});class Ea extends _s{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ri).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return wa(this.componentDef.inputs)}get outputs(){return wa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,va,i);return o!==va||r===va?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(As,Rt),s=i.get(Ns,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Nt(t))return t.selectRootElement(e,n===V.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ar(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:wr,clean:$i,playerHandler:null,flags:0},f=Ti(0,null,null,1,0,null,null,null,null,null),d=pi(null,f,h,l,null,null,o,a,s,i);let p,g;ce(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=gi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Ji(a,u,!0),null!==t&&(Ce(i,t,u),null!==a.classes&&Kr(i,t,a.classes),null!==a.styles&&Gr(i,t,a.styles)));const c=r.createRenderer(t,e),l=pi(n,Oi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(qe(Le(a,n),s,e.type),ki(s,a),Ri(a,n.length,1)),Bi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Ce(a,c,["ng-version",Ds.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Zr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ce(a,c,t),e&&e.length>0&&Kr(a,c,e.join(" "))}if(g=Lt(f,ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Yt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Di(t,r,e,mi(t,e,1,null),n));const i=Qe(e,t,r.directiveStart,r);br(i,e);const o=Mt(r,e);return o&&br(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Yt();e.contentQueries(1,s,t.directiveStart)}const a=Yt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(me(a.index),Ai(n[1],a,0,a.directiveStart,a.directiveEnd,e),ji(e,s)),s}(t,this.componentDef,d,h,[yo]),yi(f,d,null)}finally{pe()}return new Oa(this.componentType,p,Ss(g,d),d,g)}}class Oa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Xs(r),this.componentType=t}get injector(){return new Je(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ta=new Map;class Sa extends ca{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ba(this);const n=lt(t),r=t[Y]||null;r&&fs(r),this._bootstrapComponents=_r(n.bootstrap),this._r3Injector=ao(t,e,[{provide:ca,useValue:this},{provide:Os,useValue:this.componentFactoryResolver}],y(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=mo.THROW_IF_NOT_FOUND,n=N.Default){return t===mo||t===ca||t===Zi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ca extends la{constructor(t){super(),this.moduleType=t,null!==lt(t)&&function(t){const e=new Set;!function t(n){const r=lt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${y(e)} vs ${y(e.name)}`)}(i,Ta.get(i),n),Ta.set(i,n));const o=_r(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Sa(this.moduleType,t)}}function Ia(t,e,n){const r=function(){const t=Gt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=$t();return i[r]===ii?function(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}const xa=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Aa(){return this._results[To()]()}class ja{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=To(),n=ja.prototype;n[e]||(n[e]=Aa)}get changes(){return this._changes||(this._changes=new xa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=un(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ka{constructor(t){this.queryList=t,this.matches=null}clone(){return new ka(this.queryList)}setDirty(){this.queryList.setDirty()}}class Na{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Na(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ha(t,e).matches&&this.queries[e].setDirty()}}class Ra{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Da{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Da(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Pa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Pa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ma(e,i)),this.matchTNodeWithReadOption(t,e,We(e,t,i,!1,!1))}else n===oa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,We(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Is||r===fa||r===oa&&4&e.type)this.addMatch(e.index,-2);else{const n=We(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ma(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function La(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ss(t,e):4&t.type?ua(t,e):null}(e,t):-2===n?function(t,e,n){return n===Is?Ss(e,t):n===oa?ua(e,t):n===fa?ya(e,t):void 0}(t,e,r):Qe(t,t[1],n,e)}function Va(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:La(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Fa(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Va(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ft;t<s.length;t++){const e=s[t];e[17]===e[3]&&Fa(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Fa(n[1],n,i,r)}}}}}return r}function Ua(t){const e=$t(),n=Wt(),r=oe();se(r+1);const i=Ha(n,r);if(t.dirty&&Ut(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Fa(n,e,r,[]):Va(n,e,i,r);t.reset(o,xs),t.notifyOnChanges()}return!0}return!1}function qa(t,e,n,r){const i=Wt();if(i.firstCreatePass){const o=Yt();(function(t,e,n){null===t.queries&&(t.queries=new Da),t.queries.track(new Pa(e,n))})(i,new Ra(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new ja(4==(4&n));Si(t,e,r,r.destroy),null===e[19]&&(e[19]=new Na),e[19].queries.push(new ka(r))}(i,$t(),n)}function Ba(){return t=$t(),e=oe(),t[19].queries[e].queryList;var t,e}function Ha(t,e){return t.queries.getByIndex(e)}function za(t=N.Default){const e=ta(!0);if(null!=e||t&N.Optional)return e;Ot("ChangeDetectorRef")}const Ga=new on("Application Initializer");let Ka=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ts,this.reject=Ts,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Lo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(En(Ga,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const $a=new on("AppId"),Wa={provide:$a,useFactory:function(){return`${Qa()}${Qa()}${Qa()}`},deps:[]};function Qa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ya=new on("Platform Initializer"),Xa=new on("Platform ID"),Ja=new on("appBootstrapListener");let Za=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const tu=new on("LocaleId"),eu=new on("DefaultCurrencyCode");class nu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const ru=function(t){return new Ca(t)},iu=ru,ou=function(t){return Promise.resolve(ru(t))},su=function(t){const e=ru(t),n=_r(lt(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new Ea(n)),t},[]);return new nu(e,n)},au=su,uu=function(t){return Promise.resolve(su(t))};let cu=(()=>{class t{constructor(){this.compileModuleSync=iu,this.compileModuleAsync=ou,this.compileModuleAndAllComponentsSync=au,this.compileModuleAndAllComponentsAsync=uu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const lu=(()=>Promise.resolve(0))();function hu(t){"undefined"==typeof Zone?lu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class fu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xa(!1),this.onMicrotaskEmpty=new xa(!1),this.onStable=new xa(!1),this.onError=new xa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=H.requestAnimationFrame,e=H.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(H,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gu(t),pu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return mu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),yu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return mu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),yu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,gu(t),pu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(fu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,du,Ts,Ts);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const du={};function pu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function mu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function yu(t){t._nesting--,pu(t)}class vu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xa,this.onMicrotaskEmpty=new xa,this.onStable=new xa,this.onError=new xa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let bu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fu.assertNotInAngularZone(),hu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(En(fu))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})(),wu=(()=>{class t{constructor(){this._applications=new Map,Tu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Tu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();class _u{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Eu(t){Tu=t}let Ou,Tu=new _u,Su=!0,Cu=!1;function Iu(){return Cu=!0,Su}function xu(){if(Cu)throw new Error("Cannot enable prod mode after platform setup.");Su=!1}const Au=new on("AllowMultipleToken");class ju{constructor(t,e){this.name=t,this.token=e}}function ku(t,e,n=[]){const r=`Platform: ${e}`,i=new on(r);return(e=[])=>{let o=Nu();if(!o||o.injector.get(Au,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:eo,useValue:"platform"});!function(t){if(Ou&&!Ou.destroyed&&!Ou.injector.get(Au,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ou=t.get(Ru);const e=t.get(Ya,null);e&&e.forEach(t=>t())}(mo.create({providers:t,name:r}))}return function(t){const e=Nu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Nu(){return Ou&&!Ou.destroyed?Ou:null}let Ru=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new vu:("zone.js"===t?void 0:t)||new fu({enableLongStackTrace:Iu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:fu,useValue:n}];return n.run(()=>{const e=mo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(vr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Mu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Lo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Ka);return t.runInitializers(),t.donePromise.then(()=>(fs(i.injector.get(tu,ls)||ls),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Du({},e);return function(t,e,n){const r=new Ca(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Pu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${y(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(En(mo))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Du(t,e){return Array.isArray(e)?e.reduce(Du,t):Object.assign(Object.assign({},t),e)}let Pu=(()=>{class t{constructor(t,e,n,r,i,a){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{fu.assertNotInAngularZone(),hu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{fu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(t=>{return u()((e=p,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,f);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof _s?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ca),i=n.create(mo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(bu,null),a=s&&i.injector.get(wu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Mu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),Iu()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Mu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ja,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(En(fu),En(Za),En(mo),En(vr),En(Os),En(Ka))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Mu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Lu{}class Vu{}const Fu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Uu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Fu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>qu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>qu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(En(cu),En(Vu,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function qu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Bu=function(t){return null},Hu=ku(null,"core",[{provide:Xa,useValue:"unknown"},{provide:Ru,deps:[mo]},{provide:wu,deps:[]},{provide:Za,deps:[]}]),zu=[{provide:Pu,useClass:Pu,deps:[fu,Za,mo,vr,Os,Ka]},{provide:_a,deps:[fu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ka,useClass:Ka,deps:[[new Cn,Ga]]},{provide:cu,useClass:cu,deps:[]},Wa,{provide:Ks,useFactory:function(){return na},deps:[]},{provide:Ws,useFactory:function(){return ra},deps:[]},{provide:tu,useFactory:function(t){return fs(t=t||"undefined"!=typeof $localize&&$localize.locale||ls),t},deps:[[new Sn(tu),new Cn,new In]]},{provide:eu,useValue:"USD"}];let Gu=(()=>{class t{constructor(t){}}return t.\u0275mod=it({type:t}),t.\u0275inj=T({factory:function(e){return new(e||t)(En(Pu))},providers:zu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return y}),n.d(e,"c",function(){return w}),n.d(e,"d",function(){return _}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return l}),n.d(e,"i",function(){return h}),n.d(e,"j",function(){return d}),n.d(e,"k",function(){return p}),n.d(e,"l",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return g});var r=n("mrSG");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function c(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g(){return a().indexOf("MSAppHost/")>=0}var m=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,y.prototype.create),o}return Object(r.c)(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new m(i,a,r);return u},t}();function v(t,e){return t.replace(b,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _(t,e){var n=new E(t,e);return n.subscribe.bind(n)}var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=O),void 0===r.error&&(r.error=O),void 0===r.complete&&(r.complete=O);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function O(){}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return C}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return T}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),w=new u.P("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:_,deps:[v,u.A,[new u.B,b]]};let C=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({factory:function(e){return new(e||t)(u.Rb(u.C))},providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.e)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.f)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.f)(e,t)},createSubscribe:s.d,ErrorFactory:s.b,deepExtend:s.f}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.h)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.m)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Rb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=Object(r.Gb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Rb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Rb)(s).location;return new b(Object(r.Rb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(m),r.Rb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Gb)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new _(Object(r.Rb)(m),Object(r.Rb)(a))}function O(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.mb;class C{}let I=(()=>{class t extends C{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.v))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function x(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let j=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new k(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new k(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L),r.Kb(r.t))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class k{constructor(t,e){this.record=t,this.view=e}}let N=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new R,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){D("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){D("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class R{constructor(){this.$implicit=null,this.ngIf=null}}function D(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let P=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[{provide:C,useClass:I}]}),t})();function M(t){return"server"===t}let L=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new V(Object(r.Rb)(s),window)}),t})();class V{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=F(this.window.history)||F(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function F(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class U extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new U,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=B||(B=document.querySelector("base"),B)?B.getAttribute("href"):null;return null==e?null:(n=e,q||(q=document.createElement("a")),q.setAttribute("href",n),"/"===q.pathname.charAt(0)?q.pathname:"/"+q.pathname);var n}resetBaseElement(){B=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return x(document.cookie,t)}}let q,B=null;const H=new r.r("TRANSITION_ID"),z=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[H,s,r.s],multi:!0}];class G{static init(){Object(r.X)(new G)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const K=new r.r("EventManagerPlugins");let $=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(K),r.Rb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class W{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Q=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Y=(()=>{class t extends Q{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const X={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},J=/%COMP%/g;function Z(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Z(t,i,n):(i=i.replace(J,t),n.push(i))}return n}function tt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let et=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new nt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new rt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new it(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Z(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Rb($),r.Rb(Y),r.Rb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class nt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(X[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=X[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=X[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,tt(n)):this.eventManager.addEventListener(t,e,tt(n))}}class rt extends nt{constructor(t,e,n,r){super(t),this.component=n;const i=Z(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(J,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(J,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class it extends nt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Z(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ot=(()=>{class t extends W{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const st=["alt","control","meta","shift"],at={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ut={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ct={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let lt=(()=>{class t extends W{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(st.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ut.hasOwnProperty(e)&&(e=ut[e]))}return at[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),st.forEach(r=>{r!=n&&(0,ct[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const ht=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){U.makeCurrent(),G.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],ft=Object(r.S)(r.W,"browser",ht),dt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:K,useClass:ot,multi:!0,deps:[s,r.A,r.C]},{provide:K,useClass:lt,multi:!0,deps:[s]},[],{provide:et,useClass:et,deps:[$,Y,r.c]},{provide:r.F,useExisting:et},{provide:Q,useExisting:Y},{provide:Y,useClass:Y,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:$,useClass:$,deps:[K,r.A]},[]];let pt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:H,useExisting:r.c},z]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(t,12))},providers:dt,imports:[P,r.f]}),t})();"undefined"!=typeof window&&window;var gt=n("HDdC"),mt=n("DH7j"),yt=n("lJxs"),vt=n("XoHu"),bt=n("Cfvw");function wt(t,e){return new gt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(bt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const _t=new r.r("NgValueAccessor"),Et={provide:_t,useExisting:Object(r.U)(()=>Ot),multi:!0};let Ot=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.zb([Et])]}),t})();const Tt={provide:_t,useExisting:Object(r.U)(()=>Ct),multi:!0},St=new r.r("CompositionEventMode");let Ct=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(St,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([Tt])]}),t})();function It(t){return null==t||0===t.length}function xt(t){return null!=t&&"number"==typeof t.length}const At=new r.r("NgValidators"),jt=new r.r("NgAsyncValidators"),kt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Nt{static min(t){return e=>{if(It(e.value)||It(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(It(e.value)||It(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return It(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return It(t.value)||kt.test(t.value)?null:{email:!0}}static minLength(t){return e=>It(e.value)||!xt(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>xt(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Nt.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(It(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Rt);return 0==e.length?null:function(t){return Pt(Mt(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Rt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(mt.a)(e))return wt(e,null);if(Object(vt.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return wt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return wt(t=1===t.length&&Object(mt.a)(t[0])?t[0]:t,null).pipe(Object(yt.a)(t=>e(...t)))}return wt(t,null)}(Mt(t,e).map(Dt)).pipe(Object(yt.a)(Pt))}}}function Rt(t){return null!=t}function Dt(t){const e=Object(r.rb)(t)?Object(bt.a)(t):t;return Object(r.qb)(e),e}function Pt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Mt(t,e){return e.map(e=>e(t))}function Lt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Vt(t){return null!=t?Nt.compose(Lt(t)):null}function Ft(t){return null!=t?Nt.composeAsync(Lt(t)):null}function Ut(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let qt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Vt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ft(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),Bt=(()=>{class t extends qt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Ht(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const Ht=r.Pb(Bt);class zt extends qt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Gt=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(zt,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();const Kt={provide:_t,useExisting:Object(r.U)(()=>$t),multi:!0};let $t=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([Kt])]}),t})();const Wt={provide:_t,useExisting:Object(r.U)(()=>Yt),multi:!0};let Qt=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Yt=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(zt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(Qt),r.Kb(r.s))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.zb([Wt])]}),t})();const Xt={provide:_t,useExisting:Object(r.U)(()=>Jt),multi:!0};let Jt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([Xt])]}),t})();const Zt={provide:_t,useExisting:Object(r.U)(()=>te),multi:!0};let te=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([Zt])]}),t})();const ee={provide:_t,useExisting:Object(r.U)(()=>ne),multi:!0};let ne=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([ee])]}),t})();function re(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ie(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const oe=[Ot,Jt,$t,te,ne,Yt];function se(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ae="VALID",ue="INVALID",ce="PENDING",le="DISABLED";function he(t){return(ge(t)?t.validators:t)||null}function fe(t){return Array.isArray(t)?Vt(t):t||null}function de(t,e){return(ge(e)?e.asyncValidators:t)||null}function pe(t){return Array.isArray(t)?Ft(t):t||null}function ge(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class me{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=fe(this._rawValidators),this._composedAsyncValidatorFn=pe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ae}get invalid(){return this.status===ue}get pending(){return this.status==ce}get disabled(){return this.status===le}get enabled(){return this.status!==le}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=fe(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=pe(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ce,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=le,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ae,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ae&&this.status!==ce||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?le:ae}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ce,this._hasOwnPendingAsyncValidator=!0;const e=Dt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof ve?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof be&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?le:this.errors?ue:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ce)?ce:this._anyControlsHaveStatus(ue)?ue:ae}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ge(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ye extends me{constructor(t=null,e,n){super(he(e),de(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){se(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){se(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class ve extends me{constructor(t,e,n){super(he(e),de(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof ye?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class be extends me{constructor(t,e,n){super(he(e),de(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof ye?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const we={provide:zt,useExisting:Object(r.U)(()=>Ee)},_e=(()=>Promise.resolve(null))();let Ee=(()=>{class t extends zt{constructor(t,e,n,i){super(),this.control=new ye,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{var e;t.constructor===Ct?n=t:(e=t,oe.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var t,e;(function(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Ut(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Ut(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);{const n=()=>t.updateValueAndValidity();re(e._rawValidators,n),re(e._rawAsyncValidators,n)}})(t=this.control,e=this),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ie(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ie(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){_e.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;_e.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Bt,9),r.Kb(At,10),r.Kb(jt,10),r.Kb(_t,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([we]),r.xb,r.yb]}),t})();const Oe={provide:At,useExisting:Object(r.U)(()=>Te),multi:!0};let Te=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?Nt.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Bb("required",e.required?"":null)},inputs:{required:"required"},features:[r.zb([Oe])]}),t})(),Se=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})(),Ce=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[Qt],imports:[Se]}),t})();var Ie=n("LRne"),xe=n("5+tZ");function Ae(t,e){return Object(xe.a)(t,e,1)}var je=n("7o/Q");function ke(t,e){return function(n){return n.lift(new Ne(t,e))}}class Ne{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Re(t,this.predicate,this.thisArg))}}class Re extends je.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class De{}class Pe{}class Me{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Me?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Me;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Me?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Le{encodeKey(t){return Ve(t)}encodeValue(t){return Ve(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Ve(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Fe{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Le,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Fe({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Ue(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function qe(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Be(t){return"undefined"!=typeof FormData&&t instanceof FormData}class He{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Me),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Fe,this.urlWithParams=e}serializeBody(){return null===this.body?null:Ue(this.body)||qe(this.body)||Be(this.body)||"string"==typeof this.body?this.body:this.body instanceof Fe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Be(this.body)?null:qe(this.body)?this.body.type||null:Ue(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Fe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new He(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var ze=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Ge{constructor(t,e=200,n="OK"){this.headers=t.headers||new Me,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Ke extends Ge{constructor(t={}){super(t),this.type=ze.ResponseHeader}clone(t={}){return new Ke({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class $e extends Ge{constructor(t={}){super(t),this.type=ze.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new $e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class We extends Ge{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Qe(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Ye=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof He)r=t;else{let i,o;i=n.headers instanceof Me?n.headers:new Me(n.headers),n.params&&(o=n.params instanceof Fe?n.params:new Fe({fromObject:n.params})),r=new He(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Ie.a)(r).pipe(Ae(t=>this.handler.handle(t)));if(t instanceof He||"events"===n.observe)return i;const o=i.pipe(ke(t=>t instanceof $e));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(yt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(yt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(yt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(yt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Fe).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Qe(n,e))}post(t,e,n={}){return this.request("POST",t,Qe(n,e))}put(t,e,n={}){return this.request("PUT",t,Qe(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(De))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class Xe{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Je=new r.r("HTTP_INTERCEPTORS");let Ze=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const tn=/^\)\]\}',?\n/;class en{}let nn=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),rn=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new gt.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Me(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Ke({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(tn,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new $e({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new We({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new We({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:ze.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:ze.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:ze.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(en))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const on=new r.r("XSRF_COOKIE_NAME"),sn=new r.r("XSRF_HEADER_NAME");class an{}let un=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=x(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s),r.Rb(r.C),r.Rb(on))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),cn=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(an),r.Rb(sn))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),ln=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Je,[]);this.chain=t.reduceRight((t,e)=>new Xe(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Pe),r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),hn=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:cn,useClass:Ze}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:on,useValue:e.cookieName}:[],e.headerName?{provide:sn,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[cn,{provide:Je,useExisting:cn,multi:!0},{provide:an,useClass:un},{provide:on,useValue:"XSRF-TOKEN"},{provide:sn,useValue:"X-XSRF-TOKEN"}]}),t})(),fn=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[Ye,{provide:De,useClass:ln},rn,{provide:Pe,useExisting:rn},nn,{provide:en,useExisting:nn}],imports:[[hn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var dn=n("XNiG"),pn=n("9ppp");class gn extends dn.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new pn.a;return this._value}next(t){super.next(this._value=t)}}var mn=n("z+Ro");class yn extends je.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class vn extends je.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var bn=n("SeVD");function wn(t,e,n,r,i=new vn(t,n,r)){if(!i.closed)return e instanceof gt.a?e.subscribe(i):Object(bn.a)(e)(i)}var _n=n("yCtX");const En={};class On{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Tn(t,this.resultSelector))}}class Tn extends yn{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(En),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(wn(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===En?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Sn=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Cn=n("bHdf");function In(...t){return Object(Cn.a)(1)(Object(Ie.a)(...t))}var xn=n("EY2u");function An(t){return new gt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(bt.a)(n):Object(xn.b)()).subscribe(e)})}var jn=n("zx2A");function kn(t,e){return"function"==typeof e?n=>n.pipe(kn((n,r)=>Object(bt.a)(t(n,r)).pipe(Object(yt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Nn(t))}class Nn{constructor(t){this.project=t}call(t,e){return e.subscribe(new Rn(t,this.project))}}class Rn extends jn.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new jn.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(jn.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Dn=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Pn(t){return e=>0===t?Object(xn.b)():e.lift(new Mn(t))}class Mn{constructor(t){if(this.total=t,this.total<0)throw new Dn}call(t,e){return e.subscribe(new Ln(t,this.total))}}class Ln extends je.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Vn(...t){const e=t[t.length-1];return Object(mn.a)(e)?(t.pop(),n=>In(t,n,e)):e=>In(t,e)}function Fn(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Un(t,e,n))}}class Un{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new qn(t,this.accumulator,this.seed,this.hasSeed))}}class qn extends je.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Bn(t){return function(e){const n=new Hn(t),r=e.lift(n);return n.caught=r}}class Hn{constructor(t){this.selector=t}call(t,e){return e.subscribe(new zn(t,this.selector,this.caught))}}class zn extends jn.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new jn.a(this);this.add(r);const i=Object(jn.c)(n,r);i!==r&&this.add(i)}}}function Gn(t){return function(e){return 0===t?Object(xn.b)():e.lift(new Kn(t))}}class Kn{constructor(t){if(this.total=t,this.total<0)throw new Dn}call(t,e){return e.subscribe(new $n(t,this.total))}}class $n extends je.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Wn(t=Xn){return e=>e.lift(new Qn(t))}class Qn{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Yn(t,this.errorFactory))}}class Yn extends je.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(jw){t=jw}this.destination.error(t)}}}function Xn(){return new Sn}function Jn(t=null){return e=>e.lift(new Zn(t))}class Zn{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new tr(t,this.defaultValue))}}class tr extends je.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var er=n("SpAZ");function nr(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ke((e,n)=>t(e,n,r)):er.a,Pn(1),n?Jn(e):Wn(()=>new Sn))}var rr=n("vkgz"),ir=n("quSY");class or{constructor(t){this.callback=t}call(t,e){return e.subscribe(new sr(t,this.callback))}}class sr extends je.a{constructor(t,e){super(t),this.add(new ir.a(e))}}class ar{constructor(t,e){this.id=t,this.url=e}}class ur extends ar{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cr extends ar{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lr extends ar{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class hr extends ar{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fr extends ar{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dr extends ar{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pr extends ar{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gr extends ar{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mr extends ar{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vr{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class br{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wr{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _r{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Er{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Or{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Tr="primary";class Sr{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Cr(t){return new Sr(t)}function Ir(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function xr(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ar(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!jr(t[i],e[i]))return!1;return!0}function jr(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function kr(t){return Array.prototype.concat.apply([],t)}function Nr(t){return t.length>0?t[t.length-1]:null}function Rr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Dr(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(bt.a)(Promise.resolve(t)):Object(Ie.a)(t)}function Pr(t,e,n){return n?function(t,e){return Ar(t,e)}(t.queryParams,e.queryParams)&&Mr(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>jr(t[n],e[n]))}(t.queryParams,e.queryParams)&&Lr(t.root,e.root)}function Mr(t,e){if(!Br(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Mr(t.children[n],e.children[n]))return!1}return!0}function Lr(t,e){return Vr(t,e,e.segments)}function Vr(t,e,n){if(t.segments.length>n.length)return!!Br(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Br(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Lr(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Br(t.segments,r)&&!!t.children.primary&&Vr(t.children.primary,e,i)}}class Fr{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cr(this.queryParams)),this._queryParamMap}toString(){return Gr.serialize(this)}}class Ur{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Rr(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kr(this)}}class qr{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Cr(this.parameters)),this._parameterMap}toString(){return Zr(this)}}function Br(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Hr{}class zr{parse(t){const e=new ii(t);return new Fr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${$r(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Qr(e)}=${Qr(t)}`).join("&"):`${Qr(e)}=${Qr(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Gr=new zr;function Kr(t){return t.segments.map(t=>Zr(t)).join("/")}function $r(t,e){if(!t.hasChildren())return Kr(t);if(e){const e=t.children.primary?$r(t.children.primary,!1):"",n=[];return Rr(t.children,(t,e)=>{e!==Tr&&n.push(`${e}:${$r(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Rr(t.children,(t,r)=>{r===Tr&&(n=n.concat(e(t,r)))}),Rr(t.children,(t,r)=>{r!==Tr&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Tr?[$r(t.children.primary,!1)]:[`${n}:${$r(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Kr(t)}/${e[0]}`:`${Kr(t)}/(${e.join("//")})`}}function Wr(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qr(t){return Wr(t).replace(/%3B/gi,";")}function Yr(t){return Wr(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xr(t){return decodeURIComponent(t)}function Jr(t){return Xr(t.replace(/\+/g,"%20"))}function Zr(t){return`${Yr(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Yr(t)}=${Yr(e[t])}`).join("")}`;var e}const ti=/^[^\/()?;=#]+/;function ei(t){const e=t.match(ti);return e?e[0]:""}const ni=/^[^=?&#]+/,ri=/^[^?&#]+/;class ii{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ur([],{}):new Ur([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Ur(t,e)),n}parseSegment(){const t=ei(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new qr(Xr(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ei(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=ei(this.remaining);t&&(n=t,this.capture(n))}t[Xr(e)]=Xr(n)}parseQueryParam(t){const e=function(t){const e=t.match(ni);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(ri);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Jr(e),i=Jr(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ei(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Tr);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Ur([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class oi{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=si(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=si(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ai(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return ai(t,this._root).map(t=>t.value)}}function si(t,e){if(t===e.value)return e;for(const n of e.children){const e=si(t,n);if(e)return e}return null}function ai(t,e){if(t===e.value)return[e];for(const n of e.children){const r=ai(t,n);if(r.length)return r.unshift(e),r}return[]}class ui{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ci(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class li extends oi{constructor(t,e){super(t),this.snapshot=e,mi(this,t)}toString(){return this.snapshot.toString()}}function hi(t,e){const n=function(t,e){const n=new pi([],{},{},"",{},Tr,e,null,t.root,-1,{});return new gi("",new ui(n,[]))}(t,e),r=new gn([new qr("",{})]),i=new gn({}),o=new gn({}),s=new gn({}),a=new gn(""),u=new fi(r,i,s,a,o,Tr,e,n.root);return u.snapshot=n.root,new li(new ui(u,[]),n)}class fi{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(yt.a)(t=>Cr(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(yt.a)(t=>Cr(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function di(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class pi{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gi extends oi{constructor(t,e){super(e),this.url=t,mi(this,e)}toString(){return yi(this._root)}}function mi(t,e){e.value._routerState=t,e.children.forEach(e=>mi(t,e))}function yi(t){const e=t.children.length>0?` { ${t.children.map(yi).join(", ")} } `:"";return`${t.value}${e}`}function vi(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ar(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ar(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ar(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ar(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function bi(t,e){return Ar(t.params,e.params)&&function(t,e){return Br(t,e)&&t.every((t,n)=>Ar(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||bi(t.parent,e.parent))}function wi(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return wi(t,e,r);return wi(t,e)})}(t,e,n);return new ui(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return _i(e,t),t}{const n=new fi(new gn((r=e.value).url),new gn(r.params),new gn(r.queryParams),new gn(r.fragment),new gn(r.data),r.outlet,r.component,r),i=e.children.map(e=>wi(t,e));return new ui(n,i)}}var r}function _i(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)_i(t.children[n],e.children[n])}function Ei(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Oi(t){return"object"==typeof t&&null!=t&&t.outlets}function Ti(t,e,n,r,i){let o={};return r&&Rr(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Fr(n.root===t?e:Si(n.root,t,e),o,i)}function Si(t,e,n){const r={};return Rr(t.children,(t,i)=>{r[i]=t===e?n:Si(t,e,n)}),new Ur(t.segments,r)}class Ci{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ei(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Oi);if(r&&r!==Nr(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ii{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function xi(t,e,n){if(t||(t=new Ur([],{})),0===t.segments.length&&t.hasChildren())return Ai(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Oi(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Ri(a,u,e))return o;r+=2}else{if(!Ri(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Ur(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Ur(t.segments.slice(r.pathIndex),t.children),Ai(e,0,i)}return r.match&&0===i.length?new Ur(t.segments,{}):r.match&&!t.hasChildren()?ji(t,e,n):r.match?Ai(t,0,i):ji(t,e,n)}function Ai(t,e,n){if(0===n.length)return new Ur(t.segments,{});{const r=function(t){return Oi(t[0])?t[0].outlets:{[Tr]:t}}(n),i={};return Rr(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=xi(t.children[r],e,n))}),Rr(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Ur(t.segments,i)}}function ji(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Oi(o)){const t=ki(o.outlets);return new Ur(r,t)}if(0===i&&Ei(n[0])){r.push(new qr(t.segments[e].path,Ni(n[0]))),i++;continue}const s=Oi(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ei(a)?(r.push(new qr(s,Ni(a))),i+=2):(r.push(new qr(s,{})),i++)}return new Ur(r,{})}function ki(t){const e={};return Rr(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=ji(new Ur([],{}),0,t))}),e}function Ni(t){const e={};return Rr(t,(t,n)=>e[n]=`${t}`),e}function Ri(t,e,n){return t==n.path&&Ar(e,n.parameters)}class Di{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),vi(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=ci(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Rr(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=ci(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=ci(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Er(t.value.snapshot))}),t.children.length&&this.forwardEvent(new wr(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(vi(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Pi(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Pi(t){vi(t.value),t.children.forEach(Pi)}class Mi{constructor(t,e){this.routes=t,this.module=e}}function Li(t){return"function"==typeof t}function Vi(t){return t instanceof Fr}const Fi=Symbol("INITIAL_VALUE");function Ui(){return kn(t=>function(...t){let e,n;return Object(mn.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(mt.a)(t[0])&&(t=t[0]),Object(_n.a)(t,n).lift(new On(e))}(t.map(t=>t.pipe(Pn(1),Vn(Fi)))).pipe(Fn((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Fi)return t;if(r===Fi&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Vi(r))return r}return t},t)},Fi),ke(t=>t!==Fi),Object(yt.a)(t=>Vi(t)?t:!0===t),Pn(1)))}let qi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[Po]},encapsulation:2}),t})();function Bi(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Hi(r,zi(e,r))}}function Hi(t,e){t.children&&Bi(t.children,e)}function zi(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Gi(t){const e=t.children&&t.children.map(Gi),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Tr&&(n.component=qi),n}function Ki(t){return t.outlet||Tr}function $i(t,e){const n=t.filter(t=>Ki(t)===e);return n.push(...t.filter(t=>Ki(t)!==e)),n}const Wi={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Qi(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Wi):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||xr)(n,t,e);if(!i)return Object.assign({},Wi);const o={};Rr(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Yi(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Xi(t,e,n)&&Ki(n)!==Tr)}(t,n,r)){const i=new Ur(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Ki(o)!==Tr){const n=new Ur([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Ki(o)]=n}return i}(t,e,r,new Ur(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Xi(t,e,n))}(t,n,r)){const o=new Ur(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Xi(t,n,a)&&!i[Ki(a)]){const n=new Ur([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Ki(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Ur(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Xi(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Ji(t,e,n,r){return!!(Ki(t)===r||r!==Tr&&Xi(e,n,t))&&("**"===t.path||Qi(e,t,n).matched)}function Zi(t,e,n){return 0===e.length&&!t.children[n]}class to{constructor(t){this.segmentGroup=t||null}}class eo{constructor(t){this.urlTree=t}}function no(t){return new gt.a(e=>e.error(new to(t)))}function ro(t){return new gt.a(e=>e.error(new eo(t)))}function io(t){return new gt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class oo{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Yi(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ur(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Tr).pipe(Object(yt.a)(t=>this.createUrlTree(so(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bn(t=>{if(t instanceof eo)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof to)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Tr).pipe(Object(yt.a)(e=>this.createUrlTree(so(e),t.queryParams,t.fragment))).pipe(Bn(t=>{if(t instanceof to)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Ur([],{[Tr]:t}):t;return new Fr(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(yt.a)(t=>new Ur([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(bt.a)(r).pipe(Ae(r=>{const i=n.children[r],o=$i(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(yt.a)(t=>({segment:t,outlet:r})))}),Fn((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ke((e,n)=>t(e,n,r)):er.a,Gn(1),n?Jn(e):Wn(()=>new Sn))}())}expandSegment(t,e,n,r,i,o){return Object(bt.a)(n).pipe(Ae(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Bn(t=>{if(t instanceof to)return Object(Ie.a)(null);throw t}))),nr(t=>!!t),Bn((t,n)=>{if(t instanceof Sn||"EmptyError"===t.name){if(Zi(e,r,i))return Object(Ie.a)(new Ur([],{}));throw new to(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Ji(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):no(e):no(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ro(i):this.lineralizeSegments(n,i).pipe(Object(xe.a)(n=>{const i=new Ur(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Qi(e,r,i);if(!s)return no(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?ro(l):this.lineralizeSegments(r,l).pipe(Object(xe.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(yt.a)(t=>(n._loadedConfig=t,new Ur(r,{})))):Object(Ie.a)(new Ur(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Qi(e,n,r);if(!o)return no(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(xe.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Yi(e,s,u,o),l=new Ur(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(yt.a)(t=>new Ur(s,t)));if(0===o.length&&0===c.length)return Object(Ie.a)(new Ur(s,{}));const h=Ki(n)===i;return this.expandSegment(r,l,o,c,h?Tr:i,!0).pipe(Object(yt.a)(t=>new Ur(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Ie.a)(new Mi(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Ie.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(xe.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(yt.a)(t=>(e._loadedConfig=t,t))):function(t){return new gt.a(e=>e.error(Ir(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Ie.a)(new Mi([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Ie.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Li(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Li(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Dr(o)});return Object(Ie.a)(i).pipe(Ui(),Object(rr.a)(t=>{if(!Vi(t))return;const e=Ir(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(yt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Ie.a)(n);if(r.numberOfChildren>1||!r.children.primary)return io(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Fr(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Rr(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Rr(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Ur(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function so(t){const e={};for(const n of Object.keys(t.children)){const r=so(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Ur(t.segments.concat(e.segments),e.children)}return t}(new Ur(t.segments,e))}class ao{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class uo{constructor(t,e){this.component=t,this.route=e}}function co(t,e,n){const r=t._root;return ho(r,e?e._root:null,n,[r.value])}function lo(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function ho(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ci(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Br(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Br(t.url,e.url)||!Ar(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bi(t,e)||!Ar(t.queryParams,e.queryParams);case"paramsChange":default:return!bi(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ao(r)):(o.data=s.data,o._resolvedData=s._resolvedData),ho(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new uo(a.outlet.component,s))}else s&&fo(e,a,i),i.canActivateChecks.push(new ao(r)),ho(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Rr(o,(t,e)=>fo(t,n.getContext(e),i)),i}function fo(t,e,n){const r=ci(t),i=t.value;Rr(r,(t,r)=>{fo(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new uo(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class po{}function go(t){return new gt.a(e=>e.error(t))}class mo{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Yi(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Tr);if(null===e)return null;const n=new pi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Tr,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ui(n,e),i=new gi(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=di(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=$i(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!yo(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Tr?-1:e.value.outlet===Tr?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Zi(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Ji(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Nr(n).parameters:{};i=new pi(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wo(t),Ki(t),t.component,t,vo(e),bo(e)+n.length,_o(t))}else{const r=Qi(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new pi(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wo(t),Ki(t),t.component,t,vo(e),bo(e)+o.length,_o(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Yi(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new ui(i,t)]}if(0===a.length&&0===c.length)return[new ui(i,[])];const l=Ki(t)===r,h=this.processSegment(a,u,c,l?Tr:r);return null===h?null:[new ui(i,h)]}}function yo(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function vo(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function bo(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function wo(t){return t.data||{}}function _o(t){return t.resolve||{}}function Eo(t){return kn(e=>{const n=t(e);return n?Object(bt.a)(n).pipe(Object(yt.a)(()=>e)):Object(Ie.a)(e)})}class Oo extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const To=new r.r("ROUTES");class So{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(yt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Mi(kr(i.injector.get(To,void 0,r.q.Self|r.q.Optional)).map(Gi),i)}))}loadModuleFactory(t){return"string"==typeof t?Object(bt.a)(this.loader.load(t)):Dr(t()).pipe(Object(xe.a)(t=>t instanceof r.w?Object(Ie.a)(t):Object(bt.a)(this.compiler.compileModuleAsync(t))))}}class Co{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Io,this.attachRef=null}}class Io{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Co,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class xo{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Ao(t){throw t}function jo(t,e,n){return e.parse("/")}function ko(t,e){return Object(Ie.a)(null)}let No=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new dn.a,this.errorHandler=Ao,this.malformedUriErrorHandler=jo,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ko,afterPreactivation:ko},this.urlHandlingStrategy=new xo,this.routeReuseStrategy=new Oo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Fr(new Ur([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new So(s,a,t=>this.triggerEvent(new yr(t)),t=>this.triggerEvent(new vr(t))),this.routerState=hi(this.currentUrlTree,this.rootComponentType),this.transitions=new gn({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(ke(t=>0!==t.id),Object(yt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),kn(t=>{let n=!1,r=!1;return Object(Ie.a)(t).pipe(Object(rr.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),kn(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Ie.a)(t).pipe(kn(t=>{const n=this.transitions.getValue();return e.next(new ur(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?xn.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,kn(t=>function(t,e,n,r,i){return new oo(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(yt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(rr.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(xe.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new mo(t,e,n,r,i,o).recognize();return null===s?go(new po):Object(Ie.a)(s)}catch(jw){return go(jw)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(yt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(rr.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new fr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new ur(n,this.serializeUrl(r),i,o);e.next(a);const u=hi(r,this.rootComponentType).snapshot;return Object(Ie.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),xn.a}),Eo(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(rr.a)(t=>{const e=new dr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(yt.a)(t=>Object.assign(Object.assign({},t),{guards:co(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(xe.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Ie.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(bt.a)(t).pipe(Object(xe.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Ie.a)(!0);const s=o.map(o=>{const s=lo(o,e,i);let a;if(function(t){return t&&Li(t.canDeactivate)}(s))a=Dr(s.canDeactivate(t,e,n,r));else{if(!Li(s))throw new Error("Invalid CanDeactivate guard");a=Dr(s(t,e,n,r))}return a.pipe(nr())});return Object(Ie.a)(s).pipe(Ui())}(t.component,t.route,n,e,r)),nr(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(xe.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(bt.a)(e).pipe(Ae(e=>In(function(t,e){return null!==t&&e&&e(new br(t)),Object(Ie.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new _r(t)),Object(Ie.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>An(()=>{const i=e.guards.map(i=>{const o=lo(i,e.node,n);let s;if(function(t){return t&&Li(t.canActivateChild)}(o))s=Dr(o.canActivateChild(r,t));else{if(!Li(o))throw new Error("Invalid CanActivateChild guard");s=Dr(o(r,t))}return s.pipe(nr())});return Object(Ie.a)(i).pipe(Ui())}));return Object(Ie.a)(i).pipe(Ui())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Ie.a)(!0);const i=r.map(r=>An(()=>{const i=lo(r,e,n);let o;if(function(t){return t&&Li(t.canActivate)}(i))o=Dr(i.canActivate(e,t));else{if(!Li(i))throw new Error("Invalid CanActivate guard");o=Dr(i(e,t))}return o.pipe(nr())}));return Object(Ie.a)(i).pipe(Ui())}(t,e.route,n))),nr(t=>!0!==t,!0))}(r,o,t,e):Object(Ie.a)(n)),Object(yt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(rr.a)(t=>{if(Vi(t.guardsResult)){const e=Ir(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new pr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),ke(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new lr(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Eo(t=>{if(t.guards.canActivateChecks.length)return Object(Ie.a)(t).pipe(Object(rr.a)(t=>{const e=new gr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),kn(t=>{let n=!1;return Object(Ie.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(xe.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Ie.a)(t);let o=0;return Object(bt.a)(n).pipe(Ae(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Ie.a)({});const o={};return Object(bt.a)(i).pipe(Object(xe.a)(i=>function(t,e,n,r){const i=lo(t,e,r);return Dr(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(rr.a)(t=>{o[i]=t}))),Gn(1),Object(xe.a)(()=>Object.keys(o).length===i.length?Object(Ie.a)(o):xn.a))}(t._resolve,t,e,r).pipe(Object(yt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),di(t,n).resolve),null)))}(t.route,e,r,i)),Object(rr.a)(()=>o++),Gn(1),Object(xe.a)(e=>o===n.length?Object(Ie.a)(t):xn.a))})),Object(rr.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new lr(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(rr.a)(t=>{const e=new mr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Eo(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(yt.a)(t=>{const e=function(t,e,n){const r=wi(t,e._root,n?n._root:void 0);return new li(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(rr.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(yt.a)(t=>(new Di(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(rr.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new lr(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new or(i))),Bn(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Vi(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new lr(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new hr(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Jh){t.reject(Jh)}}var i;return xn.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Bi(t),this.config=t.map(Gi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Ti(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Ci(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Rr(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Ci(n,e,r)}(n);if(o.toRoot())return Ti(e.root,new Ur([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Ii(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Ii(t,t===e.root,0)}const r=Ei(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Ii(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Ai(s.segmentGroup,s.index,o.commands):xi(s.segmentGroup,s.index,o.commands);return Ti(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Vi(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(jw){e=this.malformedUriErrorHandler(jw,this.urlSerializer,t)}return e}isActive(t,e){if(Vi(t))return Pr(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Pr(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new cr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.N),r.Rb(Hr),r.Rb(Io),r.Rb(_),r.Rb(r.s),r.Rb(r.x),r.Rb(r.i),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Ro=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new dn.a,this.subscription=t.events.subscribe(t=>{t instanceof cr&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Do(this.skipLocationChange),replaceUrl:Do(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Do(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(No),r.Kb(fi),r.Kb(m))},t.\u0275dir=r.Fb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Ub("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Qb("href",e.href,r.bc),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function Do(t){return""===t||!!t}let Po=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Tr,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Mo(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Io),r.Kb(r.Q),r.Kb(r.j),r.Sb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Mo{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===fi?this.route:t===Io?this.childContexts:this.parent.get(t,e)}}class Lo{}class Vo{preload(t,e){return Object(Ie.a)(null)}}let Fo=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new So(e,n,e=>t.triggerEvent(new yr(e)),e=>t.triggerEvent(new vr(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(ke(t=>t instanceof cr),Ae(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(bt.a)(n).pipe(Object(Cn.a)(),Object(yt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(xe.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(No),r.Rb(r.x),r.Rb(r.i),r.Rb(r.s),r.Rb(Lo))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Uo=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ur?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof cr&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Or&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Or(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(No),r.Rb(L),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const qo=new r.r("ROUTER_CONFIGURATION"),Bo=new r.r("ROUTER_FORROOT_GUARD"),Ho=[_,{provide:Hr,useClass:zr},{provide:No,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new No(null,t,e,n,r,i,s,kr(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Hr,Io,_,r.s,r.x,r.i,To,qo,[class{},new r.B],[class{},new r.B]]},Io,{provide:fi,useFactory:function(t){return t.routerState.root},deps:[No]},{provide:r.x,useClass:r.K},Fo,Vo,class{preload(t,e){return e().pipe(Bn(()=>Object(Ie.a)(null)))}},{provide:qo,useValue:{enableTracing:!1}}];function zo(){return new r.z("Router",No)}let Go=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Ho,Qo(e),{provide:Bo,useFactory:Wo,deps:[[No,new r.B,new r.J]]},{provide:qo,useValue:n||{}},{provide:m,useFactory:$o,deps:[a,[new r.p(v),new r.B],qo]},{provide:Uo,useFactory:Ko,deps:[No,L,qo]},{provide:Lo,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Vo},{provide:r.z,multi:!0,useFactory:zo},[Yo,{provide:r.d,multi:!0,useFactory:Xo,deps:[Yo]},{provide:Zo,useFactory:Jo,deps:[Yo]},{provide:r.b,multi:!0,useExisting:Zo}]]}}static forChild(e){return{ngModule:t,providers:[Qo(e)]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(Bo,8),r.Rb(No,8))}}),t})();function Ko(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Uo(t,e,n)}function $o(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function Wo(t){return"guarded"}function Qo(t){return[{provide:r.a,multi:!0,useValue:t},{provide:To,multi:!0,useValue:t}]}let Yo=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new dn.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(No),r=this.injector.get(qo);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Ie.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(qo),n=this.injector.get(Fo),i=this.injector.get(Uo),o=this.injector.get(No),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function Xo(t){return t.appInitializer.bind(t)}function Jo(t){return t.bootstrapListener.bind(t)}const Zo=new r.r("Router Initializer"),ts=function(){return["/first"]};let es=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-error"]],decls:6,vars:2,consts:[["role","main",1,"content"],[1,"card","highlight-card","card-small",2,"background-color","red"],[3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"span"),r.ec(3,"404"),r.Mb(),r.Mb(),r.Nb(4,"a",2),r.ec(5,"First"),r.Mb(),r.Mb()),2&t&&(r.Ab(4),r.Xb("routerLink",r.Yb(1,ts)))},directives:[Ro],styles:[""]}),t})();const ns={production:!0,custom:"This is real",serverUrl:"https://prf-node-hellow123.herokuapp.com/",firebase:{apiKey:"AIzaSyBBHxfLeKvlM6DwyMnNysn7g_0r7YwnZvo",authDomain:"prf-homework.firebaseapp.com",projectId:"prf-homework",storageBucket:"prf-homework.appspot.com",messagingSenderId:"905482988214",appId:"1:905482988214:web:743657c5442fb4086fd417"}};let rs=(()=>{class t{constructor(t){this.http=t}greet(){return this.http.get(ns.serverUrl,{responseType:"text",withCredentials:!0})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ye))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var is=n("D0XW");function os(){return t=>t.lift(new ss)}class ss{call(t,e){return e.subscribe(new as(t))}}class as extends je.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class us{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new cs(t,this.compare,this.keySelector))}}class cs extends je.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var ls=n("pxpQ"),hs=n("spgP"),fs=n("Jgta"),ds=n("zIRd"),ps=n("q/0M"),gs=n("qOnz"),ms=function(t,e){return(ms=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ys(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var vs,bs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ws=ws||{},_s=bs||self;function Es(){}function Os(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ts(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ss="closure_uid_"+(1e9*Math.random()>>>0),Cs=0;function Is(t,e,n){return t.call.apply(t.bind,arguments)}function xs(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function As(t,e,n){return(As=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Is:xs).apply(null,arguments)}function js(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ks(){return Date.now()}function Ns(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Rs(){this.j=this.j,this.i=this.i}Rs.prototype.j=!1,Rs.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Ss)&&t[Ss]||(t[Ss]=++Cs)}(this)},Rs.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ds=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ps=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ms(t){return Array.prototype.concat.apply([],arguments)}function Ls(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Vs(t){return/^[\s\xa0]*$/.test(t)}var Fs,Us=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function qs(t,e){return-1!=t.indexOf(e)}function Bs(t,e){return t<e?-1:t>e?1:0}t:{var Hs=_s.navigator;if(Hs){var zs=Hs.userAgent;if(zs){Fs=zs;break t}}Fs=""}function Gs(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ks(t){var e={};for(var n in t)e[n]=t[n];return e}var $s="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ws(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<$s.length;o++)n=$s[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Qs(t){return Qs[" "](t),t}Qs[" "]=Es;var Ys,Xs,Js=qs(Fs,"Opera"),Zs=qs(Fs,"Trident")||qs(Fs,"MSIE"),ta=qs(Fs,"Edge"),ea=ta||Zs,na=qs(Fs,"Gecko")&&!(qs(Fs.toLowerCase(),"webkit")&&!qs(Fs,"Edge"))&&!(qs(Fs,"Trident")||qs(Fs,"MSIE"))&&!qs(Fs,"Edge"),ra=qs(Fs.toLowerCase(),"webkit")&&!qs(Fs,"Edge");function ia(){var t=_s.document;return t?t.documentMode:void 0}t:{var oa="",sa=(Xs=Fs,na?/rv:([^\);]+)(\)|;)/.exec(Xs):ta?/Edge\/([\d\.]+)/.exec(Xs):Zs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xs):ra?/WebKit\/(\S+)/.exec(Xs):Js?/(?:Version)[ \/]?(\S+)/.exec(Xs):void 0);if(sa&&(oa=sa?sa[1]:""),Zs){var aa=ia();if(null!=aa&&aa>parseFloat(oa)){Ys=String(aa);break t}}Ys=oa}var ua={};function ca(t){return function(t,e){var n=ua;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Us(String(Ys)).split("."),r=Us(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Bs(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Bs(0==s[2].length,0==a[2].length)||Bs(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var la=_s.document&&Zs&&(ia()||parseInt(Ys,10))||void 0,ha=!Zs||9<=Number(la),fa=Zs&&!ca("9"),da=function(){if(!_s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{_s.addEventListener("test",Es,e),_s.removeEventListener("test",Es,e)}catch(n){}return t}();function pa(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ga(t,e){if(pa.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(na){t:{try{Qs(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ma[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}pa.prototype.b=function(){this.defaultPrevented=!0},Ns(ga,pa);var ma={2:"touch",3:"pen",4:"mouse"};ga.prototype.b=function(){ga.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,fa)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ya="closure_listenable_"+(1e6*Math.random()|0),va=0;function ba(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++va,this.Y=this.Z=!1}function wa(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function _a(t){this.src=t,this.a={},this.b=0}function Ea(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Ds(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(wa(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Oa(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}_a.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Oa(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ba(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ta="closure_lm_"+(1e6*Math.random()|0),Sa={};function Ca(t,e,n,r,i){if(r&&r.once)return xa(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ca(t,e[o],n,r,i);return null}return n=Ma(n),t&&t[ya]?t.va(e,n,Ts(r)?!!r.capture:!!r,i):Ia(t,e,n,!1,r,i)}function Ia(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ts(i)?!!i.capture:!!i;if(s&&!ha)return null;var a=Da(t);if(a||(t[Ta]=a=new _a(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ra,e=ha?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)da||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ka(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function xa(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)xa(t,e[o],n,r,i);return null}return n=Ma(n),t&&t[ya]?t.wa(e,n,Ts(r)?!!r.capture:!!r,i):Ia(t,e,n,!0,r,i)}function Aa(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Aa(t,e[o],n,r,i);else r=Ts(r)?!!r.capture:!!r,n=Ma(n),t&&t[ya]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Oa(o=t.a[e],n,r,i))&&(wa(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Da(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Oa(e,n,r,i)),(n=-1<t?e[t]:null)&&ja(n))}function ja(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ya])Ea(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ka(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Da(e))?(Ea(n,t),0==n.b&&(n.src=null,e[Ta]=null)):wa(t)}}}function ka(t){return t in Sa?Sa[t]:Sa[t]="on"+t}function Na(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ja(t),n.call(r,e)}function Ra(t,e){if(t.Y)return!0;if(!ha){if(!e)t:{e=["window","event"];for(var n=_s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Na(t,e=new ga(e,this))}return Na(t,new ga(e,this))}function Da(t){return(t=t[Ta])instanceof _a?t:null}var Pa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ma(t){return"function"==typeof t?t:(t[Pa]||(t[Pa]=function(e){return t.handleEvent(e)}),t[Pa])}function La(){Rs.call(this),this.c=new _a(this),this.J=this,this.C=null}function Va(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new pa(e,t);else if(e instanceof pa)e.target=e.target||t;else{var i=e;Ws(e=new pa(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Fa(s,r,!0,e)&&i}if(i=Fa(s=e.a=t,r,!0,e)&&i,i=Fa(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Fa(s=e.a=n[o],r,!1,e)&&i}function Fa(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Ea(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Ns(La,Rs),La.prototype[ya]=!0,(vs=La.prototype).addEventListener=function(t,e,n,r){Ca(this,t,e,n,r)},vs.removeEventListener=function(t,e,n,r){Aa(this,t,e,n,r)},vs.G=function(){if(La.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)wa(n[r]);delete e.a[t],e.b--}}this.C=null},vs.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},vs.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ua=_s.JSON.stringify;function qa(){this.b=this.a=null}var Ba,Ha=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Ga},function(t){t.reset()});function za(){var t=Qa,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ga(){this.next=this.b=this.a=null}function Ka(t){_s.setTimeout(function(){throw t},0)}function $a(t,e){Ba||function(){var t=_s.Promise.resolve(void 0);Ba=function(){t.then(Ya)}}(),Wa||(Ba(),Wa=!0),Qa.add(t,e)}qa.prototype.add=function(t,e){var n=Ha.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ga.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ga.prototype.reset=function(){this.next=this.b=this.a=null};var Wa=!1,Qa=new qa;function Ya(){for(var t;t=za();){try{t.a.call(t.b)}catch(n){Ka(n)}var e=Ha;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Wa=!1}function Xa(t,e){La.call(this),this.b=t||1,this.a=e||_s,this.f=As(this.Za,this),this.g=ks()}function Ja(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Za(t,e,n){if("function"==typeof t)n&&(t=As(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=As(t.handleEvent,t)}return 2147483647<Number(e)?-1:_s.setTimeout(t,e||0)}function tu(t){t.a=Za(function(){t.a=null,t.c&&(t.c=!1,tu(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Ns(Xa,La),(vs=Xa.prototype).aa=!1,vs.M=null,vs.Za=function(){if(this.aa){var t=ks()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Va(this,"tick"),this.aa&&(Ja(this),this.start()))}},vs.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=ks())},vs.G=function(){Xa.X.G.call(this),Ja(this),delete this.a};var eu=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}ms(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:tu(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(_s.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Rs);function nu(t){Rs.call(this),this.b=t,this.a={}}Ns(nu,Rs);var ru=[];function iu(t,e,n,r){Array.isArray(n)||(n&&(ru[0]=n.toString()),n=ru);for(var i=0;i<n.length;i++){var o=Ca(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ou(t){Gs(t.a,function(t,e){this.a.hasOwnProperty(e)&&ja(t)},t),t.a={}}function su(){this.a=!0}function au(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ua(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}nu.prototype.G=function(){nu.X.G.call(this),ou(this)},nu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},su.prototype.info=function(){};var uu={},cu=null;function lu(){return cu=cu||new La}function hu(t){pa.call(this,uu.Fa,t)}function fu(t){var e=lu();Va(e,new hu(e,t))}function du(t,e){pa.call(this,uu.STAT_EVENT,t),this.stat=e}function pu(t){var e=lu();Va(e,new du(e,t))}function gu(t){pa.call(this,uu.Ga,t)}function mu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return _s.setTimeout(function(){t()},e)}uu.Fa="serverreachability",Ns(hu,pa),uu.STAT_EVENT="statevent",Ns(du,pa),uu.Ga="timingevent",Ns(gu,pa);var yu={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},vu={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function bu(){}function wu(){}bu.prototype.a=null;var _u,Eu={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ou(){pa.call(this,"d")}function Tu(){pa.call(this,"c")}function Su(){}function Cu(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new nu(this),this.P=Iu,this.R=new Xa(t=ea?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Ns(Ou,pa),Ns(Tu,pa),Ns(Su,bu),_u=new Su;var Iu=45e3,xu={},Au={};function ju(t,e,n){t.H=1,t.i=Ju(Ku(e)),t.j=n,t.I=!0,ku(t,null)}function ku(t,e){t.u=ks(),Du(t),t.l=Ku(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),hc(n.b,"t",r),t.D=0,t.a=ol(t.g,t.g.C?e:null),0<t.O&&(t.F=new eu(As(t.Ca,t,t.a),t.O)),iu(t.J,t.a,"readystatechange",t.Xa),e=t.B?Ks(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),fu(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Nu(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ru(t,n);if(i==Au){4==e&&(t.h=4,pu(14),r=!1),au(t.c,t.f,null,"[Incomplete Response]");break}if(i==xu){t.h=4,pu(15),au(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}au(t.c,t.f,i,null),Fu(t,i)}4==e&&0==n.length&&(t.h=1,pu(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xc(e),e.F=!0,pu(11))):(au(t.c,t.f,n,"[Invalid Chunked Response]"),Vu(t),Lu(t))}function Ru(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Au:(n=Number(e.substring(n,r)),isNaN(n)?xu:(r+=1)+n>e.length?Au:(e=e.substr(r,n),t.D=r+n,e))}function Du(t){t.T=ks()+t.P,Pu(t,t.P)}function Pu(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=mu(As(t.Va,t),e)}function Mu(t){t.o&&(_s.clearTimeout(t.o),t.o=null)}function Lu(t){0==t.g.v||t.A||tl(t.g,t)}function Vu(t){Mu(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ja(t.R),ou(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Fu(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||vc(n.b,t)))if(n.I=t.N,!t.C&&vc(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Hb){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Zc(n),Bc(n)}Yc(n),pu(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=mu(As(n.Sa,n),6e3));if(1>=yc(n.b)&&n.ea){try{n.ea()}catch(Hb){}n.ea=void 0}}else nl(n,11)}else if((t.C||n.a==t)&&Zc(n),!Vs(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(qs(l,"spdy")||qs(l,"quic")||qs(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(bc(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Xu(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=ks()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=il(u,u.C?u.ga:null,u.fa),d.C){wc(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Mu(p),Du(p)),u.a=d}else Qc(u);0<n.g.length&&Gc(n)}else"stop"!=i[0]&&"close"!=i[0]||nl(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?nl(n,7):qc(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);fu(4)}catch(Hb){}}function Uu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Os(t)||"string"==typeof t)Ps(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Os(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Os(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function qu(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof qu)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Bu(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Hu(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Hu(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Hu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(vs=Cu.prototype).setTimeout=function(t){this.P=t},vs.Xa=function(t){t=t.target;var e=this.F;e&&3==Lc(t)?e.f():this.Ca(t)},vs.Ca=function(t){try{if(t==this.a)t:{var e=Lc(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!ea&&!this.a.$())){this.A||4!=e||7==n||fu(8==n||0>=r?3:2),Mu(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vs(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,pu(12),Vu(this),Lu(this);break t}au(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Fu(this,u)}this.I?(Nu(this,e,o),ea&&this.b&&3==e&&(iu(this.J,this.R,"tick",this.Wa),this.R.start())):(au(this.c,this.f,o,null),Fu(this,o)),4==e&&Vu(this),this.b&&!this.A&&(4==e?tl(this.g,this):(this.b=!1,Du(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,pu(12)):(this.h=0,pu(13)),Vu(this),Lu(this)}}}catch(c){}},vs.Wa=function(){if(this.a){var t=Lc(this.a),e=this.a.$();this.D<e.length&&(Mu(this),Nu(this,t,e),this.b&&4!=t&&Du(this))}},vs.cancel=function(){this.A=!0,Vu(this)},vs.Va=function(){this.o=null;var t=ks();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(fu(3),pu(17)),Vu(this),this.h=2,Lu(this)):Pu(this,this.T-t)},(vs=qu.prototype).K=function(){Bu(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},vs.L=function(){return Bu(this),this.a.concat()},vs.get=function(t,e){return Hu(this.b,t)?this.b[t]:e},vs.set=function(t,e){Hu(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},vs.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var zu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gu(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Gu){this.a=void 0!==e?e:t.a,$u(this,t.f),this.j=t.j,Wu(this,t.c),Qu(this,t.h),this.g=t.g,e=t.b;var n=new ac;n.c=e.c,e.a&&(n.a=new qu(e.a),n.b=e.b),Yu(this,n),this.i=t.i}else t&&(n=String(t).match(zu))?(this.a=!!e,$u(this,n[1]||"",!0),this.j=Zu(n[2]||""),Wu(this,n[3]||"",!0),Qu(this,n[4]),this.g=Zu(n[5]||"",!0),Yu(this,n[6]||"",!0),this.i=Zu(n[7]||"")):(this.a=!!e,this.b=new ac(null,this.a))}function Ku(t){return new Gu(t)}function $u(t,e,n){t.f=n?Zu(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Wu(t,e,n){t.c=n?Zu(e,!0):e}function Qu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Yu(t,e,n){e instanceof ac?(t.b=e,function(t,e){e&&!t.f&&(uc(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(cc(this,e),hc(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=tc(e,oc)),t.b=new ac(e,t.a))}function Xu(t,e,n){t.b.set(e,n)}function Ju(t){return Xu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ks()).toString(36)),t}function Zu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function tc(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ec),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ec(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Gu.prototype.toString=function(){var t=[],e=this.f;e&&t.push(tc(e,nc,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(tc(e,nc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(tc(n,"/"==n.charAt(0)?ic:rc,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",tc(n,sc)),t.join("")};var nc=/[#\/\?@]/g,rc=/[#\?:]/g,ic=/[#\?]/g,oc=/[#\?@]/g,sc=/#/g;function ac(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function uc(t){t.a||(t.a=new qu,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function cc(t,e){uc(t),e=fc(t,e),Hu(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Hu((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Bu(t)))}function lc(t,e){return uc(t),e=fc(t,e),Hu(t.a.b,e)}function hc(t,e,n){cc(t,e),0<n.length&&(t.c=null,t.a.set(fc(t,e),Ls(n)),t.b+=n.length)}function fc(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(vs=ac.prototype).add=function(t,e){uc(this),this.c=null,t=fc(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},vs.forEach=function(t,e){uc(this),this.a.forEach(function(n,r){Ps(n,function(n){t.call(e,n,r,this)},this)},this)},vs.L=function(){uc(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},vs.K=function(t){uc(this);var e=[];if("string"==typeof t)lc(this,t)&&(e=Ms(e,this.a.get(fc(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ms(e,t[n])}return e},vs.set=function(t,e){return uc(this),this.c=null,lc(this,t=fc(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},vs.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},vs.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var dc=function(){return function(t,e){this.b=t,this.a=e}}();function pc(t){this.g=t||gc,t=_s.PerformanceNavigationTiming?0<(t=_s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(_s.ia&&_s.ia.ya&&_s.ia.ya()&&_s.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var gc=10;function mc(t){return!!t.b||!!t.a&&t.a.size>=t.f}function yc(t){return t.b?1:t.a?t.a.size:0}function vc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function bc(t,e){t.a?t.a.add(e):t.b=e}function wc(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function _c(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=ys(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ls(t.c)}function Ec(){}function Oc(){this.a=new Ec}function Tc(t,e,n){var r=n||"";try{Uu(t,function(t,n){var i=t;Ts(t)&&(i=Ua(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(jw){throw e.push(r+"type="+encodeURIComponent("_badmap")),jw}}function Sc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}pc.prototype.cancel=function(){var t,e;if(this.c=_c(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ys(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ec.prototype.stringify=function(t){return _s.JSON.stringify(t,void 0)},Ec.prototype.parse=function(t){return _s.JSON.parse(t,void 0)};var Cc=_s.JSON.parse;function Ic(t){La.call(this),this.headers=new qu,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=xc,this.D=this.F=!1}Ns(Ic,La);var xc="",Ac=/^https?$/i,jc=["POST","PUT"];function kc(t){return"content-type"==t.toLowerCase()}function Nc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Rc(t),Pc(t)}function Rc(t){t.u||(t.u=!0,Va(t,"complete"),Va(t,"error"))}function Dc(t){if(t.b&&void 0!==ws&&(!t.s[1]||4!=Lc(t)||2!=t.W()))if(t.l&&4==Lc(t))Za(t.za,0,t);else if(Va(t,"readystatechange"),4==Lc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(zu)[1]||null;if(!o&&_s.self&&_s.self.location){var s=_s.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ac.test(o?o.toLowerCase():"")}e=i}if(e)Va(t,"complete"),Va(t,"success");else{t.h=6;try{var a=2<Lc(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Rc(t)}}finally{Pc(t)}}}function Pc(t,e){if(t.a){Mc(t);var n=t.a,r=t.s[0]?Es:null;t.a=null,t.s=null,e||Va(t,"ready");try{n.onreadystatechange=r}catch(jw){}}}function Mc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(_s.clearTimeout(t.m),t.m=null)}function Lc(t){return t.a?t.a.readyState:0}function Vc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Gs(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Xu(t,e,n))}function Fc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Uc(t){this.pa=0,this.g=[],this.c=new su,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Fc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Fc("baseRetryDelayMs",5e3,t),this.Ra=Fc("retryDelaySeedMs",1e4,t),this.Ma=Fc("forwardChannelMaxRetries",2,t),this.ma=Fc("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new pc(t&&t.concurrentRequestLimit),this.ka=new Oc,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function qc(t){if(Hc(t),3==t.v){var e=t.R++,n=Ku(t.B);Xu(n,"SID",t.J),Xu(n,"RID",e),Xu(n,"TYPE","terminate"),$c(t,n),(e=new Cu(t,t.c,e,void 0)).H=2,e.i=Ju(Ku(n)),n=!1,_s.navigator&&_s.navigator.sendBeacon&&(n=_s.navigator.sendBeacon(e.i.toString(),"")),!n&&_s.Image&&((new Image).src=e.i,n=!0),n||(e.a=ol(e.g,null),e.a.ba(e.i)),e.u=ks(),Du(e)}rl(t)}function Bc(t){t.a&&(Xc(t),t.a.cancel(),t.a=null)}function Hc(t){Bc(t),t.j&&(_s.clearTimeout(t.j),t.j=null),Zc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&_s.clearTimeout(t.h),t.h=null)}function zc(t,e){t.g.push(new dc(t.Oa++,e)),3==t.v&&Gc(t)}function Gc(t){mc(t.b)||t.h||(t.h=!0,$a(t.Ba,t),t.u=0)}function Kc(t,e){var n;n=e?e.f:t.R++;var r=Ku(t.B);Xu(r,"SID",t.J),Xu(r,"RID",n),Xu(r,"AID",t.P),$c(t,r),t.i&&t.l&&Vc(r,t.i,t.l),n=new Cu(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Wc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),bc(t.b,n),ju(n,r,e)}function $c(t,e){t.f&&Uu({},function(t,n){Xu(e,n,t)})}function Wc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?As(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Tc(l,s,"req"+c+"_")}catch(Vl){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Qc(t){t.a||t.j||(t.T=1,$a(t.Aa,t),t.o=0)}function Yc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=mu(As(t.Aa,t),el(t,t.o)),t.o++,0))}function Xc(t){null!=t.s&&(_s.clearTimeout(t.s),t.s=null)}function Jc(t){t.a=new Cu(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ku(t.la);Xu(e,"RID","rpc"),Xu(e,"SID",t.J),Xu(e,"CI",t.H?"0":"1"),Xu(e,"AID",t.P),$c(t,e),Xu(e,"TYPE","xmlhttp"),t.i&&t.l&&Vc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ju(Ku(e)),n.j=null,n.I=!0,ku(n,t)}function Zc(t){null!=t.m&&(_s.clearTimeout(t.m),t.m=null)}function tl(t,e){var n=null;if(t.a==e){Zc(t),Xc(t),t.a=null;var r=2}else{if(!vc(t.b,e))return;n=e.s,wc(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=ks()-e.u;var i=t.u;Va(r=lu(),new gu(r,n,e,i)),Gc(t)}else Qc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(yc(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=mu(As(t.Ba,t,e),el(t,t.u)),t.u++,0)))}(t,e)||2==r&&Yc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:nl(t,5);break;case 4:nl(t,10);break;case 3:nl(t,6);break;default:nl(t,2)}}function el(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function nl(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=As(t.Ya,t);n||(n=new Gu("//www.google.com/images/cleardot.gif"),_s.location&&"http"==_s.location.protocol||$u(n,"https"),Ju(n)),function(t,e){var n=new su;if(_s.Image){var r=new Image;r.onload=js(Sc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=js(Sc,n,r,"TestLoadImage: error",!1,e),r.onabort=js(Sc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=js(Sc,n,r,"TestLoadImage: timeout",!1,e),_s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else pu(2);t.v=0,t.f&&t.f.ra(e),rl(t),Hc(t)}function rl(t){t.v=0,t.I=-1,t.f&&(0==_c(t.b).length&&0==t.g.length||(t.b.c.length=0,Ls(t.g),t.g.length=0),t.f.qa())}function il(t,e,n){var r=function(t){return t instanceof Gu?Ku(t):new Gu(t,void 0)}(n);if(""!=r.c)e&&Wu(r,e+"."+r.c),Qu(r,r.h);else{var i=_s.location;r=function(t,e,n,r){var i=new Gu(null,void 0);return t&&$u(i,t),e&&Wu(i,e),n&&Qu(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Gs(t.V,function(t,e){Xu(r,e,t)}),n=t.na,(e=t.A)&&n&&Xu(r,e,n),Xu(r,"VER",t.ha),$c(t,r),r}function ol(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ic(t.Na)).F=t.C,e}function sl(){}function al(){if(Zs&&!(10<=Number(la)))throw Error("Environmental error: no available transport.")}function ul(t,e){La.call(this),this.a=new Uc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Vs(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vs(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new hl(this)}function cl(t){Ou.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ll(){Tu.call(this),this.status=1}function hl(t){this.a=t}(vs=Ic.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:_u),this.a.onreadystatechange=As(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Nc(this,o)}t=n||"";var i=new qu(this.headers);r&&Uu(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=kc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=_s.FormData&&t instanceof _s.FormData,!(0<=Ds(jc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Mc(this),0<this.o&&((this.D=function(t){return Zs&&ca(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=As(this.xa,this)):this.m=Za(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Nc(this,o)}},vs.xa=function(){void 0!==ws&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Va(this,"timeout"),this.abort(8))},vs.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Va(this,"complete"),Va(this,"abort"),Pc(this))},vs.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Pc(this,!0)),Ic.X.G.call(this)},vs.za=function(){this.j||(this.A||this.l||this.g?Dc(this):this.Ua())},vs.Ua=function(){Dc(this)},vs.W=function(){try{return 2<Lc(this)?this.a.status:-1}catch(Xs){return-1}},vs.$=function(){try{return this.a?this.a.responseText:""}catch(Xs){return""}},vs.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Cc(e)}},vs.ua=function(){return this.h},vs.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(vs=Uc.prototype).ha=8,vs.v=1,vs.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Cu(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ws(r=Ks(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Wc(this,n,e),Xu(i=Ku(this.B),"RID",t),Xu(i,"CVER",22),this.A&&Xu(i,"X-HTTP-Session-Id",this.A),$c(this,i),this.i&&r&&Vc(i,this.i,r),bc(this.b,n),this.Ia&&Xu(i,"TYPE","init"),this.da?(Xu(i,"$req",e),Xu(i,"SID","null"),n.U=!0,ju(n,i,null)):ju(n,i,e),this.v=2}}else 3==this.v&&(t?Kc(this,t):0==this.g.length||mc(this.b)||Kc(this))},vs.Aa=function(){if(this.j=null,Jc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=mu(As(this.Ta,this),t)}},vs.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,pu(10),Bc(this),Jc(this))},vs.Sa=function(){null!=this.m&&(this.m=null,Bc(this),Yc(this),pu(19))},vs.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),pu(2)):(this.c.info("Failed to ping google.com"),pu(1))},(vs=sl.prototype).ta=function(){},vs.sa=function(){},vs.ra=function(){},vs.qa=function(){},vs.Ja=function(){},al.prototype.a=function(t,e){return new ul(t,e)},Ns(ul,La),ul.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;pu(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=il(t,null,t.fa),Gc(t)},ul.prototype.close=function(){qc(this.a)},ul.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,zc(this.a,e)}else this.l?((e={}).__data__=Ua(t),zc(this.a,e)):zc(this.a,t)},ul.prototype.G=function(){this.a.f=null,delete this.f,qc(this.a),delete this.a,ul.X.G.call(this)},Ns(cl,Ou),Ns(ll,Tu),Ns(hl,sl),hl.prototype.ta=function(){Va(this.a,"a")},hl.prototype.sa=function(t){Va(this.a,new cl(t))},hl.prototype.ra=function(t){Va(this.a,new ll(t))},hl.prototype.qa=function(){Va(this.a,"b")},al.prototype.createWebChannel=al.prototype.a,ul.prototype.send=ul.prototype.h,ul.prototype.open=ul.prototype.g,ul.prototype.close=ul.prototype.close,yu.NO_ERROR=0,yu.TIMEOUT=8,yu.HTTP_ERROR=6,vu.COMPLETE="complete",wu.EventType=Eu,Eu.OPEN="a",Eu.CLOSE="b",Eu.ERROR="c",Eu.MESSAGE="d",La.prototype.listen=La.prototype.va,Ic.prototype.listenOnce=Ic.prototype.wa,Ic.prototype.getLastError=Ic.prototype.Qa,Ic.prototype.getLastErrorCode=Ic.prototype.ua,Ic.prototype.getStatus=Ic.prototype.W,Ic.prototype.getResponseJson=Ic.prototype.Pa,Ic.prototype.getResponseText=Ic.prototype.$,Ic.prototype.send=Ic.prototype.ba;var fl=yu,dl=vu,pl=uu,gl=wu,ml=Ic,yl=n("mrSG"),vl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();vl.o=-1;var bl=new ps.b("@firebase/firestore");function wl(){return bl.logLevel}function _l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(bl.logLevel<=ps.a.DEBUG){var r=e.map(Tl);bl.debug.apply(bl,Object(yl.f)(["Firestore (8.3.1): "+t],r))}}function El(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(bl.logLevel<=ps.a.ERROR){var r=e.map(Tl);bl.error.apply(bl,Object(yl.f)(["Firestore (8.3.1): "+t],r))}}function Ol(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(bl.logLevel<=ps.a.WARN){var r=e.map(Tl);bl.warn.apply(bl,Object(yl.f)(["Firestore (8.3.1): "+t],r))}}function Tl(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(jw){return t}}function Sl(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw El(e),new Error(e)}function Cl(t,e){t||Sl()}function Il(t,e){return t}function xl(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Al=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=xl(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function jl(t,e){return t<e?-1:t>e?1:0}function kl(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Nl(t){return t+"\0"}function Rl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Dl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Pl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ml(t){return null==t}function Ll(t){return 0===t&&1/t==-1/0}function Vl(t){return"number"==typeof t&&Number.isInteger(t)&&!Ll(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Fl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ul=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(yl.c)(e,t),e}(Error),ql=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Sl(),void 0===n?n=t.length-e:n>t.length-e&&Sl(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(yl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ql),Hl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(yl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Hl.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ul(Fl.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ul(Fl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ul(Fl.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ql),Gl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Bl.fromString(e))},t.fromName=function(e){return new t(Bl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Bl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Bl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Bl(e.slice()))},t}(),Kl=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return jl(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Kl.EMPTY_BYTE_STRING=new Kl("");var $l=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wl(t){if(Cl(!!t),"string"==typeof t){var e=0,n=$l.exec(t);if(Cl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ql(t.seconds),nanos:Ql(t.nanos)}}function Ql(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Yl(t){return"string"==typeof t?Kl.fromBase64String(t):Kl.fromUint8Array(t)}var Xl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ul(Fl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ul(Fl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ul(Fl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ul(Fl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?jl(this.nanoseconds,t.nanoseconds):jl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function Jl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zl(t){var e=t.mapValue.fields.__previous_value__;return Jl(e)?Zl(e):e}function th(t){var e=Wl(t.mapValue.fields.__local_write_time__.timestampValue);return new Xl(e.seconds,e.nanos)}function eh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jl(t)?4:10:Sl()}function nh(t,e){var n=eh(t);if(n!==eh(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return th(t).isEqual(th(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Wl(t.timestampValue),r=Wl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Yl(t.bytesValue).isEqual(Yl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ql(t.geoPointValue.latitude)===Ql(e.geoPointValue.latitude)&&Ql(t.geoPointValue.longitude)===Ql(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ql(t.integerValue)===Ql(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ql(t.doubleValue),r=Ql(e.doubleValue);return n===r?Ll(n)===Ll(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return kl(t.arrayValue.values||[],e.arrayValue.values||[],nh);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Rl(n)!==Rl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!nh(n[i],r[i])))return!1;return!0}(t,e);default:return Sl()}}function rh(t,e){return void 0!==(t.values||[]).find(function(t){return nh(t,e)})}function ih(t,e){var n=eh(t),r=eh(e);if(n!==r)return jl(n,r);switch(n){case 0:return 0;case 1:return jl(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ql(t.integerValue||t.doubleValue),r=Ql(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return oh(t.timestampValue,e.timestampValue);case 4:return oh(th(t),th(e));case 5:return jl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Yl(t),r=Yl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=jl(n[i],r[i]);if(0!==o)return o}return jl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=jl(Ql(t.latitude),Ql(e.latitude));return 0!==n?n:jl(Ql(t.longitude),Ql(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ih(n[i],r[i]);if(o)return o}return jl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=jl(r[s],o[s]);if(0!==a)return a;var u=ih(n[r[s]],i[o[s]]);if(0!==u)return u}return jl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Sl()}}function oh(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return jl(t,e);var n=Wl(t),r=Wl(e),i=jl(n.seconds,r.seconds);return 0!==i?i:jl(n.nanos,r.nanos)}function sh(t){return ah(t)}function ah(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Wl(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Yl(t.bytesValue).toBase64():"referenceValue"in t?Gl.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ah(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ah(t.fields[o])}return e+"}"}(t.mapValue):Sl();var e}function uh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ch(t){return!!t&&"integerValue"in t}function lh(t){return!!t&&"arrayValue"in t}function hh(t){return!!t&&"nullValue"in t}function fh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dh(t){return!!t&&"mapValue"in t}var ph=function(t,e){this.key=t,this.version=e},gh=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(yl.c)(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(ph),mh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(yl.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ph),yh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(yl.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ph),vh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function bh(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new vh(t,e,n,r,i,o,s)}function wh(t){var e=Il(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+sh(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Ml(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Rh(e.startAt)),e.endAt&&(n+="|ub:",n+=Rh(e.endAt)),e.h=n}return e.h}function _h(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ph(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!nh(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lh(t.startAt,e.startAt)&&Lh(t.endAt,e.endAt)}function Eh(t){return Gl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Oh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(yl.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Th(t,n,r):"array-contains"===n?new xh(t,r):"in"===n?new Ah(t,r):"not-in"===n?new jh(t,r):"array-contains-any"===n?new kh(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Sh(t,n):new Ch(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(ih(e,this.value)):null!==e&&eh(this.value)===eh(e)&&this.m(ih(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Sl()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Th=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Gl.fromName(r.referenceValue),i}return Object(yl.c)(e,t),e.prototype.matches=function(t){var e=Gl.comparator(t.key,this.key);return this.m(e)},e}(Oh),Sh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ih(0,n),r}return Object(yl.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Oh),Ch=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ih(0,n),r}return Object(yl.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Oh);function Ih(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Gl.fromName(t.referenceValue)})}var xh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(yl.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return lh(e)&&rh(e.arrayValue,this.value)},e}(Oh),Ah=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(yl.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&rh(this.value.arrayValue,e)},e}(Oh),jh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(yl.c)(e,t),e.prototype.matches=function(t){if(rh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!rh(this.value.arrayValue,e)},e}(Oh),kh=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(yl.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!lh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return rh(e.value.arrayValue,t)})},e}(Oh),Nh=function(t,e){this.position=t,this.before=e};function Rh(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return sh(t)}).join(",")}var Dh=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ph(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Mh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Gl.comparator(Gl.fromName(s.referenceValue),n.key):ih(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Lh(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!nh(t.position[n],e.position[n]))return!1;return!0}var Vh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Fh(t,e,n,r,i,o,s,a){return new Vh(t,e,n,r,i,o,s,a)}function Uh(t){return new Vh(t)}function qh(t){return!Ml(t.limit)&&"F"===t.limitType}function Bh(t){return!Ml(t.limit)&&"L"===t.limitType}function Hh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function zh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Gh(t){return null!==t.collectionGroup}function Kh(t){var e=Il(t);if(null===e.p){e.p=[];var n=zh(e),r=Hh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Dh(n)),e.p.push(new Dh(zl.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Dh(zl.keyField(),u))}}}return e.p}function $h(t){var e=Il(t);if(!e.T)if("F"===e.limitType)e.T=bh(e.path,e.collectionGroup,Kh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Kh(e);r<i.length;r++){var o=i[r];n.push(new Dh(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Nh(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Nh(e.startAt.position,!e.startAt.before):null;e.T=bh(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Wh(t,e,n){return new Vh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qh(t,e){return _h($h(t),$h(e))&&t.limitType===e.limitType}function Yh(t){return wh($h(t))+"|lt:"+t.limitType}function Xh(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+sh(e.value);var e}).join(", ")+"]"),Ml(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Rh(t.startAt)),t.endAt&&(e+=", endAt: "+Rh(t.endAt)),"Target("+e+")"}($h(t))+"; limitType="+t.limitType+")"}function Jh(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Gl.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Mh(t.startAt,Kh(t),e)||t.endAt&&Mh(t.endAt,Kh(t),e))}(t,e)}function Zh(t){return function(e,n){for(var r=!1,i=0,o=Kh(t);i<o.length;i++){var s=o[i],a=tf(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function tf(t,e,n){var r=t.field.isKeyField()?Gl.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ih(r,i):Sl()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Sl()}}var ef=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Xl(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),nf=function(){function t(t){this.fields=t,t.sort(zl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return kl(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),rf=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!dh(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return nh(this.proto,t.proto)},t}(),of=function(){function t(t){void 0===t&&(t=rf.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===eh(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(zl.emptyPath(),this.A);return null!=t?new rf(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=dh(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.P(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function sf(t){var e=[];return Dl(t.fields||{},function(t,n){var r=new zl([t]);if(dh(n)){var i=sf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new nf(e)}function af(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ll(e)?"-0":e}}function uf(t){return{integerValue:""+t}}function cf(t,e){return Vl(e)?uf(e):af(t,e)}var lf=function(){this._=void 0};function hf(t,e,n){return t instanceof pf?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof gf?mf(t,e):t instanceof yf?vf(t,e):function(t,e){var n=df(t,e),r=wf(n)+wf(t.S);return ch(n)&&ch(t.S)?uf(r):af(t.D,r)}(t,e)}function ff(t,e,n){return t instanceof gf?mf(t,e):t instanceof yf?vf(t,e):n}function df(t,e){return t instanceof bf?ch(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var pf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(yl.c)(e,t),e}(lf),gf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(yl.c)(e,t),e}(lf);function mf(t,e){for(var n=_f(e),r=function(t){n.some(function(e){return nh(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var yf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(yl.c)(e,t),e}(lf);function vf(t,e){for(var n=_f(e),r=function(t){n=n.filter(function(e){return!nh(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var bf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Object(yl.c)(e,t),e}(lf);function wf(t){return Ql(t.integerValue||t.doubleValue)}function _f(t){return lh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ef=function(t,e){this.field=t,this.transform=e},Of=function(t,e){this.version=t,this.transformResults=e},Tf=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Sf(t,e){return void 0!==t.updateTime?e instanceof gh&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof gh}var Cf=function(){};function If(t,e,n){return t instanceof Nf?function(t,e,n){var r=t.value,i=Pf(t.fieldTransforms,e,n.transformResults);return r=Lf(t.fieldTransforms,r,i),new gh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Rf?function(t,e,n){if(!Sf(t.precondition,e))return new yh(t.key,n.version);var r=Df(t,e,Pf(t.fieldTransforms,e,n.transformResults));return new gh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new mh(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function xf(t,e,n){return t instanceof Nf?function(t,e,n){if(!Sf(t.precondition,e))return e;var r=t.value,i=Mf(t.fieldTransforms,n,e);r=Lf(t.fieldTransforms,r,i);var o=kf(e);return new gh(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof Rf?function(t,e,n){if(!Sf(t.precondition,e))return e;var r=kf(e),i=Df(t,e,Mf(t.fieldTransforms,n,e));return new gh(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return Sf(t.precondition,e)?new mh(t.key,ef.min()):e}(t,e)}function Af(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof gh?e.field(o.field):void 0,a=df(o.transform,s||null);null!=a&&(n=null==n?(new of).set(o.field,a):n.set(o.field,a))}return n?n.v():null}(t.fieldTransforms,e)}function jf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&kl(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof gf&&e instanceof gf||t instanceof yf&&e instanceof yf?kl(t.elements,e.elements,nh):t instanceof bf&&e instanceof bf?nh(t.S,e.S):t instanceof pf&&e instanceof pf}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function kf(t){return t instanceof gh?t.version:ef.min()}var Nf=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(yl.c)(e,t),e}(Cf),Rf=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(yl.c)(e,t),e}(Cf);function Df(t,e,n){var r;return r=function(t,e){var n=new of(e);return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.v()}(t,r=e instanceof gh?e.data():rf.empty()),Lf(t.fieldTransforms,r,n)}function Pf(t,e,n){var r=[];Cl(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof gh&&(a=e.field(o.field)),r.push(ff(s,a,n[i]))}return r}function Mf(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof gh&&(u=n.field(s.field)),r.push(hf(a,u,e))}return r}function Lf(t,e,n){for(var r=new of(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var Vf,Ff,Uf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(yl.c)(e,t),e}(Cf),qf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(yl.c)(e,t),e}(Cf),Bf=function(t){this.count=t};function Hf(t){switch(t){case Fl.OK:return Sl();case Fl.CANCELLED:case Fl.UNKNOWN:case Fl.DEADLINE_EXCEEDED:case Fl.RESOURCE_EXHAUSTED:case Fl.INTERNAL:case Fl.UNAVAILABLE:case Fl.UNAUTHENTICATED:return!1;case Fl.INVALID_ARGUMENT:case Fl.NOT_FOUND:case Fl.ALREADY_EXISTS:case Fl.PERMISSION_DENIED:case Fl.FAILED_PRECONDITION:case Fl.ABORTED:case Fl.OUT_OF_RANGE:case Fl.UNIMPLEMENTED:case Fl.DATA_LOSS:return!0;default:return Sl()}}function zf(t){if(void 0===t)return El("GRPC error has no .code"),Fl.UNKNOWN;switch(t){case Vf.OK:return Fl.OK;case Vf.CANCELLED:return Fl.CANCELLED;case Vf.UNKNOWN:return Fl.UNKNOWN;case Vf.DEADLINE_EXCEEDED:return Fl.DEADLINE_EXCEEDED;case Vf.RESOURCE_EXHAUSTED:return Fl.RESOURCE_EXHAUSTED;case Vf.INTERNAL:return Fl.INTERNAL;case Vf.UNAVAILABLE:return Fl.UNAVAILABLE;case Vf.UNAUTHENTICATED:return Fl.UNAUTHENTICATED;case Vf.INVALID_ARGUMENT:return Fl.INVALID_ARGUMENT;case Vf.NOT_FOUND:return Fl.NOT_FOUND;case Vf.ALREADY_EXISTS:return Fl.ALREADY_EXISTS;case Vf.PERMISSION_DENIED:return Fl.PERMISSION_DENIED;case Vf.FAILED_PRECONDITION:return Fl.FAILED_PRECONDITION;case Vf.ABORTED:return Fl.ABORTED;case Vf.OUT_OF_RANGE:return Fl.OUT_OF_RANGE;case Vf.UNIMPLEMENTED:return Fl.UNIMPLEMENTED;case Vf.DATA_LOSS:return Fl.DATA_LOSS;default:return Sl()}}(Ff=Vf||(Vf={}))[Ff.OK=0]="OK",Ff[Ff.CANCELLED=1]="CANCELLED",Ff[Ff.UNKNOWN=2]="UNKNOWN",Ff[Ff.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ff[Ff.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ff[Ff.NOT_FOUND=5]="NOT_FOUND",Ff[Ff.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ff[Ff.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ff[Ff.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ff[Ff.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ff[Ff.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ff[Ff.ABORTED=10]="ABORTED",Ff[Ff.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ff[Ff.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ff[Ff.INTERNAL=13]="INTERNAL",Ff[Ff.UNAVAILABLE=14]="UNAVAILABLE",Ff[Ff.DATA_LOSS=15]="DATA_LOSS";var Gf=function(){function t(t,e){this.comparator=t,this.root=e||$f.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$f.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$f.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Kf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Kf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Kf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Kf(this.root,t,this.comparator,!0)},t}(),Kf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),$f=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Sl();if(this.right.isRed())throw Sl();var t=this.left.check();if(t!==this.right.check())throw Sl();return t+(this.isRed()?0:1)},t}();$f.EMPTY=null,$f.RED=!0,$f.BLACK=!1,$f.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Sl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Sl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Sl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Sl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Sl()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new $f(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Wf=function(){function t(t){this.comparator=t,this.data=new Gf(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Qf(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Qf(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Qf=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Yf=new Gf(Gl.comparator);function Xf(){return Yf}function Jf(){return Xf()}var Zf=new Gf(Gl.comparator);function td(){return Zf}var ed=new Gf(Gl.comparator);function nd(){return ed}var rd=new Wf(Gl.comparator);function id(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=rd,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var od=new Wf(jl);function sd(){return od}var ad=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ud.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ef.min(),r,sd(),Xf(),id())},t}(),ud=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Kl.EMPTY_BYTE_STRING,n,id(),id(),id())},t}(),cd=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},ld=function(t,e){this.targetId=t,this.$=e},hd=function(t,e,n,r){void 0===n&&(n=Kl.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},fd=function(){function t(){this.F=0,this.O=gd(),this.k=Kl.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=id(),e=id(),n=id();return this.O.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Sl()}}),new ud(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=gd()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),dd=function(){function t(t){this.X=t,this.Z=new Map,this.tt=Xf(),this.et=pd(),this.nt=new Wf(jl)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof gh?this.it(r,t.N):t.N instanceof mh&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:Sl()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach(function(t,r){n.at(r)&&e(r)})},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(Eh(i))if(0===n){var o=new Gl(i.path);this.rt(e,o,new mh(o,ef.min()))}else Cl(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach(function(r,i){var o=e.lt(i);if(o){if(r.current&&Eh(o.target)){var s=new Gl(o.target.path);null!==e.tt.get(s)||e.wt(i,s)||e.rt(i,s,new mh(s,t))}r.q&&(n.set(i,r.K()),r.W())}});var r=id();this.et.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new ad(t,n,this.nt,this.tt,r);return this.tt=Xf(),this.et=pd(),this.nt=new Wf(jl),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new fd,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new Wf(jl),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||_l("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new fd),this.X.getRemoteKeysForTarget(t).forEach(function(n){e.rt(t,n,null)})},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function pd(){return new Gf(Gl.comparator)}function gd(){return new Gf(Gl.comparator)}var md={asc:"ASCENDING",desc:"DESCENDING"},yd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vd=function(t,e){this.databaseId=t,this.V=e};function bd(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function wd(t,e){return t.V?e.toBase64():e.toUint8Array()}function _d(t,e){return bd(t,e.toTimestamp())}function Ed(t){return Cl(!!t),ef.fromTimestamp(function(t){var e=Wl(t);return new Xl(e.seconds,e.nanos)}(t))}function Od(t,e){return function(t){return new Bl(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Td(t){var e=Bl.fromString(t);return Cl(Wd(e)),e}function Sd(t,e){return Od(t.databaseId,e.path)}function Cd(t,e){var n=Td(e);if(n.get(1)!==t.databaseId.projectId)throw new Ul(Fl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ul(Fl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Gl(jd(n))}function Id(t,e){return Od(t.databaseId,e)}function xd(t){var e=Td(t);return 4===e.length?Bl.emptyPath():jd(e)}function Ad(t){return new Bl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jd(t){return Cl(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function kd(t,e,n){return{name:Sd(t,e),fields:n.proto.mapValue.fields}}function Nd(t,e,n){var r=Cd(t,e.name),i=Ed(e.updateTime),o=new rf({mapValue:{fields:e.fields}});return new gh(r,i,o,{hasCommittedMutations:!!n})}function Rd(t,e){var n;if(e instanceof Nf)n={update:kd(t,e.key,e.value)};else if(e instanceof Uf)n={delete:Sd(t,e.key)};else if(e instanceof Rf)n={update:kd(t,e.key,e.data),updateMask:$d(e.fieldMask)};else{if(!(e instanceof qf))return Sl();n={verify:Sd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof pf)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gf)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yf)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof bf)return{fieldPath:e.field.canonicalString(),increment:n.S};throw Sl()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:_d(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Sl()}(t,e.precondition)),n}function Dd(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Tf.updateTime(Ed(t.updateTime)):void 0!==t.exists?Tf.exists(t.exists):Tf.none()}(e.currentDocument):Tf.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Cl("REQUEST_TIME"===e.setToServerValue),n=new pf):"appendMissingElements"in e?n=new gf(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new yf(e.removeAllFromArray.values||[]):"increment"in e?n=new bf(t,e.increment):Sl();var r=zl.fromServerFormat(e.fieldPath);return new Ef(r,n)}(t,e)}):[];if(e.update){var i=Cd(t,e.update.name),o=new rf({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new nf((t.fieldPaths||[]).map(function(t){return zl.fromServerFormat(t)}))}(e.updateMask);return new Rf(i,o,s,n,r)}return new Nf(i,o,n,r)}if(e.delete){var a=Cd(t,e.delete);return new Uf(a,n)}if(e.verify){var u=Cd(t,e.verify);return new qf(u,n)}return Sl()}function Pd(t,e){return{documents:[Id(t,e.path)]}}function Md(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Id(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Id(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(fh(t.value))return{unaryFilter:{field:Hd(t.field),op:"IS_NAN"}};if(hh(t.value))return{unaryFilter:{field:Hd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(fh(t.value))return{unaryFilter:{field:Hd(t.field),op:"IS_NOT_NAN"}};if(hh(t.value))return{unaryFilter:{field:Hd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hd(t.field),op:Bd(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Hd(t.field),direction:qd(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.V||Ml(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Fd(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Fd(e.endAt)),n}function Ld(t){var e=xd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Cl(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Vd(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Dh(zd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Ml(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ud(n.startAt));var l=null;return n.endAt&&(l=Ud(n.endAt)),Fh(e,i,a,s,u,"F",c,l)}function Vd(t){return t?void 0!==t.unaryFilter?[Kd(t)]:void 0!==t.fieldFilter?[Gd(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Vd(t)}).reduce(function(t,e){return t.concat(e)}):Sl():[]}function Fd(t){return{before:t.before,values:t.position}}function Ud(t){return new Nh(t.values||[],!!t.before)}function qd(t){return md[t]}function Bd(t){return yd[t]}function Hd(t){return{fieldPath:t.canonicalString()}}function zd(t){return zl.fromServerFormat(t.fieldPath)}function Gd(t){return Oh.create(zd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Sl()}}(t.fieldFilter.op),t.fieldFilter.value)}function Kd(t){switch(t.unaryFilter.op){case"IS_NAN":var e=zd(t.unaryFilter.field);return Oh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=zd(t.unaryFilter.field);return Oh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=zd(t.unaryFilter.field);return Oh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=zd(t.unaryFilter.field);return Oh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Sl()}}function $d(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Wd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Qd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Xd(e)),e=Yd(t.get(n),e);return Xd(e)}function Yd(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Xd(t){return t+"\x01\x01"}function Jd(t){var e=t.length;if(Cl(e>=2),2===e)return Cl("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Bl.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Sl(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Sl()}o=s+2}return new Bl(r)}var Zd=function(t,e){this.seconds=t,this.nanoseconds=e},tp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};tp.store="owner",tp.key="owner";var ep=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ep.store="mutationQueues",ep.keyPath="userId";var np=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};np.store="mutations",np.keyPath="batchId",np.userMutationsIndex="userMutationsIndex",np.userMutationsKeyPath=["userId","batchId"];var rp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Qd(e)]},t.key=function(t,e,n){return[t,Qd(e),n]},t}();rp.store="documentMutations",rp.PLACEHOLDER=new rp;var ip=function(t,e){this.path=t,this.readTime=e},op=function(t,e){this.path=t,this.version=e},sp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};sp.store="remoteDocuments",sp.readTimeIndex="readTimeIndex",sp.readTimeIndexPath="readTime",sp.collectionReadTimeIndex="collectionReadTimeIndex",sp.collectionReadTimeIndexPath=["parentPath","readTime"];var ap=function(t){this.byteSize=t};ap.store="remoteDocumentGlobal",ap.key="remoteDocumentGlobalKey";var up=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};up.store="targets",up.keyPath="targetId",up.queryTargetsIndexName="queryTargetsIndex",up.queryTargetsKeyPath=["canonicalId","targetId"];var cp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};cp.store="targetDocuments",cp.keyPath=["targetId","path"],cp.documentTargetsIndex="documentTargetsIndex",cp.documentTargetsKeyPath=["path","targetId"];var lp=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};lp.key="targetGlobalKey",lp.store="targetGlobal";var hp=function(t,e){this.collectionId=t,this.parent=e};hp.store="collectionParents",hp.keyPath=["collectionId","parent"];var fp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};fp.store="clientMetadata",fp.keyPath="clientId";var dp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};dp.store="bundles",dp.keyPath="bundleId";var pp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};pp.store="namedQueries",pp.keyPath="name";var gp=Object(yl.f)(Object(yl.f)([],Object(yl.f)(Object(yl.f)([],Object(yl.f)(Object(yl.f)([],Object(yl.f)(Object(yl.f)([],[ep.store,np.store,rp.store,sp.store,up.store,tp.store,lp.store,cp.store]),[fp.store])),[ap.store])),[hp.store])),[dp.store,pp.store]),mp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),vp=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},bp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Sl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),wp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new vp,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new Op(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=xp(e.target.error);n.gt.reject(new Op(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Op(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(_l("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Sp(e)},t}(),_p=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(gs.g)())&&El("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return _l("SimpleDb","Removing database:",t),Cp(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(gs.g)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Object(yl.b)(this,void 0,void 0,function(){var e,n=this;return Object(yl.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(_l("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Op(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Ul(Fl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Op(t,n))},i.onupgradeneeded=function(t){_l("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){_l("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}})})},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(yl.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(yl.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(yl.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Vt(t)];case 2:return a.db=h.sent(),e=wp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),bp.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.Et];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return _l("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ep=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return Cp(this.xt.delete())},t}(),Op=function(t){function e(e,n){var r=this;return(r=t.call(this,Fl.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(yl.c)(e,t),e}(Ul);function Tp(t){return"IndexedDbTransactionError"===t.name}var Sp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(_l("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(_l("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Cp(n)},t.prototype.add=function(t){return _l("SimpleDb","ADD",this.store.name,t,t),Cp(this.store.add(t))},t.prototype.get=function(t){var e=this;return Cp(this.store.get(t)).next(function(n){return void 0===n&&(n=null),_l("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return _l("SimpleDb","DELETE",this.store.name,t),Cp(this.store.delete(t))},t.prototype.count=function(){return _l("SimpleDb","COUNT",this.store.name),Cp(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Lt=function(t,e){_l("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,function(t,e,n){return n.delete()})},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new bp(function(n,r){e.onerror=function(t){var e=xp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Mt=function(t,e){var n=[];return new bp(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ep(i),s=e(i.primaryKey,i.value,o);if(s instanceof bp){var a=s.catch(function(t){return o.done(),bp.reject(t)});n.push(a)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return bp.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Cp(t){return new bp(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=xp(t.target.error);n(e)}})}var Ip=!1;function xp(t){var e=_p.It(Object(gs.g)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ul("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ip||(Ip=!0,setTimeout(function(){throw r},0)),r}}return t}var Ap=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Object(yl.c)(e,t),e}(yp);function jp(t,e){var n=Il(t);return _p.Pt(n.Qt,e)}var kp=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=If(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=xf(s,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=xf(s,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},id())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&kl(this.mutations,t.mutations,function(t,e){return jf(t,e)})&&kl(this.baseMutations,t.baseMutations,function(t,e){return jf(t,e)})},t}(),Np=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Cl(e.mutations.length===r.length);for(var i=nd(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Rp=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ef.min()),void 0===o&&(o=ef.min()),void 0===s&&(s=Kl.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Dp=function(t){this.Kt=t};function Pp(t,e){if(e.document)return Nd(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Gl.fromSegments(e.noDocument.path),r=Up(e.noDocument.readTime);return new mh(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Gl.fromSegments(e.unknownDocument.path);return r=Up(e.unknownDocument.version),new yh(i,r)}return Sl()}function Mp(t,e,n){var r=Lp(n),i=e.key.path.popLast().toArray();if(e instanceof gh){var o=function(t,e){return{name:Sd(t,e.key),fields:e.toProto().mapValue.fields,updateTime:bd(t,e.version.toTimestamp())}}(t.Kt,e),s=e.hasCommittedMutations;return new sp(null,null,o,s,r,i)}if(e instanceof mh){var a=e.key.path.toArray(),u=Fp(e.version);return s=e.hasCommittedMutations,new sp(null,new ip(a,u),null,s,r,i)}if(e instanceof yh){var c=e.key.path.toArray(),l=Fp(e.version);return new sp(new op(c,l),null,null,!0,r,i)}return Sl()}function Lp(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Vp(t){var e=new Xl(t[0],t[1]);return ef.fromTimestamp(e)}function Fp(t){var e=t.toTimestamp();return new Zd(e.seconds,e.nanoseconds)}function Up(t){var e=new Xl(t.seconds,t.nanoseconds);return ef.fromTimestamp(e)}function qp(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Dd(t.Kt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Dd(t.Kt,e)}),o=Xl.fromMillis(e.localWriteTimeMs);return new kp(e.batchId,o,n,i)}function Bp(t){var e,n,r=Up(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Up(t.lastLimboFreeSnapshotVersion):ef.min();return void 0!==t.query.documents?(Cl(1===(n=t.query).documents.length),e=$h(Uh(xd(n.documents[0])))):e=function(t){return $h(Ld(t))}(t.query),new Rp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Kl.fromBase64String(t.resumeToken))}function Hp(t,e){var n,r=Fp(e.snapshotVersion),i=Fp(e.lastLimboFreeSnapshotVersion);n=Eh(e.target)?Pd(t.Kt,e.target):Md(t.Kt,e.target);var o=e.resumeToken.toBase64();return new up(e.targetId,wh(e.target),r,o,e.sequenceNumber,i,n)}function zp(t){var e=Ld({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Wh(e,e.limit,"L"):e}var Gp=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Kp(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Up(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Kp(t).put({bundleId:(n=e).id,createTime:Fp(Ed(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return $p(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:zp(e.bundledQuery),readTime:Up(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return $p(t).put(function(t){return{name:t.name,readTime:Fp(Ed(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Kp(t){return jp(t,dp.store)}function $p(t){return jp(t,pp.store)}var Wp=function(){function t(){this.Wt=new Qp}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),bp.resolve()},t.prototype.getCollectionParents=function(t,e){return bp.resolve(this.Wt.getEntries(e))},t}(),Qp=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Wf(Bl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Wf(Bl.comparator)).toArray()},t}(),Yp=function(){function t(){this.jt=new Qp}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});var o={collectionId:r,parent:Qd(i)};return Xp(t).put(o)}return bp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Nl(e),""],!1,!0);return Xp(t).kt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Jd(o.parent))}return n})},t}();function Xp(t){return jp(t,hp.store)}var Jp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function tg(t,e,n){var r=t.store(np.store),i=t.store(rp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.qt({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Cl(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=rp.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return bp.waitFor(o).next(function(){return c})}function eg(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Sl();e=t.noDocument}return JSON.stringify(e).length}Zp.DEFAULT_COLLECTION_PERCENTILE=10,Zp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zp.DEFAULT=new Zp(41943040,Zp.DEFAULT_COLLECTION_PERCENTILE,Zp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zp.DISABLED=new Zp(-1,0,0);var ng=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return Cl(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ig(t).qt({index:np.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=og(t),s=ig(t);return s.add({}).next(function(a){Cl("number"==typeof a);for(var u=new kp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Rd(t.Kt,e)}),i=n.mutations.map(function(e){return Rd(t.Kt,e)});return new np(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new Wf(function(t,e){return jl(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=rp.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,rp.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.zt[a]=u.keys()}),bp.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return ig(t).get(e).next(function(t){return t?(Cl(t.userId===n.userId),qp(n.D,t)):null})},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?bp.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ig(t).qt({index:np.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Cl(e.batchId>=r),o=qp(n.D,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ig(t).qt({index:np.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ig(t).kt(np.userMutationsIndex,n).next(function(t){return t.map(function(t){return qp(e.D,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=rp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return og(t).qt({range:i},function(r,i,s){var a=r[0],u=r[2],c=Jd(r[1]);if(a===n.userId&&e.path.isEqual(c))return ig(t).get(u).next(function(t){if(!t)throw Sl();Cl(t.userId===n.userId),o.push(qp(n.D,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Wf(jl),i=[];return e.forEach(function(e){var o=rp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=og(t).qt({range:s},function(t,i,o){var s=t[0],a=t[2],u=Jd(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),bp.waitFor(i).next(function(){return n.Yt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=rp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Wf(jl);return og(t).qt({range:s},function(t,e,o){var s=t[0],u=t[2],c=Jd(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Yt(t,a)})},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(ig(t).get(e).next(function(t){if(null===t)throw Sl();Cl(t.userId===n.userId),r.push(qp(n.D,t))}))}),bp.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return tg(t.Qt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Xt(e.batchId)}),bp.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return bp.resolve();var r=IDBKeyRange.lowerBound(rp.prefixForUser(e.userId)),i=[];return og(t).qt({range:r},function(t,n,r){if(t[0]===e.userId){var o=Jd(t[1]);i.push(o)}else r.done()}).next(function(){Cl(0===i.length)})})},t.prototype.containsKey=function(t,e){return rg(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return sg(t).get(this.userId).next(function(t){return t||new ep(e.userId,-1,"")})},t}();function rg(t,e,n){var r=rp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return og(t).qt({range:o,Bt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function ig(t){return jp(t,np.store)}function og(t){return jp(t,rp.store)}function sg(t){return jp(t,ep.store)}var ag=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),ug=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next(function(n){var r=new ag(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return ef.fromTimestamp(new Xl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next(function(){return n.se(t).next(function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return cg(t).delete(e.targetId)}).next(function(){return n.se(t)}).next(function(e){return Cl(e.targetCount>0),e.targetCount-=1,n.ie(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return cg(t).qt(function(s,a){var u=Bp(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return bp.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return cg(t).qt(function(t,n){var r=Bp(n);e(r)})},t.prototype.se=function(t){return lg(t).get(lp.key).next(function(t){return Cl(null!==t),t})},t.prototype.ie=function(t,e){return lg(t).put(lp.key,e)},t.prototype.re=function(t,e){return cg(t).put(Hp(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=wh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return cg(t).qt({range:r,index:up.queryTargetsIndexName},function(t,n,r){var o=Bp(n);_h(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=hg(t);return e.forEach(function(e){var s=Qd(e.path);i.push(o.put(new cp(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),bp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=hg(t);return bp.forEach(e,function(e){var o=Qd(e.path);return bp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=hg(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=hg(t),i=id();return r.qt({range:n,Bt:!0},function(t,e,n){var r=Jd(t[1]),o=new Gl(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Qd(e.path),r=IDBKeyRange.bound([n],[Nl(n)],!1,!0),i=0;return hg(t).qt({index:cp.documentTargetsIndex,Bt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.yt=function(t,e){return cg(t).get(e).next(function(t){return t?Bp(t):null})},t}();function cg(t){return jp(t,up.store)}function lg(t){return jp(t,lp.store)}function hg(t){return jp(t,cp.store)}function fg(t){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(e){if(t.code!==Fl.FAILED_PRECONDITION||t.message!==mp)throw t;return _l("LocalStore","Unexpectedly lost primary lease"),[2]})})}function dg(t,e){var n=t[1],r=e[1],i=jl(t[0],e[0]);return 0===i?jl(n,r):i}var pg=function(){function t(t){this.ce=t,this.buffer=new Wf(dg),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();dg(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),gg=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;_l("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(yl.b)(e,void 0,void 0,function(){var e;return Object(yl.d)(this,function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Tp(e=n.sent())?(_l("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,fg(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}})})})},t}(),mg=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return bp.resolve(vl.o);var r=new pg(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(_l("LruGarbageCollector","Garbage collection skipped; disabled"),bp.resolve(Jp)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(_l("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Jp):n.ye(t,e)})},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(_l("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),wl()<=ps.a.DEBUG&&_l("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),bp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),yg=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new mg(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return vg(t,n)},t.prototype.removeReference=function(t,e,n){return vg(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return vg(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return sg(t).Ut(function(r){return rg(t,r,e).next(function(t){return t&&(n=!0),bp.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,function(s,a){if(a<=e){var u=n.Ee(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),hg(t).delete([0,Qd(s.path)])})});i.push(u)}}).next(function(){return bp.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return vg(t,e)},t.prototype.pe=function(t,e){var n,r=hg(t),i=vl.o;return r.qt({index:cp.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==vl.o&&e(new Gl(Jd(n)),i),i=s,n=o):i=vl.o}).next(function(){i!==vl.o&&e(new Gl(Jd(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function vg(t,e){return hg(t).put(function(t,e){return new cp(0,Qd(t.path),e)}(e,t.currentSequenceNumber))}var bg=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Dl(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Pl(this.inner)},t}(),wg=function(){function t(){this.changes=new bg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ef.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?bp.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),_g=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return Tg(t).put(Sg(e),n)},t.prototype.removeEntry=function(t,e){var n=Tg(t),r=Sg(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Te(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Tg(t).get(Sg(e)).next(function(t){return n.Ie(t)})},t.prototype.Ae=function(t,e){var n=this;return Tg(t).get(Sg(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:eg(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Jf();return this.Re(t,e,function(t,e){var i=n.Ie(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.be=function(t,e){var n=this,r=Jf(),i=new Gf(Gl.comparator);return this.Re(t,e,function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,eg(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{ve:r,Pe:i}})},t.prototype.Re=function(t,e,n){if(e.isEmpty())return bp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Tg(t).qt({range:r},function(t,e,r){for(var s=Gl.fromSegments(t);o&&Gl.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=td(),o=e.path.length+1,s={};if(n.isEqual(ef.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Lp(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=sp.collectionReadTimeIndex}return Tg(t).qt(s,function(t,n,s){if(t.length===o){var a=Pp(r.D,n);e.path.isPrefixOf(a.key.path)?a instanceof gh&&Jh(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Eg(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Og(t).get(ap.key).next(function(t){return Cl(!!t),t})},t.prototype.Te=function(t,e){return Og(t).put(ap.key,e)},t.prototype.Ie=function(t){if(t){var e=Pp(this.D,t);return e instanceof mh&&e.version.isEqual(ef.min())?null:e}return null},t}(),Eg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new bg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(yl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Wf(function(t,e){return jl(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Se.get(o);if(s.maybeDocument){var u=Mp(e.Ve.D,s.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=eg(u);r+=c-a,n.push(e.Ve.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Mp(e.Ve.D,new mh(o,ef.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))}),n.push(this.Ve.updateMetadata(t,r)),bp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},e}(wg);function Og(t){return jp(t,ap.store)}function Tg(t){return jp(t,sp.store)}function Sg(t){return t.path.toArray()}var Cg=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;Cl(n<r&&n>=0&&r<=11);var o=new wp("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(tp.store)}(t),function(t){t.createObjectStore(ep.store,{keyPath:ep.keyPath}),t.createObjectStore(np.store,{keyPath:np.keyPath,autoIncrement:!0}).createIndex(np.userMutationsIndex,np.userMutationsKeyPath,{unique:!0}),t.createObjectStore(rp.store)}(t),Ig(t),function(t){t.createObjectStore(sp.store)}(t));var s=bp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(cp.store),t.deleteObjectStore(up.store),t.deleteObjectStore(lp.store)}(t),Ig(t)),s=s.next(function(){return function(t){var e=t.store(lp.store),n=new lp(0,0,ef.min().toTimestamp(),0);return e.put(lp.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(np.store).kt().next(function(n){t.deleteObjectStore(np.store),t.createObjectStore(np.store,{keyPath:np.keyPath,autoIncrement:!0}).createIndex(np.userMutationsIndex,np.userMutationsKeyPath,{unique:!0});var r=e.store(np.store),i=n.map(function(t){return r.put(t)});return bp.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(fp.store,{keyPath:fp.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.De(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(ap.store)}(t),i.Ce(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Ne(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(sp.store);e.createIndex(sp.readTimeIndex,sp.readTimeIndexPath,{unique:!1}),e.createIndex(sp.collectionReadTimeIndex,sp.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(dp.store,{keyPath:dp.keyPath})}(t),function(t){t.createObjectStore(pp.store,{keyPath:pp.keyPath})}(t)})),s},t.prototype.Ce=function(t){var e=0;return t.store(sp.store).qt(function(t,n){e+=eg(n)}).next(function(){var n=new ap(e);return t.store(ap.store).put(ap.key,n)})},t.prototype.De=function(t){var e=this,n=t.store(ep.store),r=t.store(np.store);return n.kt().next(function(n){return bp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(np.userMutationsIndex,i).next(function(r){return bp.forEach(r,function(r){Cl(r.userId===n.userId);var i=qp(e.D,r);return tg(t,n.userId,i).next(function(){})})})})})},t.prototype.xe=function(t){var e=t.store(cp.store),n=t.store(sp.store);return t.store(lp.store).get(lp.key).next(function(t){var r=[];return n.qt(function(n,i){var o=new Bl(n),s=function(t){return[0,Qd(t)]}(o);r.push(e.get(s).next(function(n){return n?bp.resolve():function(n){return e.put(new cp(0,Qd(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return bp.waitFor(r)})})},t.prototype.Ne=function(t,e){t.createObjectStore(hp.store,{keyPath:hp.keyPath});var n=e.store(hp.store),r=new Qp,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Qd(i)})}};return e.store(sp.store).qt({Bt:!0},function(t,e){var n=new Bl(t);return i(n.popLast())}).next(function(){return e.store(rp.store).qt({Bt:!0},function(t,e){var n=Jd(t[1]);return i(n.popLast())})})},t.prototype.$e=function(t){var e=this,n=t.store(up.store);return n.qt(function(t,r){var i=Bp(r),o=Hp(e.D,i);return n.put(o)})},t}();function Ig(t){t.createObjectStore(cp.store,{keyPath:cp.keyPath}).createIndex(cp.documentTargetsIndex,cp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(up.store,{keyPath:up.keyPath}).createIndex(up.queryTargetsIndexName,up.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(lp.store)}var xg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ag=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=s,this.document=a,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new Ul(Fl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yg(this,i),this.We=n+"main",this.D=new Dp(u),this.je=new _p(this.We,11,new Cg(this.D)),this.Ge=new ug(this.referenceDelegate,this.D),this.Gt=new Yp,this.ze=function(t,e){return new _g(t,e)}(this.D,this.Gt),this.He=new Gp,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&El("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ul(Fl.FAILED_PRECONDITION,xg);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Ge.getHighestSequenceNumber(e)})}).then(function(e){t.Me=new vl(e,t.Oe)}).then(function(){t.Le=!0}).catch(function(e){return t.je&&t.je.close(),Promise.reject(e)})},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Object(yl.b)(e,void 0,void 0,function(){return Object(yl.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct(function(n){return Object(yl.b)(e,void 0,void 0,function(){return Object(yl.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return Object(yl.b)(e,void 0,void 0,function(){return Object(yl.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return kg(e).put(new fp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nn(e).next(function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable(function(){return t.Ke(!1)}))})}).next(function(){return t.sn(e)}).next(function(n){return t.isPrimary&&!n?t.rn(e).next(function(){return!1}):!!n&&t.on(e).next(function(){return!0})})}).catch(function(e){if(Tp(e))return _l("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return _l("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable(function(){return t.Ke(e)}),t.isPrimary=e})},t.prototype.nn=function(t){var e=this;return jg(t).get(tp.key).next(function(t){return bp.resolve(e.cn(t))})},t.prototype.an=function(t){return kg(t).delete(this.clientId)},t.prototype.un=function(){return Object(yl.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(yl.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=jp(t,fp.store);return e.kt().next(function(t){var n=r.ln(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return bp.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?bp.resolve(!0):jg(t).get(tp.key).next(function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new Ul(Fl.FAILED_PRECONDITION,xg);return!1}}return!(!e.networkEnabled||!e.inForeground)||kg(t).kt().next(function(t){return void 0===e.ln(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&_l("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(yl.b)(this,void 0,void 0,function(){var t=this;return Object(yl.d)(this,function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[tp.store,fp.store],function(e){var n=new Ap(e,vl.o);return t.rn(n).next(function(){return t.an(n)})})];case 1:return e.sent(),this.je.close(),this.yn(),[2]}})})},t.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return kg(e).kt().next(function(e){return t.ln(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ng.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return _l("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",gp,function(o){return r=new Ap(o,i.Me?i.Me.next():vl.o),"readwrite-primary"===e?i.nn(r).next(function(t){return!!t||i.sn(r)}).next(function(e){if(!e)throw El("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new Ul(Fl.FAILED_PRECONDITION,mp);return n(r)}).next(function(t){return i.on(r).next(function(){return t})}):i.pn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.pn=function(t){var e=this;return jg(t).get(tp.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ul(Fl.FAILED_PRECONDITION,xg)})},t.prototype.on=function(t){var e=new tp(this.clientId,this.allowTabSynchronization,Date.now());return jg(t).put(tp.key,e)},t.At=function(){return _p.At()},t.prototype.rn=function(t){var e=this,n=jg(t);return n.get(tp.key).next(function(t){return e.cn(t)?(_l("IndexedDbPersistence","Releasing primary lease."),n.delete(tp.key)):bp.resolve()})},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(El("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return _l("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return El("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){El("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function jg(t){return jp(t,tp.store)}function kg(t){return jp(t,fp.store)}function Ng(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Rg=function(t,e){this.progress=t,this.En=e},Dg=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.An(t,e,r)})},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.Rn=function(t,e,n){var r=Jf();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next(function(e){return n.vn(t,e)})},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.Rn(t,e,r),o=Xf();return i.forEach(function(t,e){e||(e=new mh(t,ef.min())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Gl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):Gh(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new Gl(e)).next(function(t){var e=td();return t instanceof gh&&(e=e.insert(t.key,t)),e})},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=td();return this.Gt.getCollectionParents(t,i).next(function(s){return bp.forEach(s,function(s){var a=function(t,e){return new Vh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sn(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Dn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=xf(u,r.get(c),o.localWriteTime);r=l instanceof gh?r.insert(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Jh(e,n)||(r=r.remove(t))}),r})},t.prototype.Dn=function(t,e,n){for(var r=id(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Rf&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof gh&&(c=c.insert(t,e))}),c})},t}(),Pg=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=id(),i=id(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Mg=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ef.min())?this.On(t,e):this.Fn.bn(t,r).next(function(o){var s=i.kn(e,o);return(qh(e)||Bh(e))&&i.Mn(e.limitType,s,r,n)?i.On(t,e):(wl()<=ps.a.DEBUG&&_l("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Xh(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.kn=function(t,e){var n=new Wf(Zh(t));return e.forEach(function(e,r){r instanceof gh&&Jh(t,r)&&(n=n.add(r))}),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return wl()<=ps.a.DEBUG&&_l("QueryEngine","Using full collection scan to execute query:",Xh(e)),this.Fn.getDocumentsMatchingQuery(t,e,ef.min())},t}(),Lg=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new Gf(jl),this.qn=new bg(function(t){return wh(t)},_h),this.Un=ef.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new Dg(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Bn)})},t}();function Vg(t,e,n,r){return new Lg(t,e,n,r)}function Fg(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(yl.d)(this,function(s){switch(s.label){case 0:return n=Il(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Tn.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Dg(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=id(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.bn(t,s).next(function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}})})}function Ug(t,e){var n=Il(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=bp.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=e,s=n.docVersions.get(t);Cl(null!==s),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)})}),s.next(function(){return t.Tn.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}function qg(t){var e=Il(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function Bg(t,e){var n=Il(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Cl(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.Ge.updateTargetData(t,c))}}});var a=Xf();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Hg(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(ef.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next(function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return bp.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Kn.vn(t,a)})}).then(function(t){return n.Bn=i,t})}function Hg(t,e,n,r,i){var o=id();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Xf();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof mh&&s.version.isEqual(ef.min())?(e.removeEntry(n,u),o=o.insert(n,s)):null==a||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):_l("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function zg(t,e){var n=Il(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)})}function Gg(t,e){var n=Il(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ge.getTargetData(t,e).next(function(i){return i?bp.resolve(r=i):n.Ge.allocateTargetId(t).next(function(i){return r=new Rp(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function Kg(t,e,n){return Object(yl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(yl.d)(this,function(a){switch(a.label){case 0:r=Il(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Tp(s=a.sent()))throw s;return _l("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}})})}function $g(t,e,n){var r=Il(t),i=ef.min(),o=id();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Il(t),i=r.qn.get(n);return void 0!==i?bp.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,$h(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:ef.min(),n?o:id())}).next(function(t){return{documents:t,jn:o}})})}function Wg(t,e){var n=Il(t),r=Il(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function Qg(t){var e=Il(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Il(t),i=Xf(),o=Lp(n),s=Tg(e),a=IDBKeyRange.lowerBound(o,!0);return s.qt({index:sp.readTimeIndex,range:a},function(t,e){var n=Pp(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:Vp(o)}})}(e.Qn,t,e.Un)}).then(function(t){var n=t.En;return e.Un=t.readTime,n})}function Yg(t){return Object(yl.b)(this,void 0,void 0,function(){var e;return Object(yl.d)(this,function(n){return[2,(e=Il(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Tg(t),n=ef.min();return e.qt({index:sp.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Vp(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Un=t})]})})}function Xg(t,e,n,r){return Object(yl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(yl.d)(this,function(p){switch(p.label){case 0:for(i=Il(t),o=id(),s=Xf(),a=nd(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.zn(l)),a=a.insert(h,e.Hn(l.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,Gg(i,function(t){return $h(Uh(Bl.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Hg(t,f,s,ef.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.Ge.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.Ge.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Kn.vn(t,e)})})})]}})})}function Jg(t,e,n){return void 0===n&&(n=id()),Object(yl.b)(this,void 0,void 0,function(){var r,i;return Object(yl.d)(this,function(o){switch(o.label){case 0:return[4,Gg(t,$h(zp(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Il(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Ed(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var s=r.withResumeToken(Kl.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(s.targetId,s),i.Ge.updateTargetData(t,s).next(function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.Ge.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.He.saveNamedQuery(t,e)})})]}})})}var Zg=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return bp.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ed(n.createTime)}),bp.resolve()},t.prototype.getNamedQuery=function(t,e){return bp.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:zp(t.bundledQuery),readTime:Ed(t.readTime)}}(e)),bp.resolve()},t}(),tm=function(){function t(){this.Xn=new Wf(em.Zn),this.ts=new Wf(em.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new em(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.ss(new em(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.os=function(t){var e=this,n=new Gl(new Bl([])),r=new em(n,t),i=new em(n,t+1),o=[];return this.ts.forEachInRange([r,i],function(t){e.ss(t),o.push(t.key)}),o},t.prototype.cs=function(){var t=this;this.Xn.forEach(function(e){return t.ss(e)})},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new Gl(new Bl([])),n=new em(e,t),r=new em(e,t+1),i=id();return this.ts.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new em(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),em=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return Gl.comparator(t.key,e.key)||jl(t.hs,e.hs)},t.es=function(t,e){return jl(t.hs,e.hs)||Gl.comparator(t.key,e.key)},t}(),nm=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new Wf(em.Zn)}return t.prototype.checkEmpty=function(t){return bp.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new kp(i,e,n,r);this.Tn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.fs=this.fs.add(new em(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return bp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return bp.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return bp.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return bp.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return bp.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new em(e,0),i=new em(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],function(t){var e=n.ds(t.hs);o.push(e)}),bp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Wf(jl);return e.forEach(function(t){var e=new em(t,0),i=new em(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],function(t){r=r.add(t.hs)})}),bp.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Gl.isDocumentKey(i)||(i=i.child(""));var o=new em(new Gl(i),0),s=new Wf(jl);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.hs)),!0)},o),bp.resolve(this._s(s))},t.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.ds(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Cl(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return bp.forEach(e.mutations,function(i){var o=new em(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.fs=r})},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new em(e,0),r=this.fs.firstAfterOrEqual(n);return bp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return bp.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),rm=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new Gf(Gl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return bp.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=Jf();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),bp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=td(),i=new Gl(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof gh&&Jh(e,u)&&(r=r.insert(u.key,u))}return bp.resolve(r)},t.prototype.ps=function(t,e){return bp.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new im(this)},t.prototype.getSize=function(t){return bp.resolve(this.size)},t}(),im=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Object(yl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)}),bp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(wg),om=function(){function t(t){this.persistence=t,this.Es=new bg(function(t){return wh(t)},_h),this.lastRemoteSnapshotVersion=ef.min(),this.highestTargetId=0,this.Ts=0,this.Is=new tm,this.targetCount=0,this.As=ag.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach(function(t,n){return e(n)}),bp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return bp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return bp.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),bp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),bp.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new ag(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,bp.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),bp.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,bp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Es.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),bp.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return bp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return bp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),bp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),bp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),bp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return bp.resolve(n)},t.prototype.containsKey=function(t,e){return bp.resolve(this.Is.containsKey(e))},t}(),sm=function(){function t(t,e){var n=this;this.Rs={},this.Me=new vl(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new om(this),this.Gt=new Wp,this.ze=function(t,e){return new rm(t,function(t){return n.referenceDelegate.bs(t)})}(this.Gt),this.D=new Dp(e),this.He=new Zg(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new nm(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;_l("MemoryPersistence","Starting transaction:",t);var i=new am(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Vs=function(t,e){return bp.or(Object.values(this.Rs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),am=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(yl.c)(e,t),e}(yp),um=function(){function t(t){this.persistence=t,this.Ss=new tm,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw Sl()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),bp.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),bp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),bp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bp.forEach(this.xs,function(r){var i=Gl.fromPath(r);return e.Ns(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Ds=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return bp.or([function(){return bp.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),cm=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function lm(t,e){return"firestore_clients_"+t+"_"+e}function hm(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function fm(t,e){return"firestore_targets_"+t+"_"+e}cm.UNAUTHENTICATED=new cm(null),cm.GOOGLE_CREDENTIALS=new cm("google-credentials-uid"),cm.FIRST_PARTY=new cm("first-party-uid");var dm=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ul(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(El("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),pm=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ul(i.error.code,i.error.message)),o?new t(e,i.state,r):(El("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),gm=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=sd(),s=0;i&&s<r.activeTargetIds.length;++s)i=Vl(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(El("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),mm=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(El("SharedClientState","Failed to parse online state: "+e),null)},t}(),ym=function(){function t(){this.activeTargetIds=sd()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),vm=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new Gf(jl),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=lm(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new ym),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(yl.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(yl.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(lm(this.persistenceKey,r)))&&(o=gm.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(fm(this.persistenceKey,t));if(n){var r=pm.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(fm(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return _l("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){_l("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){_l("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(_l("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void El("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable(function(){return Object(yl.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(yl.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(s=function(t){var e=vl.o;if(null!=t)try{var n=JSON.parse(t);Cl("number"==typeof n),e=n}catch(t){El("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==vl.o&&this.sequenceNumberHandler(s);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new dm(this.currentUser,t,e,n),i=hm(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=hm(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=fm(this.persistenceKey,t),i=new pm(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return gm.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return dm.$s(new cm(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return pm.$s(r,e)},t.prototype.Ys=function(t){return mm.$s(t)},t.prototype.hi=function(t){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(_l("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=sd();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),bm=function(){function t(){this.yi=new ym,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new ym,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),wm=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),_m=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){_l("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){_l("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Em={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Om=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),Tm=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(yl.c)(e,t),e.prototype.qi=function(t,e,n,r){return new Promise(function(i,o){var s=new ml;s.listenOnce(dl.COMPLETE,function(){try{switch(s.getLastErrorCode()){case fl.NO_ERROR:var e=s.getResponseJson();_l("Connection","XHR received:",JSON.stringify(e)),i(e);break;case fl.TIMEOUT:_l("Connection",'RPC "'+t+'" timed out'),o(new Ul(Fl.DEADLINE_EXCEEDED,"Request time out"));break;case fl.HTTP_ERROR:var n=s.getStatus();if(_l("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Fl).indexOf(e)>=0?e:Fl.UNKNOWN}(r.status);o(new Ul(a,r.message))}else o(new Ul(Fl.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ul(Fl.UNAVAILABLE,"Connection failed."));break;default:Sl()}}finally{_l("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new al,i=lu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(gs.l)()||Object(gs.n)()||Object(gs.j)()||Object(gs.k)()||Object(gs.o)()||Object(gs.i)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");_l("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Om({vi:function(t){c?_l("Connection","Not sending because WebChannel is closed:",t):(u||(_l("Connection","Opening WebChannel transport."),a.open(),u=!0),_l("Connection","WebChannel sending:",t),a.send(t))},Pi:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,gl.EventType.OPEN,function(){c||_l("Connection","WebChannel transport opened.")}),h(a,gl.EventType.CLOSE,function(){c||(c=!0,_l("Connection","WebChannel transport closed"),l.$i())}),h(a,gl.EventType.ERROR,function(t){c||(c=!0,Ol("Connection","WebChannel transport errored:",t),l.$i(new Ul(Fl.UNAVAILABLE,"The operation could not be completed")))}),h(a,gl.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Cl(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){_l("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Vf[t];if(void 0!==e)return zf(e)}(i),s=r.message;void 0===o&&(o=Fl.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new Ul(o,s)),a.close()}else _l("Connection","WebChannel received:",n),l.Fi(n)}}),h(i,pl.STAT_EVENT,function(t){10===t.stat?_l("Connection","Detected buffering proxy"):11===t.stat&&_l("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ni()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);_l("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then(function(t){return _l("RestConnection","Received: ",t),t},function(e){throw Ol("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+Em[t]},t}());function Sm(){return"undefined"!=typeof window?window:null}function Cm(){return"undefined"!=typeof document?document:null}function Im(t){return new vd(t,!0)}var xm=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&_l("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),Am=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new xm(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===Fl.RESOURCE_EXHAUSTED?(El(e.toString()),El("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===Fl.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}})})},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then(function(e){t.sr===n&&t.gr(e)},function(n){e(function(){var e=new Ul(Fl.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)})})},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return Object(yl.b)(t,void 0,void 0,function(){return Object(yl.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.pr=function(t){return _l("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget(function(){return e.sr===t?n():(_l("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),jm=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,s}return Object(yl.c)(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Sl()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(Cl(void 0===e||"string"==typeof e),Kl.fromBase64String(e||"")):(Cl(void 0===e||e instanceof Uint8Array),Kl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Fl.UNKNOWN:zf(t.code);return new Ul(e,t.message||"")}(a);n=new hd(r,i,o,s||null)}else if("documentChange"in e){i=Cd(t,(r=e.documentChange).document.name),o=Ed(r.document.updateTime);var a=new rf({mapValue:{fields:r.document.fields}}),u=(s=new gh(i,o,a,{}),r.targetIds||[]);n=new cd(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Cd(t,(r=e.documentDelete).document),o=r.readTime?Ed(r.readTime):ef.min(),a=new mh(i,o),n=new cd([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Cd(t,(r=e.documentRemove).document),n=new cd([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Sl();var c=e.filter;i=new Bf(r=c.count||0),n=new ld(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return ef.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ef.min():e.readTime?Ed(e.readTime):ef.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=Ad(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=Eh(r)?{documents:Pd(t,r)}:{query:Md(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=wd(t,e.resumeToken):e.snapshotVersion.compareTo(ef.min())>0&&(n.readTime=bd(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Sl()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=Ad(this.D),e.removeTarget=t,this.wr(e)},e}(Am),km=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,s.Rr=!1,s}return Object(yl.c)(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(Cl(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(Cl(void 0!==e),t.map(function(t){return function(t,e){var n=Ed(t.updateTime?t.updateTime:e);return n.isEqual(ef.min())&&(n=Ed(e)),new Of(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Ed(t.commitTime);return this.listener.Pr(n,e)}return Cl(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=Ad(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Rd(e.D,t)})};this.wr(n)},e}(Am),Nm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Object(yl.c)(e,t),e.prototype.Cr=function(){if(this.Dr)throw new Ul(Fl.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Mi(t,e,n,i)}).catch(function(t){throw t.code===Fl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Ui(t,e,n,i)}).catch(function(t){throw t.code===Fl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Dr=!1},e}(function(){}),Rm=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(El(e),this.Fr=!1):_l("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),Dm=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return Object(yl.b)(o,void 0,void 0,function(){return Object(yl.d)(this,function(t){switch(t.label){case 0:return Hm(this)?(_l("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(yl.b)(this,void 0,void 0,function(){var e;return Object(yl.d)(this,function(n){switch(n.label){case 0:return(e=Il(t)).Qr.add(4),[4,Mm(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,Pm(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new Rm(n,r)};function Pm(t){return Object(yl.b)(this,void 0,void 0,function(){var e,n;return Object(yl.d)(this,function(r){switch(r.label){case 0:if(!Hm(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Mm(t){return Object(yl.b)(this,void 0,void 0,function(){var e,n;return Object(yl.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Lm(t,e){var n=Il(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),Bm(n)?qm(n):iy(n).ar()&&Fm(n,e))}function Vm(t,e){var n=Il(t),r=iy(n);n.Ur.delete(e),r.ar()&&Um(n,e),0===n.Ur.size&&(r.ar()?r.lr():Hm(n)&&n.jr.set("Unknown"))}function Fm(t,e){t.Gr.H(e.targetId),iy(t).Ir(e)}function Um(t,e){t.Gr.H(e),iy(t).Ar(e)}function qm(t){t.Gr=new dd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),iy(t).start(),t.jr.Or()}function Bm(t){return Hm(t)&&!iy(t).cr()&&t.Ur.size>0}function Hm(t){return 0===Il(t).Qr.size}function zm(t){t.Gr=void 0}function Gm(t){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(e){return t.Ur.forEach(function(e,n){Fm(t,e)}),[2]})})}function Km(t,e){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(n){return zm(t),Bm(t)?(t.jr.Lr(e),qm(t)):t.jr.set("Unknown"),[2]})})}function $m(t,e,n){return Object(yl.b)(this,void 0,void 0,function(){var r,i,o;return Object(yl.d)(this,function(s){switch(s.label){case 0:if(t.jr.set("Online"),!(e instanceof hd&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(yl.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),_l("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Wm(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof cd?t.Gr.st(e):e instanceof ld?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(ef.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,qg(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(Kl.EMPTY_BYTE_STRING,n.snapshotVersion)),Um(t,e);var r=new Rp(n.target,e,1,n.sequenceNumber);Fm(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return _l("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Wm(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Wm(t,e,n){return Object(yl.b)(this,void 0,void 0,function(){var r=this;return Object(yl.d)(this,function(i){switch(i.label){case 0:if(!Tp(e))throw e;return t.Qr.add(1),[4,Mm(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return qg(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(yl.b)(r,void 0,void 0,function(){return Object(yl.d)(this,function(e){switch(e.label){case 0:return _l("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,Pm(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Qm(t,e){return e().catch(function(n){return Wm(t,n,e)})}function Ym(t){return Object(yl.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(yl.d)(this,function(s){switch(s.label){case 0:e=Il(t),n=oy(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Hm(t)&&t.qr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,zg(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=oy(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Wm(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Xm(e)&&Jm(e),[2]}})})}function Xm(t){return Hm(t)&&!oy(t).cr()&&t.qr.length>0}function Jm(t){oy(t).start()}function Zm(t){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(e){return oy(t).Sr(),[2]})})}function ty(t){return Object(yl.b)(this,void 0,void 0,function(){var e,n,r;return Object(yl.d)(this,function(i){for(e=oy(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]})})}function ey(t,e,n){return Object(yl.b)(this,void 0,void 0,function(){var r,i;return Object(yl.d)(this,function(o){switch(o.label){case 0:return r=t.qr.shift(),i=Np.from(r,e,n),[4,Qm(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Ym(t)];case 2:return o.sent(),[2]}})})}function ny(t,e){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(n){switch(n.label){case 0:return e&&oy(t).br?[4,function(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r;return Object(yl.d)(this,function(i){switch(i.label){case 0:return Hf(r=e.code)&&r!==Fl.ABORTED?(n=t.qr.shift(),oy(t).hr(),[4,Qm(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Ym(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Xm(t)&&Jm(t),[2]}})})}function ry(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n;return Object(yl.d)(this,function(r){switch(r.label){case 0:return n=Il(t),e?(n.Qr.delete(2),[4,Pm(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,Mm(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function iy(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=Il(t);return r.Cr(),new jm(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:Gm.bind(null,t),Di:Km.bind(null,t),Tr:$m.bind(null,t)}),t.Kr.push(function(n){return Object(yl.b)(e,void 0,void 0,function(){return Object(yl.d)(this,function(e){switch(e.label){case 0:return n?(t.zr.hr(),Bm(t)?qm(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),zm(t),e.label=3;case 3:return[2]}})})})),t.zr}function oy(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=Il(t);return r.Cr(),new km(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:Zm.bind(null,t),Di:ny.bind(null,t),Vr:ty.bind(null,t),Pr:ey.bind(null,t)}),t.Kr.push(function(n){return Object(yl.b)(e,void 0,void 0,function(){return Object(yl.d)(this,function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,Ym(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(_l("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}})})})),t.Hr}var sy=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new vp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ul(Fl.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ay(t,e){if(El("AsyncQueue",e+": "+t),Tp(t))return new Ul(Fl.UNAVAILABLE,e+": "+t);throw t}var uy=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Gl.comparator(e.key,n.key)}:function(t,e){return Gl.comparator(t.key,e.key)},this.keyedMap=td(),this.sortedSet=new Gf(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),cy=function(){function t(){this.Jr=new Gf(Gl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Sl():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),ly=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,uy.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),hy=function(){this.Xr=void 0,this.listeners=[]},fy=function(){this.queries=new bg(function(t){return Yh(t)},Qh),this.onlineState="Unknown",this.Zr=new Set};function dy(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(yl.d)(this,function(c){switch(c.label){case 0:if(n=Il(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new hy),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=c.sent(),[3,4];case 3:return a=c.sent(),u=ay(a,"Initialization of query '"+Xh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&yy(n),[2]}})})}function py(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(yl.d)(this,function(a){return n=Il(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function gy(t,e){for(var n=Il(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&yy(n)}function my(t,e,n){var r=Il(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function yy(t){t.Zr.forEach(function(t){t.next()})}var vy=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ly(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=ly.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),by=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),wy=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return Cd(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?Nd(this.D,t.document,!1):new mh(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return Ed(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new wy(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||id()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(yl.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(yl.d)(this,function(o){switch(o.label){case 0:return[4,Xg(this.localStore,new wy(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Jg(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Rg(Object.assign({},this.progress),t))]}})})}}();var _y=function(t){this.key=t},Ey=function(t){this.key=t},Oy=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=id(),this.mutatedKeys=id(),this.po=Zh(t),this.Eo=new uy(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new cy,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=qh(this.query)&&i.size===this.query.limit?i.last():null,c=Bh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof gh?e:null;h&&(h=Jh(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),qh(this.query)||Bh(this.query))for(;s.size>this.query.limit;){var l=qh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:s,Ao:r,Mn:a,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Sl()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)}),this.bo(n);var s=e?this.vo():[],a=0===this.yo.size&&this.current?1:0,u=a!==this.mo;return this.mo=a,0!==o.length||u?{snapshot:new ly(this.query,t.Eo,i,o,t.mutatedKeys,0===a,u,!1),Po:s}:{Po:s}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new cy,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=id(),this.Eo.forEach(function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))});var n=[];return e.forEach(function(e){t.yo.has(e)||n.push(new Ey(e))}),this.yo.forEach(function(t){e.has(t)||n.push(new _y(t))}),n},t.prototype.So=function(t){this._o=t.jn,this.yo=id();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return ly.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),Ty=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Sy=function(t){this.key=t,this.Co=!1},Cy=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new bg(function(t){return Yh(t)},Qh),this.$o=new Map,this.Fo=new Set,this.Oo=new Gf(Gl.comparator),this.ko=new Map,this.Mo=new tm,this.Lo={},this.Bo=new Map,this.qo=ag.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function Iy(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(yl.d)(this,function(a){switch(a.label){case 0:return n=nv(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,Gg(n.localStore,$h(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,xy(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Lm(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function xy(t,e,n,r){return Object(yl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(yl.d)(this,function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Object(yl.b)(this,void 0,void 0,function(){var i,o,s;return Object(yl.d)(this,function(a){switch(a.label){case 0:return(i=e.view.Io(n)).Mn?[4,$g(t.localStore,e.query,!1).then(function(t){return e.view.Io(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(qy(t,e.targetId,s.Po),s.snapshot)]}})})}(t,e,n,r)},[4,$g(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Oy(e,i.jn),s=o.Io(i.documents),a=ud.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),qy(t,n,u.Po),c=new Ty(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}})})}function Ay(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i;return Object(yl.d)(this,function(o){switch(o.label){case 0:return n=Il(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter(function(t){return!Qh(t,e)})),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Kg(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Vm(n.remoteStore,r.targetId),Fy(n,r.targetId)}).catch(fg)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Fy(n,r.targetId),[4,Kg(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function jy(t,e,n){return Object(yl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(yl.d)(this,function(a){switch(a.label){case 0:r=rv(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Il(t),i=Xl.now(),o=e.reduce(function(t,e){return t.add(e.key)},id());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Kn.bn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Af(c,n.get(c.key));null!=l&&s.push(new Rf(c.key,l,sf(l.proto.mapValue),Tf.exists(!0)))}return r.Tn.addMutationBatch(t,i,s,e)})}).then(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new Gf(jl)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,zy(r,i.changes)];case 3:return a.sent(),[4,Ym(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ay(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function ky(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r;return Object(yl.d)(this,function(i){switch(i.label){case 0:n=Il(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Bg(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.ko.get(e);r&&(Cl(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?Cl(r.Co):t.removedDocuments.size>0&&(Cl(r.Co),r.Co=!1))}),[4,zy(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,fg(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Ny(t,e,n){var r=Il(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach(function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Il(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)}),r&&yy(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ry(t,e,n){return Object(yl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(yl.d)(this,function(c){switch(c.label){case 0:return(r=Il(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(s=(s=new Gf(Gl.comparator)).insert(o,new mh(o,ef.min())),a=id().add(o),u=new ad(ef.min(),new Map,new Wf(jl),s,a),[4,ky(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),Hy(r),[3,4];case 2:return[4,Kg(r.localStore,e,!1).then(function(){return Fy(r,e,n)}).catch(fg)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Dy(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i;return Object(yl.d)(this,function(o){switch(o.label){case 0:n=Il(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ug(n.localStore,e)];case 2:return i=o.sent(),Vy(n,r,null),Ly(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,zy(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,fg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Py(t,e,n){return Object(yl.b)(this,void 0,void 0,function(){var r,i;return Object(yl.d)(this,function(o){switch(o.label){case 0:r=Il(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Il(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Tn.lookupMutationBatch(t,e).next(function(e){return Cl(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Vy(r,e,n),Ly(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,zy(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,fg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function My(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(yl.d)(this,function(a){switch(a.label){case 0:Hm((n=Il(t)).remoteStore)||_l("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Il(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=ay(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Ly(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function Vy(t,e,n){var r=Il(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function Fy(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach(function(e){t.Mo.containsKey(e)||Uy(t,e)})}function Uy(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(Vm(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),Hy(t))}function qy(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof _y?(t.Mo.addReference(o.key,e),By(t,o)):o instanceof Ey?(_l("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||Uy(t,o.key)):Sl()}}function By(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(_l("SyncEngine","New document in limbo: "+n),t.Fo.add(r),Hy(t))}function Hy(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new Gl(Bl.fromString(e)),r=t.qo.next();t.ko.set(r,new Sy(n)),t.Oo=t.Oo.insert(n,r),Lm(t.remoteStore,new Rp($h(Uh(n.path)),r,2,vl.o))}}function zy(t,e,n){return Object(yl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(yl.d)(this,function(a){switch(a.label){case 0:return r=Il(t),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach(function(t,a){s.push(r.Qo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Pg.Nn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.xo.Tr(i),[4,function(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(yl.d)(this,function(l){switch(l.label){case 0:n=Il(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return bp.forEach(e,function(e){return bp.forEach(e.Cn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return bp.forEach(e.xn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Tp(r=l.sent()))throw r;return _l("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Bn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Gy(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r;return Object(yl.d)(this,function(i){switch(i.label){case 0:return(n=Il(t)).currentUser.isEqual(e)?[3,3]:(_l("SyncEngine","User change. New user:",e.toKey()),[4,Fg(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach(function(t){t.forEach(function(t){t.reject(new Ul(Fl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,zy(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Ky(t,e){var n=Il(t),r=n.ko.get(e);if(r&&r.Co)return id().add(r.key);var i=id(),o=n.$o.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.No.get(a[s]);i=i.unionWith(u.view.To)}return i}function $y(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i;return Object(yl.d)(this,function(o){switch(o.label){case 0:return[4,$g((n=Il(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&qy(n,e.targetId,i.Po),i)]}})})}function Wy(t){return Object(yl.b)(this,void 0,void 0,function(){var e;return Object(yl.d)(this,function(n){return[2,Qg((e=Il(t)).localStore).then(function(t){return zy(e,t)})]})})}function Qy(t,e,n,r){return Object(yl.b)(this,void 0,void 0,function(){var i,o;return Object(yl.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Il(t),r=Il(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Jt(t,e).next(function(e){return e?n.Kn.bn(t,e):bp.resolve(null)})})}((i=Il(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ym(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Vy(i,e,r||null),Ly(i,e),function(t,e){Il(Il(t).Tn).Xt(e)}(i.localStore,e)):Sl(),s.label=4;case 4:return[4,zy(i,o)];case 5:return s.sent(),[3,7];case 6:_l("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Yy(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(yl.d)(this,function(c){switch(c.label){case 0:return nv(n=Il(t)),rv(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Xy(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,ry(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Lm(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(a=[],u=Promise.resolve(),n.$o.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Fy(n,e),Kg(n.localStore,e,!0)}),Vm(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Xy(n,a)];case 5:return c.sent(),function(t){var e=Il(t);e.ko.forEach(function(t,n){Vm(e.remoteStore,n)}),e.Mo.cs(),e.ko=new Map,e.Oo=new Gf(Gl.comparator)}(n),n.Uo=!1,[4,ry(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Xy(t,e,n){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(yl.d)(this,function(g){switch(g.label){case 0:n=Il(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.$o.get(a=s[o]))&&0!==c.length?[4,Gg(n.localStore,$h(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.No.get(h[l]),[4,$y(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Wg(n.localStore,a)];case 8:return p=g.sent(),[4,Gg(n.localStore,p)];case 9:return u=g.sent(),[4,xy(n,Jy(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}})})}function Jy(t){return Fh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Zy(t){var e=Il(t);return Il(Il(e.localStore).persistence).gn()}function tv(t,e,n,r){return Object(yl.b)(this,void 0,void 0,function(){var i,o,s;return Object(yl.d)(this,function(a){switch(a.label){case 0:return(i=Il(t)).Uo?(_l("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Qg(i.localStore)];case 3:return o=a.sent(),s=ad.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,zy(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Kg(i.localStore,e,!0)];case 6:return a.sent(),Fy(i,e,r),[3,8];case 7:Sl(),a.label=8;case 8:return[2]}})})}function ev(t,e,n){return Object(yl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(yl.d)(this,function(f){switch(f.label){case 0:if(!(r=nv(t)).Uo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.$o.has(s=o[i])?(_l("SyncEngine","Adding an already active target "+s),[3,5]):[4,Wg(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Gg(r.localStore,a)];case 3:return u=f.sent(),[4,xy(r,Jy(a),u.targetId,!1)];case 4:f.sent(),Lm(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(yl.d)(this,function(e){switch(e.label){case 0:return r.$o.has(t)?[4,Kg(r.localStore,t,!1).then(function(){Vm(r.remoteStore,t),Fy(r,t)}).catch(fg)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function nv(t){var e=Il(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ky.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ky.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ry.bind(null,e),e.xo.Tr=gy.bind(null,e.eventManager),e.xo.Ko=my.bind(null,e.eventManager),e}function rv(t){var e=Il(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Py.bind(null,e),e}var iv=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(e){switch(e.label){case 0:return this.D=Im(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}})})},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return Vg(this.persistence,new Mg,t.initialUser,this.D)},t.prototype.Go=function(t){return new sm(um.Cs,this.D)},t.prototype.jo=function(t){return new bm},t.prototype.terminate=function(){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),ov=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(yl.c)(e,t),e.prototype.initialize=function(e){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Yg(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,rv(this.Jo.syncEngine)];case 4:return n.sent(),[4,Ym(this.Jo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ho=function(t){return Vg(this.persistence,new Mg,t.initialUser,this.D)},e.prototype.zo=function(t){return new gg(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=Ng(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Zp.withCacheSize(this.cacheSizeBytes):Zp.DEFAULT;return new Ag(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Sm(),Cm(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new bm},e}(iv),sv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(yl.c)(e,t),e.prototype.initialize=function(e){return Object(yl.b)(this,void 0,void 0,function(){var n,r=this;return Object(yl.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof vm?(this.sharedClientState.syncEngine={wi:Qy.bind(null,n),_i:tv.bind(null,n),mi:ev.bind(null,n),gn:Zy.bind(null,n),di:Wy.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en(function(t){return Object(yl.b)(r,void 0,void 0,function(){return Object(yl.d)(this,function(e){switch(e.label){case 0:return[4,Yy(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jo=function(t){var e=Sm();if(!vm.At(e))throw new Ul(Fl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ng(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new vm(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(ov),av=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n=this;return Object(yl.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Ny(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Gy.bind(null,this.syncEngine),[4,ry(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new fy},t.prototype.createDatastore=function(t){var e=Im(t.databaseInfo.databaseId),n=new Tm(t.databaseInfo);return function(t,e,n){return new Nm(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Ny(s.syncEngine,t,0)},o=_m.At()?new _m:new wm,new Dm(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Cy(t,e,n,r,i,o);return s&&(a.Uo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(yl.b)(this,void 0,void 0,function(){var e;return Object(yl.d)(this,function(n){switch(n.label){case 0:return e=Il(t),_l("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,Mm(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),uv=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),cv=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new vp,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Wo=function(){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},t.prototype.ec=function(){return Object(yl.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(yl.d)(this,function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new by(JSON.parse(r),t.length+n)]}})})},t.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.nc=function(){return Object(yl.b)(this,void 0,void 0,function(){var t,e;return Object(yl.d)(this,function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.ic=function(t){return Object(yl.b)(this,void 0,void 0,function(){var e;return Object(yl.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Object(yl.b)(this,void 0,void 0,function(){var t,e;return Object(yl.d)(this,function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(yl.b)(this,void 0,void 0,function(){var e,n=this;return Object(yl.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ul(Fl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(yl.d)(this,function(u){switch(u.label){case 0:return n=Il(t),r=Ad(n.D)+"/documents",i={documents:e.map(function(t){return Sd(n.D,t)})},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Cl(!!e.found);var n=Cd(t,e.found.name),r=Ed(e.found.updateTime),i=new rf({mapValue:{fields:e.found.fields}});return new gh(n,r,i,{})}(t,e):"missing"in e?function(t,e){Cl(!!e.missing),Cl(!!e.readTime);var n=Cd(t,e.missing),r=Ed(e.readTime);return new mh(n,r)}(t,e):Sl()}(n.D,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Cl(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof mh||t instanceof gh?n.recordVersion(t):Sl()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Uf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(yl.b)(this,void 0,void 0,function(){var t,e=this;return Object(yl.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Gl.fromPath(n);e.mutations.push(new qf(r,e.precondition(r)))}),[4,function(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i;return Object(yl.d)(this,function(o){switch(o.label){case 0:return n=Il(t),r=Ad(n.D)+"/documents",i={writes:e.map(function(t){return Rd(n.D,t)})},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof gh)e=t.version;else{if(!(t instanceof mh))throw Sl();e=ef.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ul(Fl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Tf.updateTime(e):Tf.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ef.min()))throw new Ul(Fl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tf.updateTime(e)}return Tf.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),lv=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new xm(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi(function(){return Object(yl.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(yl.d)(this,function(r){return t=new cv(this.datastore),(e=this.uc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.hc(t)})})}).catch(function(t){n.hc(t)}),[2]})})})},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!Ml(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Hf(e)}return!1},t}(),hv=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=cm.UNAUTHENTICATED,this.clientId=Al.u(),this.credentialListener=function(){},this.receivedInitialUser=new vp,this.credentials.setChangeListener(function(t){_l("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ul(Fl.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new vp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(yl.b)(t,void 0,void 0,function(){var t,n;return Object(yl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ay(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function fv(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(yl.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),_l("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(yl.b)(i,void 0,void 0,function(){return Object(yl.d)(this,function(t){switch(t.label){case 0:return[4,Fg(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function dv(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r;return Object(yl.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,pv(t)];case 1:return n=i.sent(),_l("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(yl.b)(this,void 0,void 0,function(){var n,r;return Object(yl.d)(this,function(i){switch(i.label){case 0:return(n=Il(t)).asyncQueue.verifyOperationInProgress(),_l("RemoteStore","RemoteStore received new credentials"),r=Hm(n),n.Qr.add(3),[4,Mm(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,Pm(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function pv(t){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(_l("FirestoreClient","Using default OfflineComponentProvider"),[4,fv(t,new iv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function gv(t){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(_l("FirestoreClient","Using default OnlineComponentProvider"),[4,dv(t,new av)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function mv(t){return pv(t).then(function(t){return t.persistence})}function yv(t){return pv(t).then(function(t){return t.localStore})}function vv(t){return gv(t).then(function(t){return t.remoteStore})}function bv(t){return gv(t).then(function(t){return t.syncEngine})}function wv(t){return Object(yl.b)(this,void 0,void 0,function(){var e,n;return Object(yl.d)(this,function(r){switch(r.label){case 0:return[4,gv(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Iy.bind(null,e.syncEngine),n.onUnlisten=Ay.bind(null,e.syncEngine),n)]}})})}function _v(t,e,n){var r=this;void 0===n&&(n={});var i=new vp;return t.asyncQueue.enqueueAndForget(function(){return Object(yl.b)(r,void 0,void 0,function(){var r;return Object(yl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new uv({next:function(o){e.enqueueAndForget(function(){return py(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ul(Fl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ul(Fl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new vy(Uh(n.path),o,{includeMetadataChanges:!0,uo:!0});return dy(t,s)},[4,wv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Ev(t,e,n){var r=this;void 0===n&&(n={});var i=new vp;return t.asyncQueue.enqueueAndForget(function(){return Object(yl.b)(r,void 0,void 0,function(){var r;return Object(yl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new uv({next:function(n){e.enqueueAndForget(function(){return py(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Ul(Fl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new vy(n,o,{includeMetadataChanges:!0,uo:!0});return dy(t,s)},[4,wv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Ov=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},Tv=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Sv=new Map,Cv=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Iv=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(cm.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),xv=function(){function t(t){var e=this;this.fc=null,this.currentUser=cm.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.dc!==e?(_l("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Cl("string"==typeof n.accessToken),new Cv(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return Cl(null===t||"string"==typeof t),new cm(t)},t}(),Av=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=cm.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),jv=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new Av(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(cm.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function kv(t,e,n){if(!n)throw new Ul(Fl.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Nv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Rv(t,e,n,r){if(!0===e&&!0===r)throw new Ul(Fl.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Dv(t){if(!Gl.isDocumentKey(t))throw new Ul(Fl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Pv(t){if(Gl.isDocumentKey(t))throw new Ul(Fl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Mv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Sl()}function Lv(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ul(Fl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Mv(t);throw new Ul(Fl.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Vv(t,e){if(e<=0)throw new Ul(Fl.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Fv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ul(Fl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ul(Fl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Rv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Uv=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Fv({}),this._settingsFrozen=!1,t instanceof Tv?(this._databaseId=t,this._credentials=new Iv):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ul(Fl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tv(t.options.projectId)}(t),this._credentials=new xv(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ul(Fl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ul(Fl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fv(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Iv;switch(t.type){case"gapi":var e=t.client;return Cl(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new jv(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Ul(Fl.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Sv.get(this))&&(_l("ComponentProvider","Removing Datastore"),Sv.delete(this),t.terminate()),Promise.resolve();var t},t}(),qv=function(t){this._delegate=t},Bv=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new zv(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Hv=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),zv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Uh(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(yl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Bv(this.firestore,null,new Gl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Hv);function Gv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof qv&&(t=t._delegate),kv("collection","path",e),t instanceof Uv)return Pv(n=Bl.fromString.apply(Bl,Object(yl.f)([e],r))),new zv(t,null,n);if(!(t instanceof Bv||t instanceof zv))throw new Ul(Fl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Pv(n=Bl.fromString.apply(Bl,Object(yl.f)([t.path],r)).child(Bl.fromString(e))),new zv(t.firestore,null,n)}function Kv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof qv&&(t=t._delegate),1===arguments.length&&(e=Al.u()),kv("doc","path",e),t instanceof Uv)return Dv(n=Bl.fromString.apply(Bl,Object(yl.f)([e],r))),new Bv(t,null,new Gl(n));if(!(t instanceof Bv||t instanceof zv))throw new Ul(Fl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Dv(n=t._path.child(Bl.fromString.apply(Bl,Object(yl.f)([e],r)))),new Bv(t.firestore,t instanceof zv?t._converter:null,new Gl(n))}function $v(t,e){return t instanceof qv&&(t=t._delegate),e instanceof qv&&(e=e._delegate),(t instanceof Bv||t instanceof zv)&&(e instanceof Bv||e instanceof zv)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Wv(t,e){return t instanceof qv&&(t=t._delegate),e instanceof qv&&(e=e._delegate),t instanceof Hv&&e instanceof Hv&&t.firestore===e.firestore&&Qh(t._query,e._query)&&t._converter===e._converter}var Qv=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new xm(this,"async_queue_retry"),this.bc=function(){var e=Cm();e&&_l("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=Cm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=Cm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},t.prototype.Vc=function(){return Object(yl.b)(this,void 0,void 0,function(){var t,e=this;return Object(yl.d)(this,function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!Tp(t=n.sent()))throw t;return _l("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi(function(){return e.Vc()}),n.label=5;case 5:return[2]}})})},t.prototype.Pc=function(t){var e=this,n=this.yc.then(function(){return e.Ac=!0,t().catch(function(t){throw e.Ic=t,e.Ac=!1,El("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Ac=!1,t})});return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=sy.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&Sl()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Object(yl.b)(this,void 0,void 0,function(){var t;return Object(yl.d)(this,function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then(function(){e.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()})},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function Yv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new vp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Xv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Qv,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(yl.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Zv(this),this._firestoreClient.terminate()},e}(Uv);function Jv(t){return t._firestoreClient||Zv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Zv(t){var e=t._freezeSettings(),n=function(t,e,n){return new Ov(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new hv(t._credentials,t._queue,n)}function tb(t,e,n){var r=this,i=new vp;return t.asyncQueue.enqueue(function(){return Object(yl.b)(r,void 0,void 0,function(){var r;return Object(yl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fv(t,n)];case 1:return o.sent(),[4,dv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Fl.FAILED_PRECONDITION||t.code===Fl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function eb(t){if(t._initialized||t._terminated)throw new Ul(Fl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var nb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),rb=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Kl.fromBase64String(e))}catch(e){throw new Ul(Fl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Kl.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ib=function(t){this._methodName=t},ob=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ul(Fl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ul(Fl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return jl(this._lat,t._lat)||jl(this._long,t._long)},t}(),sb=/^__.*__$/,ab=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Rf(t,this.data,this.fieldMask,e,this.fieldTransforms):new Nf(t,this.data,e,this.fieldTransforms)},t}(),ub=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Rf(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function cb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Sl()}}var lb=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return jb(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(cb(this.Fc)&&sb.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),hb=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||Im(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new lb({Fc:t,methodName:e,Kc:n,path:zl.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function fb(t){var e=t._freezeSettings(),n=Im(t._databaseId);return new hb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function db(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);Cb("Data must be an object, but it was:",s,r);var a,u,c=Tb(r,s);if(o.merge)a=new nf(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Ib(e,f[h],n);if(!s.contains(d))throw new Ul(Fl.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");kb(l,d)||l.push(d)}a=new nf(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new ab(new rf(c),a,u)}var pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(yl.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ib);function gb(t,e,n){return new lb({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var mb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(yl.c)(e,t),e.prototype._toFieldTransform=function(t){return new Ef(t.path,new pf)},e.prototype.isEqual=function(t){return t instanceof e},e}(ib),yb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(yl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=gb(this,t,!0),n=this.jc.map(function(t){return Ob(t,e)}),r=new gf(n);return new Ef(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ib),vb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(yl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=gb(this,t,!0),n=this.jc.map(function(t){return Ob(t,e)}),r=new yf(n);return new Ef(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ib),bb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Object(yl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new bf(t.D,cf(t.D,this.Gc));return new Ef(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ib);function wb(t,e,n,r){var i=t.Wc(1,e,n);Cb("Data must be an object, but it was:",i,r);var o=[],s=new of;Dl(r,function(t,r){var a=Ab(e,t,n);r instanceof qv&&(r=r._delegate);var u=i.Bc(a);if(r instanceof pb)o.push(a);else{var c=Ob(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new nf(o);return new ub(s.v(),a,i.fieldTransforms)}function _b(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[Ib(e,r,n)],u=[i];if(o.length%2!=0)throw new Ul(Fl.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Ib(e,o[c])),u.push(o[c+1]);for(var l=[],h=new of,f=a.length-1;f>=0;--f)if(!kb(l,a[f])){var d=a[f],p=u[f];p instanceof qv&&(p=p._delegate);var g=s.Bc(d);if(p instanceof pb)l.push(d);else{var m=Ob(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new nf(l);return new ub(h.v(),y,s.fieldTransforms)}function Eb(t,e,n,r){return void 0===r&&(r=!1),Ob(n,t.Wc(r?4:3,e))}function Ob(t,e){if(t instanceof qv&&(t=t._delegate),Sb(t))return Cb("Unsupported field value:",e,t),Tb(t,e);if(t instanceof ib)return function(t,e){if(!cb(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ob(o[i],e.qc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof qv&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return cf(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Xl.fromDate(t);return{timestampValue:bd(e.D,n)}}if(t instanceof Xl)return n=new Xl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:bd(e.D,n)};if(t instanceof ob)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof rb)return{bytesValue:wd(e.D,t._byteString)};if(t instanceof Bv){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Od(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+Mv(t))}(t,e)}function Tb(t,e){var n={};return Pl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dl(t,function(t,r){var i=Ob(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Sb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Xl||t instanceof ob||t instanceof rb||t instanceof Bv||t instanceof ib)}function Cb(t,e,n){if(!Sb(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Mv(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function Ib(t,e,n){if(e instanceof qv&&(e=e._delegate),e instanceof nb)return e._internalPath;if("string"==typeof e)return Ab(t,e);throw jb("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var xb=new RegExp("[~\\*/\\[\\]]");function Ab(t,e,n){if(e.search(xb)>=0)throw jb("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(nb.bind.apply(nb,Object(yl.f)([void 0],e.split(".")))))._internalPath}catch(r){throw jb("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function jb(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ul(Fl.INVALID_ARGUMENT,(a+=". ")+t+u)}function kb(t,e){return t.some(function(t){return t.isEqual(e)})}var Nb=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Bv(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Rb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(Db("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Rb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(yl.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Nb);function Db(t,e){return"string"==typeof e?Ab(t,e):e instanceof qv?e._delegate._internalPath:e._internalPath}var Pb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Mb=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(yl.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Lb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(Db("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Nb),Lb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(yl.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Mb),Vb=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Pb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Lb(n._firestore,n._userDataWriter,r.key,r,new Pb(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ul(Fl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Lb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Pb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Lb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Pb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Fb(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Fb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Sl()}}function Ub(t,e){return t instanceof Mb&&e instanceof Mb?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Vb&&e instanceof Vb&&t._firestore===e._firestore&&Wv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function qb(t){if(Bh(t)&&0===t.explicitOrderBy.length)throw new Ul(Fl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bb=function(){};function Hb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var zb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Object(yl.c)(e,t),e.prototype._apply=function(t){var e=fb(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Xb(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Yb(r,t,l[c]));a={arrayValue:{values:u}}}else a=Yb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Xb(s,o),a=Eb(n,"where",s,"in"===o||"not-in"===o);var h=Oh.create(i,o,a);return function(t,e){if(e.g()){var n=zh(t);if(null!==n&&!n.isEqual(e.field))throw new Ul(Fl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Hh(t);null!==r&&Jb(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Ul(Fl.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new Hv(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Vh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Bb),Gb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Object(yl.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Dh(e,n);return function(t,e){if(null===Hh(t)){var n=zh(t);null!==n&&Jb(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new Hv(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Vh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Bb),Kb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(yl.c)(e,t),e.prototype._apply=function(t){return new Hv(t.firestore,t._converter,Wh(t._query,this.Xc,this.Zc))},e}(Bb),$b=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(yl.c)(e,t),e.prototype._apply=function(t){var e=Qb(t,this.type,this.ta,this.ea);return new Hv(t.firestore,t._converter,function(t,e){return new Vh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Bb),Wb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(yl.c)(e,t),e.prototype._apply=function(t){var e=Qb(t,this.type,this.ta,this.ea);return new Hv(t.firestore,t._converter,function(t,e){return new Vh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Bb);function Qb(t,e,n,r){if(n[0]instanceof qv&&(n[0]=n[0]._delegate),n[0]instanceof Nb)return function(t,e,n,r,i){if(!r)throw new Ul(Fl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Kh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(uh(e,r.key));else{var c=r.field(u.field);if(Jl(c))throw new Ul(Fl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ul(Fl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Nh(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=fb(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Ul(Fl.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Gh(t)&&-1!==c.indexOf("/"))throw new Ul(Fl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Bl.fromString(c));if(!Gl.isDocumentKey(l))throw new Ul(Fl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Gl(l);a.push(uh(e,h))}else{var f=Eb(n,r,c);a.push(f)}}return new Nh(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Yb(t,e,n){if(n instanceof qv&&(n=n._delegate),"string"==typeof n){if(""===n)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gh(e)&&-1!==n.indexOf("/"))throw new Ul(Fl.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Bl.fromString(n));if(!Gl.isDocumentKey(r))throw new Ul(Fl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return uh(t,new Gl(r))}if(n instanceof Bv)return uh(t,n._key);throw new Ul(Fl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Mv(n)+".")}function Xb(t,e){if(!Array.isArray(t)||0===t.length)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Jb(t,e,n){if(!n.isEqual(e))throw new Ul(Fl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Zb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),eh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ql(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Yl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Sl()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Dl(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new ob(Ql(t.latitude),Ql(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Zl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(th(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Wl(t);return new Xl(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Bl.fromString(t);Cl(Wd(n));var r=new Tv(n.get(1),n.get(3)),i=new Gl(n.popFirst(5));return r.isEqual(e)||El("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function tw(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ew=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(yl.c)(e,t),e.prototype.convertBytes=function(t){return new rb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Bv(this.firestore,null,e)},e}(Zb),nw=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=fb(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=rw(t,this._firestore),i=tw(r._converter,e,n),o=db(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Tf.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=rw(t,this._firestore);return e instanceof qv&&(e=e._delegate),o="string"==typeof e||e instanceof nb?_b(this._dataReader,"WriteBatch.update",s._key,e,n,r):wb(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Tf.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=rw(t,this._firestore);return this._mutations=this._mutations.concat(new Uf(e._key,Tf.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ul(Fl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function rw(t,e){if(t instanceof qv&&(t=t._delegate),t.firestore!==e)throw new Ul(Fl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var iw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(yl.c)(e,t),e.prototype.convertBytes=function(t){return new rb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Bv(this.firestore,null,e)},e}(Zb);function ow(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Lv(t,Bv);var o=Lv(t.firestore,Xv),s=fb(o);return e instanceof qv&&(e=e._delegate),aw(o,[("string"==typeof e||e instanceof nb?_b(s,"updateDoc",t._key,e,n,r):wb(s,"updateDoc",t._key,e)).toMutation(t._key,Tf.exists(!0))])}function sw(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof qv&&(t=t._delegate);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Yv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Yv(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Bv)c=Lv(t.firestore,Xv),l=Uh(t._key.path),u={next:function(e){i[a]&&i[a](uw(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Lv(t,Hv);c=Lv(d.firestore,Xv),l=d._query;var p=new iw(c);u={next:function(t){i[a]&&i[a](new Vb(c,p,d,t))},error:i[a+1],complete:i[a+2]},qb(t._query)}return function(t,e,n,r){var i=this,o=new uv(r),s=new vy(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(yl.b)(i,void 0,void 0,function(){var e;return Object(yl.d)(this,function(n){switch(n.label){case 0:return e=dy,[4,wv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(yl.b)(i,void 0,void 0,function(){var e;return Object(yl.d)(this,function(n){switch(n.label){case 0:return e=py,[4,wv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Jv(c),l,h,u)}function aw(t,e){return function(t,e){var n=this,r=new vp;return t.asyncQueue.enqueueAndForget(function(){return Object(yl.b)(n,void 0,void 0,function(){var n;return Object(yl.d)(this,function(i){switch(i.label){case 0:return n=jy,[4,bv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Jv(t),e)}function uw(t,e,n){var r=n.docs.get(e._key),i=new iw(t);return new Mb(t,i,e._key,r,new Pb(n.hasPendingWrites,n.fromCache),e._converter)}var cw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(yl.c)(e,t),e.prototype.get=function(e){var n=this,r=rw(e,this._firestore),i=new iw(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Mb(n._firestore,i,r._key,t._document,new Pb(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=fb(t)}return t.prototype.get=function(t){var e=this,n=rw(t,this._firestore),r=new ew(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Sl();var i=t[0];if(i instanceof mh)return new Nb(e._firestore,r,n._key,null,n._converter);if(i instanceof gh)return new Nb(e._firestore,r,i.key,i,n._converter);throw Sl()})},t.prototype.set=function(t,e,n){var r=rw(t,this._firestore),i=tw(r._converter,e,n),o=db(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=rw(t,this._firestore);return e instanceof qv&&(e=e._delegate),o="string"==typeof e||e instanceof nb?_b(this._dataReader,"Transaction.update",s._key,e,n,r):wb(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=rw(t,this._firestore);return this._transaction.delete(e._key),this},t}());function lw(){if("undefined"==typeof Uint8Array)throw new Ul(Fl.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function hw(){if("undefined"==typeof atob)throw new Ul(Fl.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var fw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(yl.c)(e,t),e.fromBase64String=function(t){return hw(),new e(rb.fromBase64String(t))},e.fromUint8Array=function(t){return lw(),new e(rb.fromUint8Array(t))},e.prototype.toBase64=function(){return hw(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return lw(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(qv),dw=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){eb(t=Lv(t,Xv));var n=Jv(t),r=t._freezeSettings(),i=new av;return tb(n,i,new ov(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){eb(t=Lv(t,Xv));var e=Jv(t),n=t._freezeSettings(),r=new av;return tb(e,r,new sv(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ul(Fl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new vp;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(yl.b)(e,void 0,void 0,function(){var e;return Object(yl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(yl.b)(this,void 0,void 0,function(){return Object(yl.d)(this,function(e){switch(e.label){case 0:return _p.At()?[4,_p.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Ng(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),pw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Tv||(i.sa=e),i}return Object(yl.c)(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Lv(t,Uv))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Ol("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(yl.b)(e,void 0,void 0,function(){var e,n;return Object(yl.d)(this,function(r){switch(r.label){case 0:return[4,mv(t)];case 1:return e=r.sent(),[4,vv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Il(t);return e.Qr.delete(0),Pm(e)}(n))]}})})})}(Jv(Lv(this._delegate,Xv)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(yl.b)(e,void 0,void 0,function(){var e,n;return Object(yl.d)(this,function(r){switch(r.label){case 0:return[4,mv(t)];case 1:return e=r.sent(),[4,vv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(yl.b)(this,void 0,void 0,function(){var e;return Object(yl.d)(this,function(n){switch(n.label){case 0:return(e=Il(t)).Qr.add(0),[4,Mm(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}(Jv(Lv(this._delegate,Xv)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Rv("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new vp;return t.asyncQueue.enqueueAndForget(function(){return Object(yl.b)(e,void 0,void 0,function(){var e;return Object(yl.d)(this,function(r){switch(r.label){case 0:return e=My,[4,bv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Jv(Lv(this._delegate,Xv)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new uv(e);return t.asyncQueue.enqueueAndForget(function(){return Object(yl.b)(n,void 0,void 0,function(){var e;return Object(yl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Il(t).Zr.add(e),e.next()},[4,wv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(yl.b)(n,void 0,void 0,function(){var e;return Object(yl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Il(t).Zr.delete(e)},[4,wv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Jv(t=Lv(t,Xv)),Yv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new Ul(Fl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new xw(this,Gv(this._delegate,t))}catch(t){throw ww(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new bw(this,Kv(this._delegate,t))}catch(t){throw ww(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Sw(this,function(t,e){if(t=Lv(t,Uv),kv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Hv(t,null,function(t){return new Vh(Bl.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw ww(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new vp;return t.asyncQueue.enqueueAndForget(function(){return Object(yl.b)(n,void 0,void 0,function(){var n;return Object(yl.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return gv(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new lv(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Jv(t),function(n){return e(new cw(t,n))})}(this._delegate,function(n){return t(new mw(e,n))})},e.prototype.batch=function(){var t=this;return Jv(this._delegate),new yw(new nw(this._delegate,function(e){return aw(t._delegate,e)}))},e.prototype.loadBundle=function(t){throw new Ul(Fl.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Ul(Fl.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(qv),gw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(yl.c)(e,t),e.prototype.convertBytes=function(t){return new fw(new rb(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return bw.ia(e,this.firestore,null)},e}(Zb),mw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new gw(e),r}return Object(yl.c)(e,t),e.prototype.get=function(t){var e=this,n=Aw(t);return this._delegate.get(n).then(function(t){return new Ow(e._firestore,new Mb(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},e.prototype.set=function(t,e,n){var r=Aw(t);return n?(Nv("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Aw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(yl.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Aw(t);return this._delegate.delete(e),this},e}(qv),yw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(yl.c)(e,t),e.prototype.set=function(t,e,n){var r=Aw(t);return n?(Nv("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Aw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(yl.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Aw(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(qv),vw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Object(yl.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new Lb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Tw(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new gw(t),n),i.set(n,o)),o},e}(qv);vw.oa=new WeakMap;var bw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new gw(e),r}return Object(yl.c)(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Bv(n._delegate,r,new Gl(t)))},e.ia=function(t,n,r){return new e(n,new Bv(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new xw(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new xw(this.firestore,Gv(this._delegate,t))}catch(t){throw ww(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof qv&&(t=t._delegate),t instanceof Bv&&$v(this._delegate,t)},e.prototype.set=function(t,e){e=Nv("DocumentReference.set",e);try{return function(t,e,n){t=Lv(t,Bv);var r=Lv(t.firestore,Xv),i=tw(t._converter,e,n);return aw(r,[db(fb(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Tf.none())])}(this._delegate,t,e)}catch(t){throw ww(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ow(this._delegate,t):ow.apply(void 0,Object(yl.f)([this._delegate,t,e],n))}catch(t){throw ww(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return aw(Lv((t=this._delegate).firestore,Xv),[new Uf(t._key,Tf.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=_w(e),i=Ew(e,function(e){return new Ow(t.firestore,new Mb(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return sw(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Lv(t,Bv);var e=Lv(t.firestore,Xv),n=Jv(e),r=new iw(e);return function(t,e){var n=this,r=new vp;return t.asyncQueue.enqueueAndForget(function(){return Object(yl.b)(n,void 0,void 0,function(){var n;return Object(yl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(yl.b)(this,void 0,void 0,function(){var r,i;return Object(yl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Il(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof gh?n.resolve(i):i instanceof mh?n.resolve(null):n.reject(new Ul(Fl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ay(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,yv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Mb(e,r,t._key,n,new Pb(n instanceof gh&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Lv(t,Bv);var e=Lv(t.firestore,Xv);return _v(Jv(e),t._key,{source:"server"}).then(function(n){return uw(e,t,n)})}(this._delegate):function(t){t=Lv(t,Bv);var e=Lv(t.firestore,Xv);return _v(Jv(e),t._key).then(function(n){return uw(e,t,n)})}(this._delegate)).then(function(t){return new Ow(e.firestore,new Mb(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?vw.ra(this.firestore,t):null))},e}(qv);function ww(t,e,n){return t.message=t.message.replace(e,n),t}function _w(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Yv(r))return r}return{}}function Ew(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Yv(t[0])?t[0]:Yv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Ow=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(yl.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new bw(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return Ub(this._delegate,t._delegate)},e}(qv),Tw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(yl.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Ow),Sw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new gw(e),r}return Object(yl.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Hb(this._delegate,function(t,e,n){var r=e,i=Db("where",t);return new zb(i,r,n)}(t,n,r)))}catch(t){throw ww(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Hb(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Db("orderBy",t);return new Gb(r,n)}(t,n)))}catch(t){throw ww(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Hb(this._delegate,function(t){return Vv("limit",t),new Kb("limit",t,"F")}(t)))}catch(t){throw ww(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Hb(this._delegate,function(t){return Vv("limitToLast",t),new Kb("limitToLast",t,"L")}(t)))}catch(t){throw ww(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Hb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $b("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw ww(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Hb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $b("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw ww(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Hb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wb("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw ww(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Hb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wb("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw ww(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Wv(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Lv(t,Hv);var e=Lv(t.firestore,Xv),n=Jv(e),r=new iw(e);return function(t,e){var n=this,r=new vp;return t.asyncQueue.enqueueAndForget(function(){return Object(yl.b)(n,void 0,void 0,function(){var n;return Object(yl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(yl.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(yl.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,$g(t,e,!0)];case 1:return a=u.sent(),r=new Oy(e,a.jn),i=r.Io(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ay(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,yv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Vb(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Lv(t,Hv);var e=Lv(t.firestore,Xv),n=Jv(e),r=new iw(e);return Ev(n,t._query,{source:"server"}).then(function(n){return new Vb(e,r,t,n)})}(this._delegate):function(t){t=Lv(t,Hv);var e=Lv(t.firestore,Xv),n=Jv(e),r=new iw(e);return qb(t._query),Ev(n,t._query).then(function(n){return new Vb(e,r,t,n)})}(this._delegate)).then(function(t){return new Iw(e.firestore,new Vb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=_w(e),i=Ew(e,function(e){return new Iw(t.firestore,new Vb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return sw(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?vw.ra(this.firestore,t):null))},e}(qv),Cw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(yl.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Tw(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(qv),Iw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(yl.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Sw(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Tw(t._firestore,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Cw(e._firestore,t)})},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Tw(n._firestore,r))})},e.prototype.isEqual=function(t){return Ub(this._delegate,t._delegate)},e}(qv),xw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(yl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new bw(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new bw(this.firestore,void 0===t?Kv(this._delegate):Kv(this._delegate,t))}catch(t){throw ww(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Lv(t.firestore,Xv),r=Kv(t),i=tw(t._converter,e);return aw(n,[db(fb(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Tf.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new bw(e.firestore,t)})},e.prototype.isEqual=function(t){return $v(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?vw.ra(this.firestore,t):null))},e}(Sw);function Aw(t){return t instanceof qv&&(t=t._delegate),Lv(t,Bv)}var jw,kw=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(nb.bind.apply(nb,Object(yl.f)([void 0],e))))||this}return Object(yl.c)(e,t),e.documentId=function(){return new e(zl.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof qv&&(t=t._delegate),t instanceof nb&&this._delegate._internalPath.isEqual(t._internalPath)},e}(qv),Nw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(yl.c)(e,t),e.serverTimestamp=function(){var t=new mb("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new pb("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yb("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vb("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new bb("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(qv),Rw=n("/6Yf"),Dw={Firestore:pw,GeoPoint:ob,Timestamp:Xl,Blob:fw,Transaction:mw,WriteBatch:yw,DocumentReference:bw,DocumentSnapshot:Ow,Query:Sw,QueryDocumentSnapshot:Tw,QuerySnapshot:Iw,CollectionReference:xw,FieldPath:kw,FieldValue:Nw,setLogLevel:function(t){bl.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Rw.a("firestore",function(t){return function(t,e){return new pw(t,new Xv(t,e),new dw)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Dw)))})(jw=ds.a),jw.registerVersion("@firebase/firestore","2.2.1");var Pw=n("VRyK"),Mw=n("qgXg"),Lw=n("Ylt2");class Vw extends dn.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Fw(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new pn.a;if(this.isStopped||this.hasError?o=ir.a.EMPTY:(this.observers.push(t),o=new Lw.a(this,t)),r&&t.add(t=new ls.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Mw.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Fw{constructor(t,e){this.time=t,this.value=e}}function Uw(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Vw(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function qw(t,e){return e?kn(()=>t,e):kn(()=>t)}var Bw=n("tf+s");const Hw=new r.r("angularfire2.auth.use-emulator"),zw=new r.r("angularfire2.auth.settings"),Gw=new r.r("angularfire2.auth.tenant-id"),Kw=new r.r("angularfire2.auth.langugage-code"),$w=new r.r("angularfire2.auth.use-device-language"),Ww=new r.r("angularfire.auth.persistence");let Qw=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new hs.d(i),f=Object(hs.h)(h),d=new dn.a,p=Object(Ie.a)(void 0).pipe(Object(ls.b)(h.outsideAngular),kn(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(yt.a)(()=>Object(hs.g)(t,i,e)),Object(yt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(hs.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Uw({bufferSize:1,refCount:!1}));if(M(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Ie.a)(null);else{p.pipe(nr()).subscribe();const t=p.pipe(kn(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Uw({bufferSize:1,refCount:!1})),e=t=>new gt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(kn(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(kn(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(qw(n),Object(Bw.a)(h.outsideAngular),Object(ls.b)(h.insideAngular)),this.user=t.pipe(qw(r),Object(Bw.a)(h.outsideAngular),Object(ls.b)(h.insideAngular)),this.idToken=this.user.pipe(kn(t=>t?Object(bt.a)(t.getIdToken()):Object(Ie.a)(null))),this.idTokenResult=this.user.pipe(kn(t=>t?Object(bt.a)(t.getIdTokenResult()):Object(Ie.a)(null))),this.credential=Object(Pw.a)(t,d,this.authState.pipe(ke(t=>!t))).pipe(Object(yt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Bw.a)(h.outsideAngular),Object(ls.b)(h.insideAngular))}return Object(hs.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(hs.c),r.Rb(hs.b,8),r.Rb(r.C),r.Rb(r.A),r.Rb(Hw,8),r.Rb(zw,8),r.Rb(Gw,8),r.Rb(Kw,8),r.Rb($w,8),r.Rb(Ww,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(hs.c),Object(r.Rb)(hs.b,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(Hw,8),Object(r.Rb)(zw,8),Object(r.Rb)(Gw,8),Object(r.Rb)(Kw,8),Object(r.Rb)($w,8),Object(r.Rb)(Ww,8))},token:t,providedIn:"any"}),t})();function Yw(t,e){return function(t,e=is.a){return new gt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Xw(t,e){return Yw(t,e).pipe(Object(yt.a)(t=>({payload:t,type:"query"})))}function Jw(t,e){return Xw(t,e).pipe(Vn(void 0),os(),Object(yt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Zw(t,e,n){return Jw(t,n).pipe(Fn((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return t_(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return t_(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return t_(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new us(void 0,void 0)),Object(yt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function t_(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function e_(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(hs.e)(Qw,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class n_{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Jw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(yt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Vn(void 0),os(),ke(([t,e])=>e.length>0||!t),Object(yt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Fn((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=e_(t);return Zw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Xw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(yt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(bt.a)(this.query.get(t)).pipe(Object(ls.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new r_(this.ref.doc(t),this.afs)}}class r_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=c_(n,e);return new n_(r,i,this.afs)}snapshotChanges(){return Yw(this.ref,this.afs.schedulers.outsideAngular).pipe(Vn(void 0),os(),Object(yt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(yt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(bt.a)(this.ref.get(t)).pipe(Object(ls.b)(this.afs.schedulers.insideAngular))}}class i_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Jw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(yt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),ke(t=>t.length>0),this.afs.keepUnstableUntilFirst):Jw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Fn((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=e_(t);return Zw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Xw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(yt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(bt.a)(this.query.get(t)).pipe(Object(ls.b)(this.afs.schedulers.insideAngular))}}const o_=new r.r("angularfire2.enableFirestorePersistence"),s_=new r.r("angularfire2.firestore.persistenceSettings"),a_=new r.r("angularfire2.firestore.settings"),u_=new r.r("angularfire2.firestore.use-emulator");function c_(t,e=(t=>t)){return{query:e(t),ref:t}}let l_=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new hs.d(o),this.keepUnstableUntilFirst=Object(hs.h)(this.schedulers);const c=Object(hs.g)(t,o,e);!fs.a.auth&&u&&Object(hs.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(hs.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!M(i)){const e=()=>{try{return Object(bt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(jw){return"undefined"!=typeof console&&console.warn(jw),Object(Ie.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Ie.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=c_(n,e),o=this.schedulers.ngZone.run(()=>r);return new n_(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new i_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new r_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(hs.c),r.Rb(hs.b,8),r.Rb(o_,8),r.Rb(a_,8),r.Rb(r.C),r.Rb(r.A),r.Rb(s_,8),r.Rb(u_,8),r.Rb(Hw,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(hs.c),Object(r.Rb)(hs.b,8),Object(r.Rb)(o_,8),Object(r.Rb)(a_,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(s_,8),Object(r.Rb)(u_,8),Object(r.Rb)(Hw,8))},token:t,providedIn:"any"}),t})();function h_(t,e){1&t&&(r.Nb(0,"div"),r.Nb(1,"span"),r.ec(2),r.Mb(),r.Mb()),2&t&&(r.Ab(2),r.fc(" ",91184.16092159999," "))}function f_(t,e){if(1&t){const t=r.Ob();r.Nb(0,"li",5),r.Ub("click",function(){r.ac(t);const n=e.$implicit;return r.Wb().helloFrom(n)}),r.ec(1),r.Mb()}if(2&t){const t=e.$implicit;r.Ab(1),r.fc(" ",t," ")}}function d_(t,e){if(1&t&&(r.Nb(0,"li"),r.ec(1),r.Mb()),2&t){const t=e.$implicit;r.Ab(1),r.fc(" ",t," ")}}const p_=function(){return["/login"]};let g_=(()=>{class t{constructor(t,e,n){this.connectionService=t,this.router=e,this.afs=n,this.title="PRF",this.cloudId="",this.value="",this.example=["1_elem"],this.dataObserver=null,console.log(ns),this.cloudElements=[]}goToSecond(){this.router.navigate(["/second","PRF",{message:this.title}])}hello(){console.log("Hello World!"),this.title="PRF"===this.title?"NOT PRF":"PRF",this.example.push(Math.floor(100*Math.random())+"_elem")}helloFrom(t){console.log("Hello from "+t)}saveData(){this.afs.collection("Examples-023").add({id:this.cloudId,value:this.value}).then(t=>{console.log("save successful",t),this.cloudId="",this.value="",this.refreshDb()}).catch(t=>{console.log("save error",t)})}refreshDb(){this.cloudElements=[],this.afs.collection("Examples-023",t=>t.where("id","==","valami").orderBy("value","desc")).get().subscribe(t=>{t.docs.forEach(t=>{const e=t.data();this.cloudElements.push("Id: "+e.id+", Value: "+e.value)})})}ngOnInit(){this.refreshDb()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(rs),r.Kb(No),r.Kb(l_))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-first"]],decls:27,vars:9,consts:[["role","main",1,"content"],[1,"card","highlight-card","card-small",3,"click"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["type","text",3,"ngModel","ngModelChange"],[3,"click"],[3,"routerLink"],[4,"ngFor","ngForOf"],["type","text","id","id",3,"ngModel","ngModelChange"],["type","text","id","value",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Ub("click",function(){return e.hello()}),r.Nb(2,"span"),r.ec(3),r.Mb(),r.Mb(),r.dc(4,h_,3,1,"div",2),r.Nb(5,"ul"),r.dc(6,f_,2,1,"li",3),r.Mb(),r.Nb(7,"input",4),r.Ub("ngModelChange",function(t){return e.title=t}),r.Mb(),r.Nb(8,"button",5),r.Ub("click",function(){return e.goToSecond()}),r.ec(9,"Second"),r.Mb(),r.Nb(10,"a",6),r.ec(11,"Logout"),r.Mb(),r.Nb(12,"ul"),r.dc(13,d_,2,1,"li",7),r.Mb(),r.Nb(14,"div"),r.Nb(15,"div"),r.Nb(16,"label"),r.ec(17,"Id"),r.Mb(),r.Nb(18,"input",8),r.Ub("ngModelChange",function(t){return e.cloudId=t}),r.Mb(),r.Mb(),r.Nb(19,"div"),r.Nb(20,"label"),r.ec(21,"Value"),r.Mb(),r.Nb(22,"input",9),r.Ub("ngModelChange",function(t){return e.value=t}),r.Mb(),r.Mb(),r.Nb(23,"button",5),r.Ub("click",function(){return e.saveData()}),r.ec(24,"SAVE"),r.Mb(),r.Mb(),r.Nb(25,"button",5),r.Ub("click",function(){return e.refreshDb()}),r.ec(26,"REFRESH"),r.Mb(),r.Mb()),2&t&&(r.Ab(3),r.fc("",e.title," app is running!"),r.Ab(1),r.Xb("ngIf","PRF"==e.title),r.Ab(2),r.Xb("ngForOf",e.example),r.Ab(1),r.Xb("ngModel",e.title),r.Ab(3),r.Xb("routerLink",r.Yb(8,p_)),r.Ab(3),r.Xb("ngForOf",e.cloudElements),r.Ab(5),r.Xb("ngModel",e.cloudId),r.Ab(4),r.Xb("ngModel",e.value))},directives:[N,j,Ct,Gt,Ee,Ro],styles:[""]}),t})(),m_=(()=>{class t{constructor(t){this.router=t}canActivate(t,e){return!!localStorage.getItem("user")||(this.router.navigate(["/login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(No))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),y_=(()=>{class t{constructor(t,e){this.http=t,this.auth=e}login(t,e){return this.auth.signInWithEmailAndPassword(t,e)}logout(){return this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ye),r.Rb(Qw))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const v_=function(){return["/first"]},b_=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class t{constructor(t,e){this.loginService=t,this.router=e,this.email="",this.password=""}login(){""!=this.email&&""!=this.password&&this.loginService.login(this.email,this.password).then(t=>{console.log(t),localStorage.setItem("user",t.user.uid),this.router.navigate(["/first"])}).catch(t=>{console.log("login error",t)})}ngOnInit(){localStorage.getItem("user")&&(localStorage.removeItem("user"),this.loginService.logout().then(()=>{console.log("logout sikeres")}).catch(t=>{console.log("logout error",t)}))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(y_),r.Kb(No))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-login"]],decls:20,vars:2,consts:[["role","main",1,"content"],[1,"imgcontainer"],["src","https://www.w3schools.com/howto/img_avatar.png","alt","Avatar",1,"avatar"],[1,"container"],["for","uname"],["type","email","placeholder","Enter Username","id","email","required","",3,"ngModel","ngModelChange"],["for","psw"],["type","password","placeholder","Enter Password","id","password","required","",3,"ngModel","ngModelChange"],["type","submit",3,"click"],["type","checkbox","checked","checked","name","remember"],[1,"container",2,"background-color","#f1f1f1"],[1,"psw"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Lb(2,"img",2),r.Mb(),r.Nb(3,"div",3),r.Nb(4,"label",4),r.Nb(5,"b"),r.ec(6,"Username"),r.Mb(),r.Mb(),r.Nb(7,"input",5),r.Ub("ngModelChange",function(t){return e.email=t}),r.Mb(),r.Nb(8,"label",6),r.Nb(9,"b"),r.ec(10,"Password"),r.Mb(),r.Mb(),r.Nb(11,"input",7),r.Ub("ngModelChange",function(t){return e.password=t}),r.Mb(),r.Nb(12,"button",8),r.Ub("click",function(){return e.login()}),r.ec(13,"LOGIN"),r.Mb(),r.Nb(14,"label"),r.Lb(15,"input",9),r.ec(16," Remember me "),r.Mb(),r.Mb(),r.Nb(17,"div",10),r.Nb(18,"span",11),r.ec(19,"Made by Szedlacsek Bal\xe1zs"),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(7),r.Xb("ngModel",e.email),r.Ab(4),r.Xb("ngModel",e.password))},directives:[Ct,Te,Gt,Ee],styles:["body[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}form[_ngcontent-%COMP%]{border:3px solid #f1f1f1}input[type=password][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;box-sizing:border-box}button[_ngcontent-%COMP%]{background-color:#04aa6d;color:#fff;padding:14px 20px;margin:8px 0;border:none;cursor:pointer;width:100%}button[_ngcontent-%COMP%]:hover{opacity:.8}.cancelbtn[_ngcontent-%COMP%]{width:auto;padding:10px 18px;background-color:#f44336}.imgcontainer[_ngcontent-%COMP%]{text-align:center;margin:24px 0 12px}img.avatar[_ngcontent-%COMP%]{width:40%;border-radius:50%}.container[_ngcontent-%COMP%]{padding:16px}span.psw[_ngcontent-%COMP%]{float:right;padding-top:16px}@media screen and (max-width:300px){span.psw[_ngcontent-%COMP%]{display:block;float:none}.cancelbtn[_ngcontent-%COMP%]{width:100%}}"]}),t})()},{path:"first",component:g_,canActivate:[m_]},{path:"second/:id",component:(()=>{class t{constructor(t){this.route=t,this.message=""}ngOnInit(){this.route.paramMap.subscribe(t=>{console.log(t.keys),console.log(t.get("message")),this.message=t.get("id")+"  "+t.get("message")},t=>{console.log("parammap error",t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(fi))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-second"]],decls:6,vars:3,consts:[["role","main",1,"content"],[1,"card","highlight-card","card-small"],[3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"span"),r.ec(3),r.Mb(),r.Mb(),r.Nb(4,"a",2),r.ec(5,"First"),r.Mb(),r.Mb()),2&t&&(r.Ab(3),r.fc("",e.message," second works"),r.Ab(1),r.Xb("routerLink",r.Yb(2,v_)))},directives:[Ro],styles:[""]}),t})(),canActivate:[m_]},{path:"**",component:es}];let w_=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[Go.forRoot(b_)],Go]}),t})(),__=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:6,vars:0,consts:[["role","banner",1,"toolbar"],["width","40","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],[1,"spacer"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Lb(1,"img",1),r.Nb(2,"span"),r.ec(3,"Welcome"),r.Mb(),r.Lb(4,"div",2),r.Mb(),r.Lb(5,"router-outlet"))},directives:[Po],styles:[""]}),t})(),E_=(()=>{class t{constructor(){}intercept(t,e){return t=t.clone({withCredentials:!0}),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),O_=(()=>{class t{}return t.\u0275mod=r.Ib({type:t,bootstrap:[__]}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[{provide:Je,useClass:E_,multi:!0}],imports:[[pt,w_,fn,Ce,hs.a.initializeApp(ns.firebase)]]}),t})();ns.production&&Object(r.T)(),ft().bootstrapModule(O_).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);